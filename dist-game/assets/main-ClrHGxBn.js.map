{"version":3,"file":"main-ClrHGxBn.js","sources":["../../packages/shared/src/utils/formatUtils.ts","../../packages/game/src/components/ResourceBar.vue","../../packages/game/src/components/buttons/CrankButton.vue","../../packages/game/src/components/buttons/TerminalProgressButton.vue","../../packages/game/src/components/Sidebar.vue","../../packages/game/src/components/SkillNode.vue","../../packages/shared/src/data/nodes/index.ts","../../packages/shared/src/data/nodes/core.ts","../../packages/shared/src/data/nodes/energyBranch.ts","../../packages/shared/src/data/nodes/computerBranch.ts","../../packages/shared/src/data/constants.ts","../../packages/shared/src/data/resources.ts","../../packages/shared/src/data/config.ts","../../packages/shared/src/utils/nodeUtils.ts","../../packages/game/src/core/gameData.ts","../../packages/game/src/composables/useNodeValidation.ts","../../packages/game/src/components/SkillTree.vue","../../packages/game/src/components/InfoPanel.vue","../../packages/game/src/components/NotificationToast.vue","../../packages/game/src/components/NotificationHistoryPanel.vue","../../packages/shared/src/data/prestigeData.ts","../../packages/game/src/components/AscensionPanel.vue","../../packages/shared/src/data/changelogData.ts","../../packages/game/src/components/ChangelogModal.vue","../../packages/game/src/composables/useNodeManagement.ts","../../packages/shared/src/data/notifications/constants.ts","../../packages/game/src/composables/useGameLoop.ts","../../packages/shared/src/types/notification.ts","../../packages/shared/src/data/notifications/narration/mainStory.ts","../../packages/shared/src/data/notifications/narration/energySide.ts","../../packages/shared/src/data/notifications/narration/computerSide.ts","../../packages/shared/src/data/notifications/hints/gameplay.ts","../../packages/game/src/composables/useNotificationEngine.ts","../../packages/shared/src/data/notifications/index.ts","../../packages/game/src/App.vue","../../packages/game/src/composables/useEventBus.ts","../../packages/game/src/composables/useGameState.ts","../../packages/game/src/composables/usePrestigeState.ts","../../packages/game/src/layout/TreeBuilder.ts","../../packages/game/src/layout/PositionCalculator.ts","../../packages/game/src/layout/CollisionResolver.ts","../../packages/game/src/layout/LayoutEngine.ts","../../packages/game/src/main.ts"],"sourcesContent":["/**\n * Format a number with appropriate suffixes (K, M, B, T, etc.)\n * @param num Number to format\n * @return Formatted string\n */\nexport function formatNumber(num: number | null | undefined): string {\n  // Handle invalid inputs\n  if (!num || isNaN(num)) return '0';\n\n  // Convert to number if string\n  const n = Number(num);\n  if (isNaN(n)) return '0';\n\n  if (n < 1000) {\n    if (n < 10) return parseFloat(n.toFixed(2)).toString();\n    if (n < 100) return parseFloat(n.toFixed(1)).toString();\n    return Math.floor(n).toString();\n  }\n\n  const suffixes = ['', 'K', 'M', 'B', 'T', 'Qa', 'Qi', 'Sx', 'Sp', 'Oc', 'No', 'Dc'];\n  const tier = Math.floor(Math.log10(Math.abs(n)) / 3);\n\n  if (tier >= suffixes.length) {\n    return n.toExponential(2);\n  }\n\n  const scaled = n / Math.pow(1000, tier);\n  const decimals = scaled >= 100 ? 0 : scaled >= 10 ? 1 : 2;\n  return scaled.toFixed(decimals) + suffixes[tier];\n}\n\n/**\n * Format data value in bytes to human-readable format (KB, MB, GB, etc.)\n * @param bytes Number of bytes\n * @return Formatted string\n */\nexport function formatDataValue(bytes: number | null | undefined): string {\n  if(!bytes) return '0 B';\n\n  let tier = 0;\n  let value = bytes;\n  const prefixes = ['', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'];\n\n  while (value >= 1024 && tier < prefixes.length - 1) {\n    value /= 1024;\n    tier++;\n  }\n\n  if (tier === 0) {\n    return `${value} ${prefixes[tier]}`;\n  } else {\n    return `${value.toFixed(2)} ${prefixes[tier]}`;\n  }\n}\n\n/**\n * Format milliseconds into human-readable time\n * @param ms Time in milliseconds\n * @return Formatted string\n */\nexport function formatTime(ms: number | null | undefined): string {\n  if (!ms) return 'N/A';\n  const seconds = Math.floor(ms / 1000);\n  const minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n\n  if (hours > 0) return `${hours}h ${minutes % 60}m`;\n  if (minutes > 0) return `${minutes}m ${seconds % 60}s`;\n  return `${seconds}s`;\n}\n","<script setup lang=\"ts\">\nimport { computed } from 'vue';\nimport { formatNumber } from '@network-simulator/shared/utils/formatUtils';\n\ninterface Props {\n  icon: string;\n  name: string;\n  amount: number;\n  rate?: number;\n  visible?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  rate: 0,\n  visible: true,\n});\n\nconst formattedAmount = computed(() => formatNumber(Math.floor(props.amount)));\nconst formattedRate = computed(() => formatNumber(props.rate));\n</script>\n\n<template>\n  <div v-if=\"visible\" class=\"resource\">\n    <span class=\"resource-icon\">{{ icon }}</span>\n    <span class=\"resource-amount\">{{ formattedAmount }}</span>\n    <span class=\"resource-label\">{{ name }}</span>\n    <span class=\"rate\">(+{{ formattedRate }}/s)</span>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { ref, computed, watch, onBeforeUnmount } from 'vue';\n\ninterface Props {\n  value: string;\n  disabled?: boolean;\n  locked?: boolean;\n  broken?: boolean;\n  automated?: boolean;\n  progress?: number | null;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  disabled: false,\n  locked: false,\n  broken: false,\n  automated: false,\n  progress: null,\n});\n\nconst emit = defineEmits<{\n  click: [];\n}>();\n\nconst rotation = ref(0);\nconst isAnimating = ref(false);\nconst autoRotateInterval = ref<number | null>(null);\n\nconst showProgress = computed(() => props.progress !== null && props.progress >= 0);\n\nconst crankStyle = computed(() => ({\n  transform: `rotate(${rotation.value}deg)`,\n}));\n\nconst statusText = computed(() => {\n  if (props.locked) return 'Broken Crank';\n  if (props.broken) return 'Handle Snapped!';\n  if (props.automated) return 'Auto Crank';\n  return 'Turn Crank';\n});\n\nconst handleClick = () => {\n  if (props.disabled || props.locked || props.broken || props.automated) return;\n\n  isAnimating.value = true;\n  rotation.value += 360;\n\n  setTimeout(() => {\n    isAnimating.value = false;\n  }, 400);\n\n  emit('click');\n};\n\nconst startAutoRotate = () => {\n  if (autoRotateInterval.value) return;\n  autoRotateInterval.value = window.setInterval(() => {\n    rotation.value += 360;\n  }, 1000);\n};\n\nconst stopAutoRotate = () => {\n  if (autoRotateInterval.value) {\n    clearInterval(autoRotateInterval.value);\n    autoRotateInterval.value = null;\n  }\n};\n\nwatch(\n  () => props.automated,\n  (val) => {\n    if (val) {\n      startAutoRotate();\n    } else {\n      stopAutoRotate();\n    }\n  },\n  { immediate: true }\n);\n\nonBeforeUnmount(() => {\n  stopAutoRotate();\n});\n</script>\n\n<template>\n  <button\n    class=\"crank-btn\"\n    :class=\"{ locked, broken, automated, 'has-progress': showProgress, animating: isAnimating }\"\n    :disabled=\"disabled || locked || broken\"\n    @click=\"handleClick\"\n  >\n    <div v-if=\"showProgress\" class=\"crank-progress-bar\" :style=\"{ width: progress + '%' }\"></div>\n    <div class=\"crank-container\">\n      <div v-if=\"automated\" class=\"crank-cog\"></div>\n      <div class=\"crank-body\">\n        <div class=\"crank-axle\"></div>\n        <div class=\"crank-arm\" :class=\"{ 'auto-rotating': automated }\" :style=\"crankStyle\">\n          <div v-if=\"!broken\" class=\"crank-handle\"></div>\n          <div v-if=\"broken\" class=\"crank-handle-stub\"></div>\n        </div>\n      </div>\n      <div v-if=\"broken\" class=\"crank-handle-fallen\"></div>\n    </div>\n    <div class=\"crank-info\">\n      <span class=\"crank-text\">{{ statusText }}</span>\n      <span class=\"crank-value\">{{ value }}</span>\n    </div>\n  </button>\n</template>\n","<script setup lang=\"ts\">\nimport { computed } from 'vue';\n\ninterface Props {\n  icon?: string;\n  label?: string;\n  value: string;\n  disabled?: boolean;\n  locked?: boolean;\n  progress?: number | null;\n  barWidth?: number;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  icon: 'üìä',\n  label: 'data',\n  disabled: false,\n  locked: false,\n  progress: null,\n  barWidth: 24,\n});\n\nconst emit = defineEmits<{\n  click: [];\n}>();\n\nconst isActive = computed(() => props.progress !== null && props.progress >= 0);\n\nconst progressBar = computed(() => {\n  if (!isActive.value) {\n    return '[' + '‚îÄ'.repeat(props.barWidth) + ']';\n  }\n  const filled = Math.round((props.progress! / 100) * props.barWidth);\n  const empty = props.barWidth - filled;\n  const filledChars = '‚ñà'.repeat(filled);\n  const emptyChars = '‚ñë'.repeat(empty);\n  return '[' + filledChars + emptyChars + ']';\n});\n\nconst percentText = computed(() => {\n  if (!isActive.value) return '';\n  return Math.round(props.progress!) + '%';\n});\n\nconst statusText = computed(() => {\n  if (props.locked) return 'LOCKED';\n  if (isActive.value) return 'PROCESSING...';\n  return 'READY';\n});\n</script>\n\n<template>\n  <button\n    class=\"terminal-progress-btn\"\n    :class=\"{ locked, active: isActive }\"\n    :disabled=\"disabled || locked\"\n    @click=\"emit('click')\"\n  >\n    <div class=\"terminal-header\">\n      <span class=\"terminal-prompt\">$</span>\n      <span class=\"terminal-cmd\">./generate</span>\n      <span class=\"terminal-label\">--{{ label }}</span>\n      <span class=\"terminal-status\" :class=\"{ processing: isActive }\">{{ statusText }}</span>\n    </div>\n    <div class=\"terminal-body\">\n      <div class=\"terminal-bar-row\">\n        <span class=\"terminal-bar\" :class=\"{ active: isActive }\">{{ progressBar }}</span>\n        <span v-if=\"isActive\" class=\"terminal-percent\">{{ percentText }}</span>\n      </div>\n      <div class=\"terminal-output\">\n        <span class=\"terminal-value\">{{ value }}</span>\n      </div>\n    </div>\n  </button>\n</template>\n","<script setup lang=\"ts\">\nimport { computed } from 'vue';\nimport { formatDataValue, formatNumber } from '@network-simulator/shared/utils/formatUtils';\nimport CrankButton from './buttons/CrankButton.vue';\nimport TerminalProgressButton from './buttons/TerminalProgressButton.vue';\nimport { AutomationRates } from '@network-simulator/shared/types';\n\ninterface DataGeneration {\n  active: boolean;\n  progress: number;\n  bitsPerTick: number;\n  energyCost: number;\n}\n\ninterface EnergyGeneration {\n  active: boolean;\n  progress: number;\n  energyPerTick: number;\n}\n\ninterface GenerationState {\n  dataGeneration: DataGeneration | null;\n  energyGeneration: EnergyGeneration | null;\n  isCrankBroken: boolean;\n  isCrankAutomated: boolean;\n}\n\ninterface ResourceStats {\n  energyPerClick: number;\n  dataPerClick: number;\n  stats: {\n    nodesUnlocked: number;\n    totalEnergy: number;\n    totalData: number;\n  };\n}\n\ninterface GameStats {\n  automations: AutomationRates;\n  effectiveRates: Record<string, number>;\n  coresEarned: number;\n  highestTierReached: number;\n  isDataUnlocked: boolean;\n  canProcessData: boolean;\n}\n\ninterface Props {\n  resourceStats: ResourceStats;\n  generationState: GenerationState;\n  gameStats: GameStats;\n}\n\nconst props = defineProps<Props>();\n\nconst emit = defineEmits<{\n  'generate-energy': [];\n  'process-data': [];\n  ascend: [];\n}>();\n\nconst dataGenerationProgress = computed(() => {\n  return props.generationState.dataGeneration?.progress ?? null;\n});\n\nconst dataButtonValue = computed(() => {\n  if (props.generationState.dataGeneration?.active) {\n    const dg = props.generationState.dataGeneration;\n    return `+${formatDataValue(dg.bitsPerTick)}B (${dg.energyCost}‚ö°)`;\n  }\n  return 'IDLE';\n});\n\nconst energyGenerationProgress = computed(() => {\n  return props.generationState.energyGeneration?.progress ?? null;\n});\n\nconst energyButtonValue = computed(() => {\n  if (props.generationState.energyGeneration?.active) {\n    return `+${formatNumber(props.generationState.energyGeneration.energyPerTick)}/s`;\n  }\n  return '+' + formatNumber(props.resourceStats.energyPerClick);\n});\n\nconst handleEnergyClick = () => {\n  if (props.generationState.isCrankBroken || props.generationState.isCrankAutomated) return;\n  emit('generate-energy');\n};\n\n</script>\n\n<template>\n  <aside id=\"sidebar\">\n    <div id=\"manual-actions\">\n      <div class=\"action-wrapper\" @click=\"handleEnergyClick\">\n        <CrankButton :value=\"energyButtonValue\" :broken=\"generationState.isCrankBroken\"\n          :automated=\"generationState.isCrankAutomated\" :progress=\"energyGenerationProgress\" />\n      </div>\n      <div v-if=\"gameStats.isDataUnlocked\" class=\"action-wrapper\">\n        <TerminalProgressButton label=\"data\" :value=\"dataButtonValue\" :progress=\"dataGenerationProgress\" />\n      </div>\n    </div>\n\n    <div id=\"stats\">\n      <h2>Statistics</h2>\n      <div class=\"stat\">\n        <span>Nodes Unlocked:</span>\n        <span>{{ resourceStats.stats.nodesUnlocked }}</span>\n      </div>\n      <div class=\"stat\">\n        <span>Total Energy:</span>\n        <span>{{ formatNumber(resourceStats.stats.totalEnergy) }}</span>\n      </div>\n      <div class=\"stat\">\n        <span>Total Data:</span>\n        <span>{{ formatDataValue(resourceStats.stats.totalData) }}</span>\n      </div>\n    </div>\n  </aside>\n</template>\n","<script setup lang=\"ts\">\nimport { computed } from 'vue';\nimport type { Node } from '@network-simulator/shared/types/node';\n\ninterface Props {\n  node: Node;\n  isUnlocked?: boolean;\n  isAvailable?: boolean;\n  isTierLocked?: boolean;\n  canAfford?: boolean;\n  isSelected?: boolean;\n  justUnlocked?: boolean;\n  progressPercent?: number;\n  nodeLevel?: number;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  isUnlocked: false,\n  isAvailable: false,\n  isTierLocked: false,\n  canAfford: false,\n  isSelected: false,\n  justUnlocked: false,\n  progressPercent: 0,\n  nodeLevel: 0,\n});\n\nconst emit = defineEmits<{\n  select: [nodeId: string];\n}>();\n\nconst maxLevel = computed(() => props.node.maxLevel || 1);\nconst showLevel = computed(() => maxLevel.value > 1);\n\nconst nodeClasses = computed(() => ({\n  node: true,\n  [`tier-${props.node.tier}`]: true,\n  unlocked: props.isUnlocked,\n  available: props.isAvailable && !props.isUnlocked && !props.isTierLocked,\n  affordable: props.canAfford && !props.isUnlocked && !props.isTierLocked,\n  'tier-locked': props.isTierLocked,\n  locked: !props.isUnlocked && (!props.isAvailable || props.isTierLocked),\n  selected: props.isSelected,\n  'just-unlocked': props.justUnlocked,\n  'max-level': props.nodeLevel >= maxLevel.value,\n}));\n\nconst nodeStyle = computed(() => ({\n  left: `${props.node.x}px`,\n  top: `${props.node.y}px`,\n}));\n\nconst tierColor = computed(() => {\n  const colors: Record<number, string> = {\n    0: '#00ffaa',\n    1: '#00aaff',\n    2: '#aa00ff',\n    3: '#ff00aa',\n    4: '#ffaa00',\n    5: '#ff5500',\n    6: '#00ffff',\n    7: '#ffffff',\n  };\n  return colors[props.node.tier] || '#00ffaa';\n});\n\nconst handleClick = () => {\n  emit('select', props.node.id);\n};\n</script>\n\n<template>\n  <div :class=\"nodeClasses\" :style=\"nodeStyle\" @click=\"handleClick\">\n    <div v-if=\"justUnlocked\" class=\"shockwave\" :style=\"{ borderColor: tierColor }\"></div>\n    <div v-if=\"justUnlocked\" class=\"shockwave shockwave-2\" :style=\"{ borderColor: tierColor }\"></div>\n    <span class=\"node-icon\">{{ node.icon }}</span>\n    <span class=\"node-name\">{{ node.name }}</span>\n    <span v-if=\"showLevel\" class=\"node-level\">{{ nodeLevel }}/{{ maxLevel }}</span>\n  </div>\n</template>\n","// Node Index - Combines all tier node files\n// ==========================================\n\nimport { core } from './core';\nimport { energyBranch } from './energyBranch';\nimport { computerBranch } from './computerBranch';\nimport type { NodeCollection } from '../../types/node';\n\n// Combine all node tiers into a single nodes object\nexport const allNodes: NodeCollection = {\n    ...core,\n    ...energyBranch,\n    ...computerBranch\n};\n","// Tier 0 Nodes - Core\n// ====================\n\nimport type { Node } from '../../types/node';\n\nexport const core: Record<string, Node> = {\n    old_shed: {\n        id: 'old_shed',\n        name: 'Old Shed',\n        icon: 'üè†',\n        tier: 0,\n        branch: null,\n        description: 'You just inherited this old shed from your grandfather. It looks abandoned, but maybe there\\'s something useful inside?',\n        requires: [],\n        cost: {},\n        effects: {\n            description: 'Starting node - unlocked by default'\n        }\n    }\n};\n","// Energy branch\n// Focuses on energy generation\n// ====================\n\nimport type { Node } from '../../types/node';\n\nexport const energyBranch: Record<string, Node> = {\n    // == Tier 1 Nodes ==\n    hand_crank: {\n        id: 'hand_crank',\n        name: 'Hand crank',\n        icon: 'üîß',\n        tier: 1,\n        branch: 'energy',\n        description: 'You find a simple hand crank. Why not give it a turn, whats the worst that could happen?.....',\n        requires: ['old_shed'],\n        cost: { energy: 0 },\n        effects: {\n            energyPerClick: 1,\n            description: '+1 Energy per crank'\n        }\n    },\n\n    // == Tier 2 Nodes ==\n    lubricant: {\n        id: 'lubricant',\n        name: 'Lubricant',\n        icon: 'üß¥',\n        tier: 2,\n        branch: 'energy',\n        description: 'The crank is a bit stiff, maybe some oil would help it turn more smoothly?',\n        requires: ['hand_crank'],\n        cost: { energy: 10 },\n        effects: {\n            energyPerClick: 1,\n            description: '+1 Energy per crank'\n        }\n    },\n\n    lightbulb: {\n        id: 'lightbulb',\n        name: 'Lightbulb',\n        icon: 'üí°',\n        tier: 2,\n        branch: 'energy',\n        description: 'Let there be light!',\n        requires: ['lubricant', 'hamster_wheel'],\n        cost: { energy: 50 },\n        effects: {\n            description: 'Can\\'t see in the dark? No problem, this lightbulb will help you out.'\n        }\n    },\n\n    hamster_wheel: {\n        id: 'hamster_wheel',\n        name: 'Hamster Wheel',\n        icon: 'üêπ',\n        tier: 2,\n        branch: 'energy',\n        description: ' My hamster Lucy loves running in this thing, and it generates energy too!',\n        requires: ['hand_crank'],\n        cost: { energy: 25 },\n        effects: {\n            automation: { resource: 'energy', rate: 0.5 },\n            description: '+0.5 Energy/second (passive)'\n        }\n    },\n    \n    attic: {\n        id: 'attic',\n        name: 'Explore Attic',\n        icon: 'üì¶',\n        tier: 2,\n        branch: 'energy',\n        description: 'Since we have light now, why not search grandpa\\'s attic for cool stuff?',\n        requires: ['lightbulb'],\n        cost: { energy: 100 },\n        effects: {\n            unlockBranch: 'computer'\n        }\n    },\n\n    // == Tier 3 Nodes ==\n    crank_harder: {\n        id: 'crank_harder',\n        name: 'Turn harder',\n        icon: 'üí™',\n        tier: 3,\n        branch: 'energy',\n        description: 'Why not put some muscle into it? Give that crank a good, hard turn!',\n        requires: ['lubricant'],\n        cost: { energy: 5 },\n        maxLevel: 10,\n        costScaling: 1.5,\n        effects: {\n            energyPerClick: 2,\n            description: '+2 Energy per crank',\n            levelEffects: {\n                10: {\n                    breakCrank: true\n                }\n            }\n        }\n    },\n\n    catch_rat: {\n        id: 'catch_rat',\n        name: 'Catch a rat',\n        icon: 'üêÄ',\n        tier: 3,\n        branch: 'energy',\n        description: 'There\\'s a rat running around in here, maybe we can train it to run in the wheel?',\n        requires: ['hamster_wheel'],\n        cost: { energy: 10 },\n        maxLevel: 5,\n        costScaling: 1.5,\n        effects: {\n            automation: { resource: 'energy', rate: 1 },\n            description: '+1 Energy/second per level (passive)'\n        }\n    },\n\n    old_generator: {\n        id: 'old_generator',\n        name: 'Old Generator',\n        icon: '‚öôÔ∏è',\n        tier: 3,\n        branch: 'energy',\n        description: 'In the back of the attic, you find an old generator that looks like it could still work. Maybe we can power it up?',\n        requires: ['attic'],\n        cost: { energy: 100, data: 50 },\n        effects: {\n            automation: { resource: 'energy', rate: 25 },\n            description: '+25 Energy/second (passive)'\n        }\n    },\n\n    rat_king: {\n        id: 'rat_king',\n        name: 'Rat king',\n        icon: 'üëë',\n        tier: 3,\n        branch: 'energy',\n        description: 'After catching a few rats, one of them seems to be the leader. Maybe if we catch it, the others will follow?',\n        requires: [{ id: 'catch_rat', level: 5 }],\n        cost: { energy: 100, data: 10 },\n        effects: {\n            automation: { resource: 'energy', rate: 10 },\n            description: '+10 Energy/second (passive)'\n        }\n    },\n\n    // == Tier 4 Nodes ==\n    \n    autocrank: {\n        id: 'autocrank',\n        name: 'AutoCrank',\n        icon: '‚öôÔ∏è',\n        tier: 4,\n        branch: 'energy',\n        description: 'TODO',\n        requires: [{ id: 'crank_harder', level: 10 }],\n        cost: { energy: 10, data: 100 },\n        effects: {\n            automateCrank: true,\n            description: 'Automatically crank the handle every second.'\n        }\n    }\n};\n","// Computer branch\n// Focuses on data processing and management.\n// ====================\n\nimport type { Node } from '../../types/node';\n\nexport const computerBranch: Record<string, Node> = {\n    // == Tier 1 Nodes ==\n    gpa_old_pc: {\n        id: 'gpa_old_pc',\n        name: 'Grandpa\\'s old PC',\n        icon: 'üíª',\n        tier: 1,\n        branch: 'computer',\n        description: 'An old computer left behind by your grandfather. Let\\'s boot it up and see what it can do!',\n        requires: ['old_shed'],\n        cost: { energy: 15 },\n        effects: {\n            description: 'Unlock computer systems and the Computer branch'\n        }\n    },\n\n    // == Tier 2 Nodes ==\n    command_help: {\n        id: 'command_help',\n        name: '/help',\n        icon: 'x',\n        tier: 2,\n        branch: 'computer',\n        description: 'A simple command that provides assistance. Maybe it can help you understand the computer better?',\n        requires: ['gpa_old_pc'],\n        cost: { energy: 30 },\n        effects: {\n            description: 'Display available commands'\n        }\n    },\n\n    command_generate: {\n        id: 'command_generate',\n        name: '/generate',\n        icon: 'üìä',\n        tier: 2,\n        branch: 'computer',\n        description: 'A command to process raw data and extract useful information. This could be valuable for your operations.',\n        requires: ['command_help'],\n        cost: { energy: 50 },\n        effects: {\n            unlockDataGeneration: true,\n            unlockDataProcessing: true,\n            description: 'Unlock data processing capabilities'\n        }\n    },\n\n    // == Tier 3 Nodes ==\n    ram_adjustment: {\n        id: 'ram_adjustment',\n        name: 'RAM Adjustment',\n        icon: 'üß†',\n        tier: 3,\n        branch: 'computer',\n        description: 'A ram stick is loose, better adjust it to improve processing speed.',\n        requires: ['command_generate'],\n        cost: { energy: 40, data: 10 },\n        maxLevel: 4,\n        costScaling: 1.5,\n        effects: {\n            dataGenSpeedMultiplier: 1.5,\n            description: 'Data generates 50% faster'\n        }\n    },\n\n    usb_stick: {\n        id: 'usb_stick',\n        name: 'USB Stick',\n        icon: 'üìÄ',\n        tier: 3,\n        branch: 'computer',\n        description: 'You remember this old USB stick you had in your pocket. Because who doesn\\'t carry around a USB stick in 2025? Let\\'s plug it in to increase our data storage capacity.',\n        requires: ['command_generate'],\n        cost: { energy: 60, data: 1028 },\n        effects: {\n            maxDataCapacityBonus: 1028 * 16,\n            description: 'Increase max data capacity by 16 KB'\n        }\n    },\n\n    overclock: {\n        id: 'overclock',\n        name: 'Overclock',\n        icon: '‚ö°',\n        tier: 3,\n        branch: 'computer',\n        description: 'When building your own gaming rig, you always overclocked the CPU for that extra performance boost. Let\\'s do it here too!',\n        requires: ['command_generate'],\n        cost: { energy: 40, data: 5 },\n        maxLevel: 10,\n        costScaling: 1.5,\n        effects: {\n            dataGenAmountBonus: 1,\n            description: 'Generate +1 additional bit of data per tick'\n        }\n    }\n};\n","// Game Constants\n// ===============\n\nimport type { ResourceId } from '../types/game';\n\n/**\n * Branch unlock order and tier mapping\n */\nexport const BRANCH_UNLOCK_ORDER: readonly string[] = [\n    'energy',\n    'computer'\n] as const;\n\n/**\n * Cost multipliers per tier - exponential scaling\n */\nexport const TIER_COST_MULTIPLIERS: Record<number, number> = {\n    0: 1,      \n    1: 1,      \n    2: 10,     \n    3: 100,     \n    4: 1_000,    \n    5: 10_000,   \n    6: 100_000,  \n    7: 1_000_000, \n    8: 10_000_000 \n} as const;\n\nexport const COST_SHIFT_FOR_RESOURCE: Record<ResourceId, number> = {\n    energy: 1,\n    data: 2\n} as const;\n\n/**\n * Timing constants for game loop and saves\n */\nexport const GAME_LOOP_INTERVAL_MS = 100;       // 10 ticks per second\nexport const AUTOSAVE_INTERVAL_MS = 30_000;     // Save every 30 seconds\nexport const MAX_OFFLINE_TIME_S = 86_400;       // 24 hours max offline progress\n\n/**\n * Layout configuration for skill tree positioning\n */\nexport const LAYOUT_CONFIG = Object.freeze({\n    CENTER_X: 1400,\n    CENTER_Y: 1400,\n    TIER_SPACING: 180,\n    SAME_TIER_OFFSET: 60,\n    NODE_SPACING: 100,\n    NODE_SIZE: 80\n});\n","// Resource Definitions\n// ====================\n\nimport type { Resource, ResourceId } from '../types/game';\n\n/**\n * Available resources in the game\n */\nexport const RESOURCES: Record<ResourceId, Resource> = {\n    energy: {\n        id: 'energy',\n        name: 'Energy',\n        icon: '‚ö°',\n        color: '#00ffaa'\n    },\n    data: {\n        id: 'data',\n        name: 'Data',\n        icon: 'üìä',\n        color: '#00aaff'\n    }\n} as const;\n","// Configuration\n// ===============\n\n/**\n * Feature flags for controlling experimental or optional features\n */\nexport const FEATURE_FLAGS = {\n    DOTS_TO_AVAILABLE_NODES: false, // Show gray dots traveling to available (locked) nodes\n};\n\n/**\n * Ascension cost scaling multiplier\n * Each ascension increases costs by this factor (compounded)\n * Example: 1.5 means 50% increase per ascension\n */\nexport const ASCENSION_COST_MULTIPLIER = 1.5;\n","// Node Utilities\n// ===============\n\nimport type { Node, NodeRequirement, NodeCost } from '../types/node';\nimport { TIER_COST_MULTIPLIERS, COST_SHIFT_FOR_RESOURCE } from '../data/constants';\nimport { ASCENSION_COST_MULTIPLIER } from '../data/config';\n\n/**\n * Extract node ID from requirement (handles both string and object forms)\n */\nfunction getReqId(req: NodeRequirement): string {\n    return typeof req === 'string' ? req : req.id;\n}\n\n/**\n * Check if a node is fully defined (has position and ID)\n * @param node Node to check\n * @return true if node is defined\n */\nexport function isNodeDefined(node: Node | undefined): boolean {\n    return node !== undefined && node.id !== '' && node.x !== undefined && node.y !== undefined;\n}\n\n/**\n * Check if a single requirement is met\n */\nexport function checkRequirementMet(\n    req: NodeRequirement,\n    unlockedNodes: Set<string>,\n    nodeLevels: Record<string, number>\n): boolean {\n    const id = getReqId(req);\n    if (!unlockedNodes.has(id)) return false;\n    if (typeof req === 'string') return true;\n    const nodeLevel = nodeLevels?.[id] || 1;\n    return nodeLevel >= (req.level || 1);\n}\n\n/**\n * Get tier multiplier for a resource, shifted by COST_SHIFT_FOR_RESOURCE\n * e.g. data at tier 3 with shift 2 => uses multiplier for tier 1\n */\nfunction getTierMultiplierForResource(tier: number, resource: string): number {\n    const shift = (COST_SHIFT_FOR_RESOURCE as Record<string, number>)[resource] || 0;\n    const effectiveTier = Math.max(0, tier - shift);\n    return TIER_COST_MULTIPLIERS[effectiveTier] || 1;\n}\n\n/**\n * Options for cost scaling calculation\n */\nexport interface ScaledCostOptions {\n    ascensionCount?: number;\n    prestigeBonuses?: {\n        costMultiplier?: number;\n        tierCostMultipliers?: Record<number, number>;\n    } | null;\n    currentLevel?: number;\n}\n\n/**\n * Get the cost of a node scaled by its tier multiplier, ascension count, prestige bonuses, and level\n */\nexport function getScaledNodeCost(node: Node, options: ScaledCostOptions = {}): NodeCost {\n    const { ascensionCount = 0, prestigeBonuses = null, currentLevel = 0 } = options;\n    const baseCost = node.cost;\n    \n    // Ascension scaling: each ascension increases costs by ASCENSION_COST_MULTIPLIER (compounds)\n    const ascensionMultiplier = Math.pow(ASCENSION_COST_MULTIPLIER, ascensionCount);\n    \n    // Level scaling: apply costScaling multiplier for each level above 0\n    const costScaling = node.costScaling || 1;\n    const levelMultiplier = currentLevel > 0 ? Math.pow(costScaling, currentLevel) : 1;\n    \n    // Prestige cost reduction\n    let costReduction = 1;\n    if (prestigeBonuses) {\n        // Apply general cost multiplier\n        if (prestigeBonuses.costMultiplier) {\n            costReduction *= prestigeBonuses.costMultiplier;\n        }\n        // Apply tier-specific cost multipliers\n        if (prestigeBonuses.tierCostMultipliers && prestigeBonuses.tierCostMultipliers[node.tier]) {\n            costReduction *= prestigeBonuses.tierCostMultipliers[node.tier];\n        }\n    }\n    \n    const scaled: NodeCost = {};\n    for (const [resource, amount] of Object.entries(baseCost)) {\n        const tierMultiplier = getTierMultiplierForResource(node.tier, resource);\n        const finalCost = amount * tierMultiplier * ascensionMultiplier * levelMultiplier * costReduction;\n        scaled[resource as keyof NodeCost] = Math.floor(finalCost);\n    }\n    return scaled;\n}\n\n/**\n * Count how many nodes of a specific tier are unlocked\n */\nexport function countUnlockedInTier(\n    tier: number,\n    unlockedNodeIds: Set<string>,\n    nodesData: Record<string, Node>\n): number {\n    let count = 0;\n    unlockedNodeIds.forEach(id => {\n        const node = nodesData[id];\n        if (node && node.tier === tier) {\n            count++;\n        }\n    });\n    return count;\n}\n\n/**\n * Check if a tier is unlocked (always returns true now - tier gates removed)\n */\nexport function isTierUnlocked(): boolean {\n    return true;\n}\n\n/**\n * Connection definition for rendering lines between nodes\n */\nexport interface NodeConnection {\n    from: string;\n    to: string;\n    x1: number;\n    y1: number;\n    x2: number;\n    y2: number;\n}\n\n/**\n * Get all connections between nodes for rendering\n */\nexport function getConnections(nodesData: Record<string, Node>): NodeConnection[] {\n    const connections: NodeConnection[] = [];\n    Object.values(nodesData).forEach(node => {\n        node.requires.forEach(req => {\n            const reqId = getReqId(req);\n            const reqNode = nodesData[reqId];\n            if (reqNode) {\n                if (reqNode.isTierGate || node.branch !== reqNode.branch) {\n                    return;\n                }\n                \n                connections.push({\n                    from: reqId,\n                    to: node.id,\n                    x1: (reqNode.x || 0) + 40,\n                    y1: (reqNode.y || 0) + 40,\n                    x2: (node.x || 0) + 40,\n                    y2: (node.y || 0) + 40\n                });\n            }\n        });\n    });\n    return connections;\n}\n","// Game Data Module - Re-exports from /data and /utils\n// ===================================================\n// Source of truth is now in:\n// - src/data/nodes/ - All 70 game nodes\n// - src/data/constants.ts - Game constants\n// - src/data/resources.ts - Resource definitions\n// - src/data/config.ts - Feature flags\n// - src/utils/nodeUtils.ts - Helper functions\n// This file provides backward compatibility by re-exporting everything as GameData\n\nimport { allNodes } from '@network-simulator/shared/data/nodes';\nimport { TIER_COST_MULTIPLIERS, BRANCH_UNLOCK_ORDER } from '@network-simulator/shared/data/constants';\nimport { RESOURCES } from '@network-simulator/shared/data/resources';\nimport { FEATURE_FLAGS } from '@network-simulator/shared/data/config';\nimport type { Node, NodeCost, NodeRequirement } from '@network-simulator/shared/types';\nimport { \n    getScaledNodeCost as getScaledNodeCostUtil,\n    countUnlockedInTier as countUnlockedInTierUtil,\n    isTierUnlocked as isTierUnlockedUtil,\n    getConnections as getConnectionsUtil,\n    checkRequirementMet as checkRequirementMetUtil,\n    type ScaledCostOptions,\n    type NodeConnection\n} from '@network-simulator/shared/utils/nodeUtils';\n\nclass GameDataClass {\n    // Configuration\n    readonly FEATURE_FLAGS = FEATURE_FLAGS;\n    readonly TIER_COST_MULTIPLIERS = TIER_COST_MULTIPLIERS;\n    readonly BRANCH_UNLOCK_ORDER = BRANCH_UNLOCK_ORDER;\n    \n    // Data\n    readonly resources = RESOURCES;\n    readonly nodes = allNodes;\n    \n    /**\n     * Get the cost of a node scaled by tier, ascension, prestige bonuses, and level\n     */\n    getScaledNodeCost(node: Node, options: ScaledCostOptions = {}): NodeCost {\n        return getScaledNodeCostUtil(node, options);\n    }\n    \n    /**\n     * Count how many nodes of a specific tier are unlocked\n     */\n    countUnlockedInTier(tier: number, unlockedNodeIds: Set<string>): number {\n        return countUnlockedInTierUtil(Number(tier), unlockedNodeIds, this.nodes);\n    }\n    \n    /**\n     * Check if a tier is unlocked\n     */\n    isTierUnlocked(_tier: number, _unlockedNodeIds: Set<string>): boolean {\n        return isTierUnlockedUtil();\n    }\n    \n    /**\n     * Get all connections between nodes for rendering\n     */\n    getConnections(): NodeConnection[] {\n        return getConnectionsUtil(this.nodes);\n    }\n    \n    /**\n     * Check if a single requirement is met\n     */\n    checkRequirementMet(\n        req: NodeRequirement,\n        unlockedNodes: Set<string>,\n        nodeLevels: Record<string, number>\n    ): boolean {\n        return checkRequirementMetUtil(req, unlockedNodes, nodeLevels);\n    }\n}\n\n// Create singleton instance\nconst GameData = new GameDataClass();\n\n// Export as default\nexport default GameData;\n\n// Also export the class for typing purposes\nexport type { GameDataClass };\n","// useNodeValidation Composable\n// =============================\n// Extracted validation logic from SkillTree for reusability and testability\n\nimport type { Node } from '@network-simulator/shared/types/node';\nimport type { ResourceAmounts } from '@network-simulator/shared/types/game';\nimport type { UseGameStateReturn } from './useGameState';\nimport type { UsePrestigeStateReturn } from './usePrestigeState';\nimport GameData from '@/core/gameData';\n\n/**\n * Options for cost calculation\n */\ninterface CostOptions {\n    ascensionCount: number;\n    prestigeBonuses: any;\n}\n\n// ==========================================\n// PURE VALIDATION FUNCTIONS (for Options API or direct use)\n// ==========================================\n\n/**\n * Check if a node is available for unlocking\n * @param node - The node to check\n * @param unlockedNodes - Set of unlocked node IDs\n * @param nodeLevels - Map of node ID to level\n * @returns True if node is available\n */\nexport function checkNodeAvailable(\n    node: Node | null,\n    unlockedNodes: Set<string>,\n    nodeLevels: Record<string, number>\n): boolean {\n    if (!node) return false;\n    if (unlockedNodes.has(node.id)) return false;\n    if (!node.requires || !Array.isArray(node.requires)) return true;\n    \n    return node.requires.every(req => \n        GameData.checkRequirementMet(req, unlockedNodes, nodeLevels)\n    );\n}\n\n/**\n * Check if player can afford a node's cost\n * @param node - The node to check\n * @param resources - Current resources\n * @param options - Options for cost calculation\n * @param unlockedNodes - Set of unlocked node IDs\n * @param nodeLevels - Map of node ID to level\n * @returns True if player can afford it\n */\nexport function checkCanAffordNode(\n    node: Node | null,\n    resources: ResourceAmounts,\n    options: CostOptions,\n    unlockedNodes: Set<string>,\n    nodeLevels: Record<string, number>\n): boolean {\n    if (!node || !checkNodeAvailable(node, unlockedNodes, nodeLevels)) return false;\n    \n    const scaledCost = GameData.getScaledNodeCost(node, options);\n    \n        for (const [resource, amount] of Object.entries(scaledCost)) {\n        if ((resources[resource as keyof ResourceAmounts] ?? 0) < (amount as number)) return false;\n    }\n    return true;\n}\n\n/**\n * Check if a tier is locked for a node\n * @param node - The node to check\n * @param unlockedNodes - Set of unlocked node IDs\n * @returns True if tier is locked\n */\nexport function checkTierLocked(node: Node | null, unlockedNodes: Set<string>): boolean {\n    if (!node) return true;\n    return !GameData.isTierUnlocked(node.tier, unlockedNodes);\n}\n\n/**\n * Check if a node is visible (should be rendered)\n * @param node - The node to check\n * @param unlockedNodes - Set of unlocked node IDs\n * @param unlockedBranches - Set of unlocked branch names\n * @param nodeLevels - Map of node ID to level\n * @returns True if node should be visible\n */\nexport function checkNodeVisible(\n    node: Node | null,\n    unlockedNodes: Set<string>,\n    unlockedBranches: Set<string>,\n    nodeLevels: Record<string, number>\n): boolean {\n    if (!node) return false;\n    \n    // Tier gate nodes are visible even if branch isn't unlocked (they unlock the branch)\n    if (!node.isTierGate) {\n        // TODO: Import isBranchUnlocked from @/utils/branchUtils once migrated in Phase 6\n        // For now, simple check\n        if (node.branch && !unlockedBranches.has(node.branch)) {\n            return false;\n        }\n    }\n    \n    return unlockedNodes.has(node.id) || checkNodeAvailable(node, unlockedNodes, nodeLevels);\n}\n\n// ==========================================\n// COMPOSABLE (for Composition API components)\n// ==========================================\n\n/**\n * Return type for useNodeValidation composable\n */\nexport interface UseNodeValidationReturn {\n    isNodeAvailable: (node: Node | null) => boolean;\n    canAffordNode: (node: Node | null) => boolean;\n    isNodeUnlocked: (nodeId: string) => boolean;\n    isTierLocked: (node: Node | null) => boolean;\n    isNodeVisible: (node: Node | null) => boolean;\n}\n\n/**\n * Provides node validation utilities as reactive composable\n * @param gameState - Game state from useGameState\n * @param prestigeState - Prestige state from usePrestigeState\n * @returns Validation methods\n */\nexport function useNodeValidation(\n    gameState: UseGameStateReturn,\n    prestigeState?: UsePrestigeStateReturn\n): UseNodeValidationReturn {\n    function isNodeAvailable(node: Node | null): boolean {\n        return checkNodeAvailable(node, gameState.unlockedNodes.value, gameState.nodeLevels);\n    }\n\n    function canAffordNode(node: Node | null): boolean {\n        return checkCanAffordNode(\n            node,\n            gameState.resources,\n            {\n                ascensionCount: prestigeState?.prestigeState?.ascensionCount ?? 0,\n                prestigeBonuses: prestigeState?.prestigeBonuses?.value ?? null\n            },\n            gameState.unlockedNodes.value,\n            gameState.nodeLevels\n        );\n    }\n\n    function isNodeUnlocked(nodeId: string): boolean {\n        return gameState.unlockedNodes.value.has(nodeId);\n    }\n\n    function isTierLocked(node: Node | null): boolean {\n        return checkTierLocked(node, gameState.unlockedNodes.value);\n    }\n\n    function isNodeVisible(node: Node | null): boolean {\n        return checkNodeVisible(\n            node,\n            gameState.unlockedNodes.value,\n            gameState.unlockedBranches.value,\n            gameState.nodeLevels\n        );\n    }\n\n    return {\n        isNodeAvailable,\n        canAffordNode,\n        isNodeUnlocked,\n        isTierLocked,\n        isNodeVisible\n    };\n}\n","<script setup lang=\"ts\">\nimport { ref, computed, watch, onMounted, onBeforeUnmount, nextTick } from 'vue';\nimport SkillNode from './SkillNode.vue';\nimport type { Node } from '@network-simulator/shared/types/node';\nimport { checkNodeAvailable, checkCanAffordNode, checkTierLocked, checkNodeVisible } from '@/composables/useNodeValidation';\nimport GameData from '@/core/gameData';\nimport { ResourceAmounts } from '@network-simulator/shared/types';\nimport { isNodeDefined } from '@network-simulator/shared/utils/nodeUtils';\n\ninterface Props {\n  nodes: Record<string, Node>;\n  unlockedNodes: Set<string>;\n  unlockedBranches: Set<string>;\n  selectedNodeId: string | null;\n  resources: ResourceAmounts;\n  ascensionCount?: number;\n  prestigeBonuses: Record<string, unknown> | null;\n  lastUnlockedNodeId: string | null;\n  nodeLevels?: Record<string, number>;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  ascensionCount: 0,\n  nodeLevels: () => ({}),\n});\n\nconst emit = defineEmits<{\n  'select-node': [nodeId: string];\n}>();\n\ninterface TravelingDot {\n  id: string;\n  fromNode: string;\n  toNode: string;\n  progress: number;\n  startTime: number;\n  toUnlocked: boolean;\n}\n\nconst justUnlockedNodeId = ref<string | null>(null);\nconst animatingConnections = ref<Set<string>>(new Set());\nconst glowingConnections = ref<Map<string, number>>(new Map());\nconst travelingDots = ref<TravelingDot[]>([]);\nconst nodeProgress = ref<Map<string, number>>(new Map());\n\n// Zoom state\nconst zoomLevel = ref(1);\nconst minZoom = 0.25;\nconst maxZoom = 2;\nconst zoomStep = 0.05;\n\nconst container = ref<HTMLElement | null>(null);\nlet glowAnimationFrame: number | null = null;\nlet dotAnimationFrame: number | null = null;\nlet dotInterval: number | null = null;\n\nwatch(\n  () => props.lastUnlockedNodeId,\n  (newId) => {\n    if (newId) {\n      triggerUnlockAnimation(newId);\n      nodeProgress.value.delete(newId);\n    }\n  }\n);\n\nconst connections = computed(() => {\n  return GameData.getConnections().filter(\n    (conn: any) =>\n      isNodeVisible(props.nodes[conn.from]) && isNodeVisible(props.nodes[conn.to])\n  );\n});\n\nconst nodesList = computed(() => {\n  return Object.values(props.nodes).filter((node) => isNodeVisible(node));\n});\n\nconst isUnlocked = (nodeId: string): boolean => {\n  return props.unlockedNodes.has(nodeId);\n};\n\nconst isAvailable = (node: Node): boolean => {\n  return checkNodeAvailable(node, props.unlockedNodes, props.nodeLevels);\n};\n\nconst canAfford = (node: Node): boolean => {\n  return checkCanAffordNode(\n    node,\n    props.resources,\n    { ascensionCount: props.ascensionCount, prestigeBonuses: props.prestigeBonuses },\n    props.unlockedNodes,\n    props.nodeLevels\n  );\n};\n\nconst isTierLocked = (node: Node): boolean => {\n  return checkTierLocked(node, props.unlockedNodes);\n};\n\nconst isNodeVisible = (node: Node): boolean => {\n  return checkNodeVisible(node, props.unlockedNodes, props.unlockedBranches, props.nodeLevels);\n};\n\nconst isConnectionUnlocked = (connection: any): boolean => {\n  return isUnlocked(connection.from) && isUnlocked(connection.to);\n};\n\nconst selectNode = (nodeId: string) => {\n  emit('select-node', nodeId);\n};\n\nconst triggerUnlockAnimation = (nodeId: string) => {\n  justUnlockedNodeId.value = nodeId;\n\n  const node = props.nodes[nodeId];\n  if (node?.requires) {\n    node.requires.forEach((req) => {\n      const parentId = typeof req === 'string' ? req : req.id;\n      const connKey = `${parentId}-${nodeId}`;\n      animatingConnections.value.add(connKey);\n\n      setTimeout(() => {\n        animatingConnections.value.delete(connKey);\n      }, 800);\n    });\n  }\n\n  setTimeout(() => {\n    justUnlockedNodeId.value = null;\n  }, 1000);\n};\n\nconst isConnectionAnimating = (conn: any): boolean => {\n  if (!conn?.from || !conn?.to) return false;\n  const key = `${conn.from}-${conn.to}`;\n  return animatingConnections.value.has(key);\n};\n\nconst getConnectionGradientId = (conn: any): string => {\n  if (!conn) return '';\n  return `pulse-gradient-${conn.from}-${conn.to}`;\n};\n\nconst getAnimatingConnections = () => {\n  return connections.value.filter((conn) => isConnectionAnimating(conn));\n};\n\nconst startGlowAnimation = () => {\n  let time = 0;\n  const animate = () => {\n    time += 0.01;\n    connections.value.forEach((conn, index) => {\n      if (isConnectionUnlocked(conn)) {\n        const offset = (time + index * 0.3) % 1;\n        glowingConnections.value.set(`${conn.from}-${conn.to}`, offset);\n      }\n    });\n    glowAnimationFrame = requestAnimationFrame(animate);\n  };\n  animate();\n};\n\nconst getGlowOffset = (conn: any): number => {\n  return glowingConnections.value.get(`${conn.from}-${conn.to}`) || 0;\n};\n\nconst getGlowGradientId = (conn: any): string => {\n  return `glow-gradient-${conn.from}-${conn.to}`;\n};\n\nconst startDotAnimation = () => {\n  dotInterval = window.setInterval(() => {\n    spawnDotsFromCore();\n  }, 3000);\n\n  const animate = () => {\n    const now = Date.now();\n    const dotSpeed = 0.5;\n\n    const dotsToSpawn: string[] = [];\n    travelingDots.value.forEach((dot) => {\n      const elapsed = (now - dot.startTime) / 1000;\n      dot.progress = Math.min(elapsed * dotSpeed, 1);\n\n      if (dot.progress >= 1) {\n        const toNode = props.nodes[dot.toNode];\n\n        if (toNode && isAvailable(toNode)) {\n          const currentProgress = nodeProgress.value.get(dot.toNode) || 0;\n          const scaledCost = GameData.getScaledNodeCost(toNode, {\n            ascensionCount: props.ascensionCount,\n            prestigeBonuses: props.prestigeBonuses,\n          });\n          const totalCost = Object.values(scaledCost).reduce((sum: number, cost: any) => sum + cost, 0);\n          const progressIncrement = totalCost * 0.01;\n          nodeProgress.value.set(dot.toNode, currentProgress + progressIncrement);\n        }\n\n        if (isUnlocked(dot.toNode)) {\n          dotsToSpawn.push(dot.toNode);\n        }\n      }\n    });\n\n    dotsToSpawn.forEach((nodeId) => {\n      spawnDotsFromNode(nodeId);\n    });\n\n    travelingDots.value = travelingDots.value.filter((dot) => dot.progress < 1);\n\n    dotAnimationFrame = requestAnimationFrame(animate);\n  };\n  animate();\n};\n\nconst spawnDotsFromCore = () => {\n  const coreConnections = connections.value.filter((conn: any) => {\n    if (conn.from !== 'old_shed') return false;\n    if (isUnlocked(conn.to)) return true;\n    return GameData.FEATURE_FLAGS.DOTS_TO_AVAILABLE_NODES && isAvailable(props.nodes[conn.to]);\n  });\n\n  coreConnections.forEach((conn: any) => {\n    travelingDots.value.push({\n      id: `${Date.now()}-${Math.random()}`,\n      fromNode: conn.from,\n      toNode: conn.to,\n      progress: 0,\n      startTime: Date.now(),\n      toUnlocked: isUnlocked(conn.to),\n    });\n  });\n};\n\nconst spawnDotsFromNode = (nodeId: string) => {\n  const outgoingConnections = connections.value.filter((conn: any) => {\n    if (conn.from !== nodeId) return false;\n    if (!isUnlocked(conn.from)) return false;\n    if (isUnlocked(conn.to)) return true;\n    return GameData.FEATURE_FLAGS.DOTS_TO_AVAILABLE_NODES && isAvailable(props.nodes[conn.to]);\n  });\n\n  const now = Date.now();\n  outgoingConnections.forEach((conn: any, index: number) => {\n    travelingDots.value.push({\n      id: `${now}-${Math.random()}-${index}`,\n      fromNode: conn.from,\n      toNode: conn.to,\n      progress: 0,\n      startTime: now,\n      toUnlocked: isUnlocked(conn.to),\n    });\n  });\n};\n\nconst getDotPosition = (dot: TravelingDot) => {\n  const fromNode = props.nodes[dot.fromNode];\n  const toNode = props.nodes[dot.toNode];\n\n  if (!isNodeDefined(fromNode) || !isNodeDefined(toNode)) return { x: 0, y: 0 };\n\n  const x = fromNode.x! + (toNode.x! - fromNode.x!) * dot.progress + 40;\n  const y = fromNode.y! + (toNode.y! - fromNode.y!) * dot.progress + 40;\n  return { x, y };\n};\n\nconst getNodeProgressPercent = (nodeId: string): number => {\n  const node = props.nodes[nodeId];\n  if (!node || !isAvailable(node)) return 0;\n\n  const currentProgress = nodeProgress.value.get(nodeId) || 0;\n  const scaledCost = GameData.getScaledNodeCost(node, {\n    ascensionCount: props.ascensionCount,\n    prestigeBonuses: props.prestigeBonuses,\n  });\n  const totalCost = Object.values(scaledCost).reduce((sum: number, cost: any) => sum + cost, 0);\n\n  return Math.min((currentProgress / totalCost) * 100, 100);\n};\n\nconst handleWheel = (event: WheelEvent) => {\n  if (event.ctrlKey) {\n    event.preventDefault();\n    const delta = -event.deltaY * 0.01;\n    setZoom(zoomLevel.value + delta, event);\n  }\n};\n\nconst setZoom = (newZoom: number, event: WheelEvent | null = null) => {\n  const oldZoom = zoomLevel.value;\n  zoomLevel.value = Math.max(minZoom, Math.min(maxZoom, newZoom));\n\n  if (event && container.value) {\n    const rect = container.value.getBoundingClientRect();\n    const cursorX = event.clientX - rect.left;\n    const cursorY = event.clientY - rect.top;\n\n    const scrollX = container.value.scrollLeft;\n    const scrollY = container.value.scrollTop;\n\n    const scale = zoomLevel.value / oldZoom;\n    container.value.scrollLeft = (scrollX + cursorX) * scale - cursorX;\n    container.value.scrollTop = (scrollY + cursorY) * scale - cursorY;\n  }\n};\n\nconst zoomIn = () => {\n  setZoom(zoomLevel.value + zoomStep);\n};\n\nconst zoomOut = () => {\n  setZoom(zoomLevel.value - zoomStep);\n};\n\nconst resetZoom = () => {\n  zoomLevel.value = 1;\n  nextTick(() => {\n    const coreNode = props.nodes.old_shed;\n    if (container.value && isNodeDefined(coreNode)) {\n      container.value.scrollLeft = coreNode.x! - container.value.clientWidth / 2 + 40;\n      container.value.scrollTop = coreNode.y! - container.value.clientHeight / 2 + 40;\n    }\n  });\n};\n\nonMounted(() => {\n  startGlowAnimation();\n  startDotAnimation();\n\n  nextTick(() => {\n    const coreNode = props.nodes.old_shed;\n    if (container.value && isNodeDefined(coreNode)) {\n      container.value.scrollLeft = coreNode.x! - container.value.clientWidth / 2 + 40;\n      container.value.scrollTop = coreNode.y! - container.value.clientHeight / 2 + 40;\n    }\n  });\n});\n\nonBeforeUnmount(() => {\n  if (glowAnimationFrame) {\n    cancelAnimationFrame(glowAnimationFrame);\n  }\n  if (dotAnimationFrame) {\n    cancelAnimationFrame(dotAnimationFrame);\n  }\n  if (dotInterval) {\n    clearInterval(dotInterval);\n  }\n});\n</script>\n\n<template>\n  <section id=\"skill-tree-container\" @wheel=\"handleWheel\">\n    <div class=\"zoom-controls\">\n      <button @click=\"zoomIn\" title=\"Zoom In\">+</button>\n      <span class=\"zoom-level\">{{ Math.round(zoomLevel * 100) }}%</span>\n      <button @click=\"zoomOut\" title=\"Zoom Out\">‚àí</button>\n      <button @click=\"resetZoom\" title=\"Reset Zoom\">‚ü≤</button>\n    </div>\n    <div id=\"skill-tree-wrapper\" ref=\"container\">\n      <div id=\"skill-tree\" :style=\"{ transform: 'scale(' + zoomLevel + ')', transformOrigin: '0 0' }\">\n        <svg id=\"connections\">\n          <defs>\n            <!-- Glow gradients for flowing effect -->\n            <template v-for=\"conn in connections\" :key=\"'glow-template-' + conn.from + '-' + conn.to\">\n              <linearGradient v-if=\"isConnectionUnlocked(conn)\" :id=\"getGlowGradientId(conn)\"\n                gradientUnits=\"userSpaceOnUse\" :x1=\"conn.x1\" :y1=\"conn.y1\" :x2=\"conn.x2\" :y2=\"conn.y2\">\n                <stop :offset=\"Math.max(0, getGlowOffset(conn) - 0.1)\" stop-color=\"rgba(0, 255, 170, 0)\" />\n                <stop :offset=\"getGlowOffset(conn)\" stop-color=\"rgba(0, 255, 255, 0.8)\" />\n                <stop :offset=\"Math.min(1, getGlowOffset(conn) + 0.1)\" stop-color=\"rgba(0, 255, 170, 0)\" />\n              </linearGradient>\n            </template>\n\n            <!-- Pulse gradients for unlock animation -->\n            <linearGradient v-for=\"conn in connections\" :key=\"'grad-' + conn.from + '-' + conn.to\"\n              :id=\"getConnectionGradientId(conn)\" gradientUnits=\"userSpaceOnUse\" :x1=\"conn.x1\" :y1=\"conn.y1\"\n              :x2=\"conn.x2\" :y2=\"conn.y2\">\n              <stop offset=\"0%\" stop-color=\"#00ffaa\" stop-opacity=\"0\">\n                <animate v-if=\"isConnectionAnimating(conn)\" attributeName=\"offset\" values=\"0;1\" dur=\"0.6s\"\n                  fill=\"freeze\" />\n              </stop>\n              <stop offset=\"0%\" stop-color=\"#ffffff\" stop-opacity=\"1\">\n                <animate v-if=\"isConnectionAnimating(conn)\" attributeName=\"offset\" values=\"0;1\" dur=\"0.6s\"\n                  fill=\"freeze\" />\n              </stop>\n              <stop offset=\"10%\" stop-color=\"#00ffaa\" stop-opacity=\"0\">\n                <animate v-if=\"isConnectionAnimating(conn)\" attributeName=\"offset\" values=\"0.1;1.1\" dur=\"0.6s\"\n                  fill=\"freeze\" />\n              </stop>\n            </linearGradient>\n          </defs>\n\n          <!-- Base connection lines -->\n          <line v-for=\"(conn, index) in connections\" :key=\"index\" :x1=\"conn.x1\" :y1=\"conn.y1\" :x2=\"conn.x2\"\n            :y2=\"conn.y2\" :class=\"{ unlocked: isConnectionUnlocked(conn), animating: isConnectionAnimating(conn) }\" />\n\n          <!-- Flowing glow overlay for unlocked connections -->\n          <template v-for=\"conn in connections\" :key=\"'glow-line-' + conn.from + '-' + conn.to\">\n            <line v-if=\"isConnectionUnlocked(conn) && !isConnectionAnimating(conn)\" :x1=\"conn.x1\" :y1=\"conn.y1\"\n              :x2=\"conn.x2\" :y2=\"conn.y2\" class=\"connection-glow\" :stroke=\"'url(#' + getGlowGradientId(conn) + ')'\" />\n          </template>\n          <line v-for=\"conn in getAnimatingConnections()\" :key=\"'pulse-' + conn.from + '-' + conn.to\" :x1=\"conn.x1\"\n            :y1=\"conn.y1\" :x2=\"conn.x2\" :y2=\"conn.y2\" class=\"connection-pulse\"\n            :stroke=\"'url(#' + getConnectionGradientId(conn) + ')'\" />\n        </svg>\n\n        <!-- Traveling dots -->\n        <div v-for=\"dot in travelingDots\" :key=\"dot.id\" :class=\"['traveling-dot', { 'to-locked': !dot.toUnlocked }]\"\n          :style=\"{\n            left: getDotPosition(dot).x + 'px',\n            top: getDotPosition(dot).y + 'px',\n          }\"></div>\n\n        <div id=\"nodes\">\n          <SkillNode v-for=\"node in nodesList\" :key=\"node.id\" :node=\"node\" :is-unlocked=\"isUnlocked(node.id)\"\n            :is-available=\"isAvailable(node)\" :is-tier-locked=\"isTierLocked(node)\" :can-afford=\"canAfford(node)\"\n            :is-selected=\"selectedNodeId === node.id\" :just-unlocked=\"justUnlockedNodeId === node.id\"\n            :progress-percent=\"getNodeProgressPercent(node.id)\" :node-level=\"nodeLevels[node.id] || 0\"\n            @select=\"selectNode\" />\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n","<script setup lang=\"ts\">\nimport { computed } from 'vue';\nimport { formatNumber } from '@network-simulator/shared/utils/formatUtils';\nimport type { Node } from '@network-simulator/shared/types/node';\nimport GameData from '@/core/gameData';\n\ninterface TierGate {\n  requiredTier: number;\n  remaining: number;\n}\n\ninterface Requirement {\n  id: string;\n  name: string;\n  icon: string;\n  met: boolean;\n  reqLevel?: number;\n  currentLevel: number;\n}\n\ninterface CostEntry {\n  resource: string;\n  resourceName: string;\n  amount: number;\n  current: number;\n  affordable: boolean;\n}\n\ninterface Props {\n  node: Node | null;\n  isUnlocked?: boolean;\n  isAvailable?: boolean;\n  isTierLocked?: boolean;\n  tierGate: TierGate | null;\n  canAfford?: boolean;\n  resources: Record<string, number>;\n  unlockedNodes: Set<string>;\n  ascensionCount?: number;\n  prestigeBonuses: Record<string, unknown> | null;\n  nodeLevel?: number;\n  canUpgrade?: boolean;\n  nodeLevels?: Record<string, number>;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  isUnlocked: false,\n  isAvailable: false,\n  isTierLocked: false,\n  canAfford: false,\n  ascensionCount: 0,\n  nodeLevel: 0,\n  canUpgrade: false,\n  nodeLevels: () => ({}),\n});\n\nconst emit = defineEmits<{\n  unlock: [nodeId: string];\n}>();\n\nconst maxLevel = computed(() => props.node?.maxLevel || 1);\nconst showLevel = computed(() => maxLevel.value > 1);\nconst isMaxLevel = computed(() => props.nodeLevel >= maxLevel.value);\n\nconst costEntries = computed((): CostEntry[] => {\n  if (!props.node?.cost) return [];\n  const scaledCost = GameData.getScaledNodeCost(props.node, {\n    ascensionCount: props.ascensionCount,\n    prestigeBonuses: props.prestigeBonuses,\n    currentLevel: props.nodeLevel,\n  });\n  return Object.entries(scaledCost).map(([resource, amount]) => ({\n    resource,\n    resourceName: resource.charAt(0).toUpperCase() + resource.slice(1),\n    amount: amount as number,\n    current: props.resources[resource] || 0,\n    affordable: (props.resources[resource] || 0) >= (amount as number),\n  }));\n});\n\nconst requirementEntries = computed((): Requirement[] => {\n  if (!props.node?.requires) return [];\n  return props.node.requires.map((req) => {\n    const reqId = typeof req === 'string' ? req : req.id;\n    const reqLevel = typeof req === 'string' ? undefined : req.level;\n    const reqNode = GameData.nodes[reqId];\n    const currentLevel = props.nodeLevels?.[reqId] || (props.unlockedNodes.has(reqId) ? 1 : 0);\n    const levelMet = reqLevel ? currentLevel >= reqLevel : true;\n    const unlocked = props.unlockedNodes.has(reqId);\n    return {\n      id: reqId,\n      name: reqNode ? reqNode.name : reqId,\n      icon: reqNode ? reqNode.icon : '?',\n      met: unlocked && levelMet,\n      reqLevel,\n      currentLevel: unlocked ? currentLevel : 0,\n    };\n  });\n});\n\nconst unlock = () => {\n  if (props.node && ((props.isAvailable && props.canAfford) || (props.canUpgrade && props.canAfford))) {\n    emit('unlock', props.node.id);\n  }\n};\n</script>\n\n<template>\n  <aside id=\"info-panel\">\n    <h2>Node Info</h2>\n    <div id=\"node-details\">\n      <!-- Placeholder when no node selected -->\n      <p v-if=\"!node\" class=\"placeholder\">Click on a node to see details</p>\n\n      <!-- Node details -->\n      <template v-else>\n        <div class=\"node-info-header\">\n          <span class=\"node-info-icon\">{{ node.icon }}</span>\n          <div>\n            <div class=\"node-info-title\">{{ node.name }}</div>\n            <div class=\"node-info-tier\">\n              Tier {{ node.tier }}<span v-if=\"showLevel\"> ‚Ä¢ Level {{ nodeLevel }}/{{ maxLevel }}</span>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"node-info-section\">\n          <h3>Description</h3>\n          <p>{{ node.description }}</p>\n        </div>\n\n        <div v-if=\"node.effects.description\" class=\"node-info-section\">\n          <h3>Effects</h3>\n          <p>{{ node.effects.description }}</p>\n        </div>\n\n        <!-- Requirements -->\n        <div v-if=\"requirementEntries.length > 0\" class=\"node-info-section\">\n          <h3>Requires</h3>\n          <ul class=\"cost-list\">\n            <li v-for=\"req in requirementEntries\" :key=\"req.id\">\n              <span\n                >{{ req.icon }} {{ req.name\n                }}<template v-if=\"req.reqLevel\"> (Lvl {{ req.currentLevel }}/{{ req.reqLevel }})</template></span\n              >\n              <span :class=\"req.met ? 'affordable' : 'not-affordable'\">\n                {{ req.met ? '‚úì' : '‚úó' }}\n              </span>\n            </li>\n          </ul>\n        </div>\n\n        <!-- Cost (show for unlock or upgrade) -->\n        <div v-if=\"costEntries.length > 0 && !isMaxLevel\" class=\"node-info-section\">\n          <h3>{{ isUnlocked ? 'Upgrade Cost' : 'Cost' }}</h3>\n          <ul class=\"cost-list\">\n            <li v-for=\"cost in costEntries\" :key=\"cost.resource\">\n              <span>{{ cost.resourceName }}</span>\n              <span :class=\"cost.affordable ? 'affordable' : 'not-affordable'\">\n                {{ formatNumber(cost.current) }} / {{ formatNumber(cost.amount) }}\n              </span>\n            </li>\n          </ul>\n        </div>\n\n        <!-- Action button -->\n        <div v-if=\"isUnlocked && isMaxLevel\" class=\"unlocked-badge\">‚úì Max Level</div>\n        <div v-else-if=\"isUnlocked && canUpgrade\" class=\"upgrade-section\">\n          <button class=\"unlock-btn upgrade-btn\" :disabled=\"!canAfford\" @click=\"unlock\">\n            {{ canAfford ? 'Upgrade' : 'Cannot Afford' }}\n          </button>\n        </div>\n        <div v-else-if=\"isUnlocked\" class=\"unlocked-badge\">‚úì Unlocked</div>\n        <div v-else-if=\"isTierLocked\" class=\"locked-badge\">\n          üîí Locked: Unlock {{ tierGate?.remaining }} more Tier {{ tierGate?.requiredTier }} nodes\n        </div>\n        <button v-else-if=\"isAvailable\" class=\"unlock-btn\" :disabled=\"!canAfford\" @click=\"unlock\">\n          {{ canAfford ? 'Unlock' : 'Cannot Afford' }}\n        </button>\n        <button v-else class=\"unlock-btn\" disabled>Requirements Not Met</button>\n      </template>\n    </div>\n  </aside>\n</template>\n","<script setup lang=\"ts\">\nimport type { NotificationDisplay } from '@network-simulator/shared/types/notification';\n\ninterface Props {\n  notifications: NotificationDisplay[];\n}\n\ndefineProps<Props>();\n\nconst getStyle = (notification: NotificationDisplay) => {\n  const duration = notification.duration || 10000;\n  const fadeStart = (duration - 300) / 1000;\n  return {\n    animationDuration: `0.3s, 0.3s`,\n    animationDelay: `0s, ${fadeStart}s`,\n  };\n};\n</script>\n\n<template>\n  <div id=\"notifications\">\n    <TransitionGroup name=\"notification\">\n      <div\n        v-for=\"notification in notifications\"\n        :key=\"notification.id\"\n        class=\"notification\"\n        :class=\"notification.type\"\n        :style=\"getStyle(notification)\"\n        style=\"white-space: pre-line\"\n      >\n        {{ notification.message }}\n      </div>\n    </TransitionGroup>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { computed, watch, nextTick } from 'vue';\nimport type { NotificationHistoryEntry } from '@network-simulator/shared/types/notification';\n\ninterface Props {\n  show: boolean;\n  history: NotificationHistoryEntry[];\n  narrateOnlyFilter: boolean;\n}\n\nconst props = defineProps<Props>();\n\nconst emit = defineEmits<{\n  close: [];\n  'update:narrateOnlyFilter': [value: boolean];\n}>();\n\nconst filteredHistory = computed(() => {\n  const filtered = !props.narrateOnlyFilter\n    ? props.history\n    : props.history.filter((n) => n.type === 'narration');\n  return [...filtered].reverse();\n});\n\nwatch(\n  () => props.show,\n  (newVal) => {\n    if (newVal) {\n      nextTick(() => {\n        const panelBody = document.querySelector('#notification-history-panel .panel-body');\n        if (panelBody) {\n          panelBody.scrollTop = panelBody.scrollHeight;\n        }\n      });\n    }\n  }\n);\n\nconst formatTime = (timestamp: number): string => {\n  const date = new Date(timestamp);\n  return date.toLocaleString();\n};\n\nconst getTypeIcon = (type: string): string => {\n  switch (type) {\n    case 'narration':\n      return 'üìñ';\n    case 'success':\n      return '‚úì';\n    case 'error':\n      return '‚úó';\n    case 'prestige':\n      return 'üåå';\n    default:\n      return '‚Ñπ';\n  }\n};\n</script>\n\n<template>\n  <div v-if=\"show\" id=\"notification-history-panel\">\n    <div class=\"panel-content\">\n      <div class=\"panel-header\">\n        <h2>üìú Notification History</h2>\n        <button class=\"close-button\" @click=\"emit('close')\">√ó</button>\n      </div>\n      <div class=\"panel-controls\">\n        <label class=\"filter-toggle\">\n          <input\n            type=\"checkbox\"\n            :checked=\"narrateOnlyFilter\"\n            @change=\"emit('update:narrateOnlyFilter', ($event.target as HTMLInputElement).checked)\"\n          />\n          <span>Narration only</span>\n        </label>\n      </div>\n      <div class=\"panel-body\">\n        <div v-if=\"filteredHistory.length === 0\" class=\"empty-state\">No notifications yet</div>\n        <div\n          v-for=\"notification in filteredHistory\"\n          :key=\"notification.id\"\n          class=\"history-item\"\n          :class=\"notification.type\"\n        >\n          <span class=\"history-icon\">{{ getTypeIcon(notification.type) }}</span>\n          <div class=\"history-content\">\n            <span class=\"history-message\" style=\"white-space: pre-line\">{{ notification.message }}</span>\n            <span class=\"history-time\">{{ formatTime(notification.timestamp) }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n","// Prestige Data Module - Upgrade definitions and prestige logic\n// ==============================================================\n\nimport type { AutomationRates } from '../types/game';\n\n/**\n * Prestige upgrade effect type\n */\nexport interface PrestigeUpgradeEffect {\n    startingEnergy?: number;\n    bonusEnergyPerClick?: number;\n    startingNodes?: string[];\n    costMultiplier?: number;\n    tierCostMultipliers?: Record<number, number>;\n    randomStartingNodes?: { tier: number; count: number };\n    automationMultiplier?: number;\n    startingAutomation?: Partial<AutomationRates>;\n    startAllTier?: number;\n    coreMultiplier?: number;\n}\n\n/**\n * Prestige upgrade definition\n */\nexport interface PrestigeUpgrade {\n    id: string;\n    name: string;\n    tier: number;\n    cost: number;\n    description: string;\n    requires: string[];\n    effect: PrestigeUpgradeEffect;\n}\n\n/**\n * All prestige upgrades by ID\n */\nexport const prestigeUpgrades: Record<string, PrestigeUpgrade> = {\n    // TIER 1 (1-5 cores)\n    quick_start: {\n        id: 'quick_start',\n        name: 'Quick Start',\n        tier: 1,\n        cost: 2,\n        description: 'Start with +5 Energy',\n        requires: [],\n        effect: { startingEnergy: 5 }\n    },\n    click_power_1: {\n        id: 'click_power_1',\n        name: 'Click Power I',\n        tier: 1,\n        cost: 3,\n        description: '+1 base Energy per click',\n        requires: [],\n        effect: { bonusEnergyPerClick: 1 }\n    },\n    headstart_1: {\n        id: 'headstart_1',\n        name: 'Headstart I',\n        tier: 1,\n        cost: 5,\n        description: 'Start with Energy Boost unlocked',\n        requires: [],\n        effect: { startingNodes: ['energy_boost'] }\n    },\n    efficient_learning: {\n        id: 'efficient_learning',\n        name: 'Efficient Learning',\n        tier: 1,\n        cost: 4,\n        description: '-10% all node costs',\n        requires: [],\n        effect: { costMultiplier: 0.9 }\n    },\n    \n    // TIER 2 (10-25 cores)\n    auto_clicker_1: {\n        id: 'auto_clicker_1',\n        name: 'Auto-Clicker I',\n        tier: 2,\n        cost: 15,\n        description: '+0.5 Energy/s from start',\n        requires: ['click_power_1'],\n        effect: { startingAutomation: { energy: 0.5 } }\n    },\n    data_affinity: {\n        id: 'data_affinity',\n        name: 'Data Affinity',\n        tier: 2,\n        cost: 10,\n        description: 'Start with Data Processing unlocked',\n        requires: ['headstart_1'],\n        effect: { startingNodes: ['data_processing'] }\n    },\n    cost_reduction_1: {\n        id: 'cost_reduction_1',\n        name: 'Cost Reduction I',\n        tier: 2,\n        cost: 20,\n        description: '-25% all node costs',\n        requires: ['efficient_learning'],\n        effect: { costMultiplier: 0.75 }\n    },\n    speed_research: {\n        id: 'speed_research',\n        name: 'Speed Research',\n        tier: 2,\n        cost: 15,\n        description: 'Tier 1-2 nodes cost 50% less',\n        requires: ['efficient_learning'],\n        effect: { tierCostMultipliers: { 1: 0.5, 2: 0.5 } }\n    },\n    \n    // TIER 3 (50-100 cores)\n    genesis_protocol: {\n        id: 'genesis_protocol',\n        name: 'Genesis Protocol',\n        tier: 3,\n        cost: 50,\n        description: 'Start with 3 random Tier 1 nodes',\n        requires: ['data_affinity'],\n        effect: { randomStartingNodes: { tier: 1, count: 3 } }\n    },\n    quantum_efficiency: {\n        id: 'quantum_efficiency',\n        name: 'Quantum Efficiency',\n        tier: 3,\n        cost: 75,\n        description: '+50% all automation rates',\n        requires: ['auto_clicker_1'],\n        effect: { automationMultiplier: 1.5 }\n    },\n    cost_reduction_2: {\n        id: 'cost_reduction_2',\n        name: 'Cost Reduction II',\n        tier: 3,\n        cost: 100,\n        description: '-50% all node costs',\n        requires: ['cost_reduction_1'],\n        effect: { costMultiplier: 0.5 }\n    },\n    core_multiplier: {\n        id: 'core_multiplier',\n        name: 'Core Multiplier',\n        tier: 3,\n        cost: 80,\n        description: '+25% Quantum Cores earned',\n        requires: [],\n        effect: { coreMultiplier: 1.25 }\n    },\n    \n    // TIER 4 (200-500 cores)\n    instant_tier_1: {\n        id: 'instant_tier_1',\n        name: 'Instant Tier 1',\n        tier: 4,\n        cost: 200,\n        description: 'Start with ALL Tier 1 nodes',\n        requires: ['genesis_protocol'],\n        effect: { startAllTier: 1 }\n    },\n    eternal_generator: {\n        id: 'eternal_generator',\n        name: 'Eternal Generator',\n        tier: 4,\n        cost: 300,\n        description: '+5 Energy/s permanent',\n        requires: ['quantum_efficiency'],\n        effect: { startingAutomation: { energy: 5 } }\n    },\n    bandwidth_genesis: {\n        id: 'bandwidth_genesis',\n        name: 'Bandwidth Genesis',\n        tier: 4,\n        cost: 250,\n        description: 'Start with Bandwidth unlocked',\n        requires: ['data_affinity'],\n        effect: { startingNodes: ['bandwidth_unlock'] }\n    },\n    prestige_mastery: {\n        id: 'prestige_mastery',\n        name: 'Prestige Mastery',\n        tier: 4,\n        cost: 500,\n        description: '2x Quantum Cores earned',\n        requires: ['core_multiplier'],\n        effect: { coreMultiplier: 2 }\n    }\n};\n\n/**\n * Check if an upgrade's requirements are met\n */\nexport function canPurchaseUpgrade(\n    upgradeId: string, \n    purchasedUpgrades: Set<string>\n): boolean {\n    const upgrade = prestigeUpgrades[upgradeId];\n    if (!upgrade) return false;\n    \n    // Check if already purchased\n    if (purchasedUpgrades.has(upgradeId)) return false;\n    \n    // Check requirements\n    return upgrade.requires.every(reqId => purchasedUpgrades.has(reqId));\n}\n\n/**\n * Get all upgrades organized by tier\n */\nexport function getUpgradesByTier(): Record<number, PrestigeUpgrade[]> {\n    const byTier: Record<number, PrestigeUpgrade[]> = { 1: [], 2: [], 3: [], 4: [] };\n    \n    Object.values(prestigeUpgrades).forEach(upgrade => {\n        if (byTier[upgrade.tier]) {\n            byTier[upgrade.tier].push(upgrade);\n        }\n    });\n    \n    return byTier;\n}\n\n/**\n * Get upgrades that are currently purchasable\n */\nexport function getAvailableUpgrades(\n    purchasedUpgrades: Set<string>, \n    quantumCores: number\n): PrestigeUpgrade[] {\n    return Object.values(prestigeUpgrades).filter(upgrade => {\n        if (purchasedUpgrades.has(upgrade.id)) return false;\n        \n        const requirementsMet = upgrade.requires.every(reqId => \n            purchasedUpgrades.has(reqId)\n        );\n        \n        return requirementsMet && quantumCores >= upgrade.cost;\n    });\n}\n","<script setup lang=\"ts\">\nimport { ref, computed } from 'vue';\nimport { formatNumber, formatTime } from '@network-simulator/shared/utils/formatUtils';\nimport { prestigeUpgrades, getUpgradesByTier } from '@network-simulator/shared/data/prestigeData';\nimport type { PrestigeUpgrade } from '@network-simulator/shared/data/prestigeData';\nimport { PrestigeStatistics } from '@network-simulator/shared/types';\n\ninterface Props {\n  quantumCores: number;\n  ascensionCount: number;\n  purchasedUpgrades: Set<string>;\n  statistics: PrestigeStatistics;\n  totalCoresEarned?: number;\n  visible?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  totalCoresEarned: 0,\n  visible: false,\n});\n\nconst emit = defineEmits<{\n  'purchase-upgrade': [upgradeId: string];\n  close: [];\n}>();\n\nconst selectedTier = ref(1);\n\nconst upgradesByTier = computed(() => {\n  return getUpgradesByTier();\n});\n\nconst displayUpgrades = computed(() => {\n  return upgradesByTier.value[selectedTier.value] || [];\n});\n\nconst canAfford = (upgrade: PrestigeUpgrade): boolean => {\n  return props.quantumCores >= upgrade.cost;\n};\n\nconst isPurchased = (upgradeId: string): boolean => {\n  return props.purchasedUpgrades.has(upgradeId);\n};\n\nconst canPurchase = (upgrade: PrestigeUpgrade): boolean => {\n  if (isPurchased(upgrade.id)) return false;\n  if (!canAfford(upgrade)) return false;\n\n  return upgrade.requires.every((reqId) => props.purchasedUpgrades.has(reqId));\n};\n\nconst handlePurchase = (upgrade: PrestigeUpgrade) => {\n  if (!canPurchase(upgrade)) return;\n  emit('purchase-upgrade', upgrade.id);\n};\n\nconst selectTier = (tier: number) => {\n  selectedTier.value = tier;\n};\n\nconst getUpgradeStatusClass = (upgrade: PrestigeUpgrade): string => {\n  if (isPurchased(upgrade.id)) return 'purchased';\n  if (canPurchase(upgrade)) return 'available';\n  return 'locked';\n};\n\nconst getRequirementNames = (requireIds: string[]): string => {\n  return requireIds\n    .map((id) => {\n      const upgrade = prestigeUpgrades[id];\n      return upgrade ? upgrade.name : id;\n    })\n    .join(', ');\n};\n</script>\n\n<template>\n  <div v-if=\"visible\" id=\"ascension-panel\" @click.self=\"emit('close')\">\n    <div class=\"panel-content\" @click.stop>\n      <div class=\"panel-header\">\n        <h2>üåå Ascension</h2>\n        <button class=\"close-button\" @click=\"emit('close')\">‚úï</button>\n      </div>\n\n      <div class=\"prestige-summary\">\n        <div class=\"prestige-stat\">\n          <span class=\"stat-icon\">üíé</span>\n          <div class=\"stat-info\">\n            <span class=\"stat-label\">Quantum Cores</span>\n            <span class=\"stat-value\">{{ formatNumber(quantumCores) }}</span>\n          </div>\n        </div>\n        <div class=\"prestige-stat\">\n          <span class=\"stat-icon\">üîÑ</span>\n          <div class=\"stat-info\">\n            <span class=\"stat-label\">Ascensions</span>\n            <span class=\"stat-value\">{{ ascensionCount }}</span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"panel-body\">\n        <div class=\"tier-tabs\">\n          <button\n            v-for=\"tier in [1, 2, 3, 4]\"\n            :key=\"tier\"\n            class=\"tier-tab\"\n            :class=\"{ active: selectedTier === tier }\"\n            @click=\"selectTier(tier)\"\n          >\n            Tier {{ tier }}\n          </button>\n        </div>\n\n        <div class=\"upgrades-grid\">\n          <div\n            v-for=\"upgrade in displayUpgrades\"\n            :key=\"upgrade.id\"\n            class=\"upgrade-card\"\n            :class=\"getUpgradeStatusClass(upgrade)\"\n          >\n            <div class=\"upgrade-header\">\n              <h3 class=\"upgrade-name\">{{ upgrade.name }}</h3>\n              <span class=\"upgrade-cost\"> {{ formatNumber(upgrade.cost) }} üíé </span>\n            </div>\n            <p class=\"upgrade-description\">{{ upgrade.description }}</p>\n\n            <div v-if=\"upgrade.requires.length > 0\" class=\"upgrade-requirements\">\n              <span class=\"req-label\">Requires:</span>\n              <span class=\"req-list\">\n                {{ getRequirementNames(upgrade.requires) }}\n              </span>\n            </div>\n\n            <button class=\"purchase-button\" :disabled=\"!canPurchase(upgrade)\" @click=\"handlePurchase(upgrade)\">\n              <span v-if=\"isPurchased(upgrade.id)\">‚úì Purchased</span>\n              <span v-else-if=\"canPurchase(upgrade)\">Purchase</span>\n              <span v-else-if=\"!canAfford(upgrade)\">Not enough cores</span>\n              <span v-else>Requirements not met</span>\n            </button>\n          </div>\n        </div>\n\n        <div class=\"statistics-section\">\n          <h3>Statistics</h3>\n          <div class=\"stats-grid\">\n            <div class=\"stat-item\">\n              <span class=\"stat-name\">Total Cores Earned:</span>\n              <span class=\"stat-val\">{{ formatNumber(totalCoresEarned) }}</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-name\">Total Nodes Unlocked:</span>\n              <span class=\"stat-val\">{{ formatNumber(statistics.totalNodesEverUnlocked || 0) }}</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-name\">Total Energy Earned:</span>\n              <span class=\"stat-val\">{{ formatNumber(statistics.totalEnergyEverEarned || 0) }}</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-name\">Fastest Clear:</span>\n              <span class=\"stat-val\">{{ formatTime(statistics.fastestClear) }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n","// Changelog Data\n// ===============\n// Version history for the game\n\nexport interface ChangelogSection {\n    Added?: string[];\n    Changed?: string[];\n    Fixed?: string[];\n    Removed?: string[];\n}\n\nexport interface ChangelogEntry {\n    version: string;\n    date: string;\n    sections: ChangelogSection;\n}\n\nexport const ChangelogData: ChangelogEntry[] = [\n    {\n        version: '0.5.1',\n        date: '2025-11-26',\n        sections: {\n            'Added': [\n                'Changelog modal with version history',\n                'Keyboard shortcut (Esc) to close modals'\n            ],\n            'Changed': [\n                'Adjusted the bandwidth generation values a bit',\n                'Disabled tier unlock gates (for now)'\n            ],\n            'Fixed': [],\n            'Removed': [\n                'Ascension cost scaling of node upgrades'\n            ]\n        }\n    },\n    {\n        version: '0.5.0',\n        date: '2025-11-20',\n        sections: {\n            'Added': [\n                'Ascension system with Quantum Cores',\n                'Prestige upgrades across multiple tiers',\n                'Statistics tracking for game progress'\n            ],\n            'Changed': [\n                'Refactored codebase to use composables pattern',\n                'Improved save/load system'\n            ],\n            'Fixed': [],\n            'Removed': []\n        }\n    },\n    {\n        version: '0.4.0',\n        date: '2025-11-15',\n        sections: {\n            'Added': [\n                'Bandwidth resource system',\n                'New tier 5 and tier 6 nodes',\n                'Particle effects for node unlocking',\n                'Keyboard shortcut (u) to unlock selected nodes'\n            ],\n            'Changed': [\n                'Updated node icons and visual design',\n                'Improved radial layout algorithm'\n            ],\n            'Fixed': [\n                'Node overlap issues in skill tree',\n                'Save file corruption on unexpected shutdown'\n            ],\n            'Removed': []\n        }\n    }\n];\n","<script setup lang=\"ts\">\nimport { computed } from 'vue';\nimport { ChangelogData } from '@network-simulator/shared/data/changelogData';\nimport type { ChangelogEntry } from '@network-simulator/shared/data/changelogData';\n\ninterface Props {\n  visible: boolean;\n}\n\ndefineProps<Props>();\n\nconst emit = defineEmits<{\n  close: [];\n}>();\n\nconst changelogData = computed(() => {\n  return ChangelogData;\n});\n\nconst filteredChangelog = computed(() => {\n  return changelogData.value.map((release: ChangelogEntry) => ({\n    ...release,\n    sections: Object.fromEntries(\n      Object.entries(release.sections).filter(([, items]) => items && items.length > 0)\n    ),\n  }));\n});\n</script>\n\n<template>\n  <div v-if=\"visible\" id=\"changelog-panel\" @click.self=\"emit('close')\">\n    <div class=\"panel-content\" @click.stop>\n      <div class=\"panel-header\">\n        <h2>üìú Changelog</h2>\n        <button class=\"close-button\" @click=\"emit('close')\">‚úï</button>\n      </div>\n\n      <div class=\"panel-body\">\n        <div v-for=\"release in filteredChangelog\" :key=\"release.version\" class=\"changelog-release\">\n          <div class=\"release-header\">\n            <h3 class=\"release-version\">Version {{ release.version }}</h3>\n            <span class=\"release-date\">{{ release.date }}</span>\n          </div>\n\n          <div v-for=\"(items, section) in release.sections\" :key=\"section\" class=\"changelog-section\">\n            <h4 class=\"section-title\">{{ section }}</h4>\n            <ul class=\"section-list\">\n              <li v-for=\"(item, idx) in items\" :key=\"idx\">{{ item }}</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n","// useNodeManagement Composable\n// ==============================\n// Manages node operations: unlocking, affordability checks, applying effects\n\nimport { computed, type ComputedRef } from 'vue';\nimport type { Node, NodeEffects } from '@network-simulator/shared/types/node';\nimport type { ResourceAmounts } from '@network-simulator/shared/types/game';\nimport type { UseGameStateReturn } from './useGameState';\nimport type { UsePrestigeStateReturn } from './usePrestigeState';\nimport type { EventMap } from '@network-simulator/shared/types/event';\nimport GameData from '@/core/gameData';\n\n/**\n * Computed values from unlocked nodes\n */\ninterface ComputedNodeValues {\n    energyPerClick: number;\n    dataPerClick: number;\n    dataMultiplier: number;\n    allRatesMultiplier: number;\n}\n\n/**\n * Resource generation rates\n */\ninterface ResourceRates {\n    energy: number;\n    data: number;\n    energyPerClick: number;\n}\n\n/**\n * Event bus interface (minimal typing)\n */\ninterface EventBus {\n    on<K extends keyof EventMap>(eventName: K, callback: (data: EventMap[K]) => void): () => void;\n    emit<K extends keyof EventMap>(eventName: K, data: EventMap[K]): void;\n}\n\n/**\n * Unlock result\n */\ninterface UnlockResult {\n    node: Node;\n    newLevel: number;\n}\n\n/**\n * Return type for useNodeManagement composable\n */\nexport interface UseNodeManagementReturn {\n    // Computed\n    computedValues: ComputedRef<ComputedNodeValues>;\n    resourceRates: ComputedRef<ResourceRates>;\n    dataPerClickDisplay: ComputedRef<number>;\n    selectedNode: ComputedRef<Node | null>;\n    isSelectedNodeUnlocked: ComputedRef<boolean>;\n    isSelectedNodeAvailable: ComputedRef<boolean>;\n    canAffordSelectedNode: ComputedRef<boolean>;\n    isTierLocked: ComputedRef<boolean>;\n    tierGateRequirement: ComputedRef<null>;\n    \n    // Methods\n    checkAffordability: (node: Node | null, level?: number | null) => boolean;\n    generateEnergy: () => void;\n    processData: () => void;\n    unlockNode: (nodeId: string) => UnlockResult | false;\n    applyNodeEffects: (node: Node, isUpgrade?: boolean, newLevel?: number) => void;\n    applyStartingBonuses: () => void;\n    getNodeLevel: (nodeId: string) => number;\n    getNodeMaxLevel: (node: Node) => number;\n    canUpgradeNode: (node: Node | null) => boolean;\n}\n\nexport function useNodeManagement(\n    gameState: UseGameStateReturn,\n    prestigeState: UsePrestigeStateReturn,\n    eventBus: EventBus,\n    nodes: Record<string, Node>\n): UseNodeManagementReturn {\n    // ==========================================\n    // COMPUTED\n    // ==========================================\n    const computedValues = computed<ComputedNodeValues>(() => {\n        const values: ComputedNodeValues = {\n            energyPerClick: 0,\n            dataPerClick: 1,\n            dataMultiplier: 1,\n            allRatesMultiplier: 1\n        };\n\n        // Apply prestige bonuses\n        const bonuses = prestigeState.prestigeBonuses.value;\n        values.energyPerClick += bonuses.bonusEnergyPerClick;\n\n        gameState.unlockedNodes.value.forEach(nodeId => {\n            const node = nodes[nodeId];\n            if (!node) return;\n\n            // Get node level (default 1 for backward compatibility)\n            const level = gameState.nodeLevels[nodeId] || 1;\n\n            if (node.effects.energyPerClick) {\n                values.energyPerClick += node.effects.energyPerClick * level;\n            }\n            if (node.effects.dataPerClick) {\n                values.dataPerClick += node.effects.dataPerClick * level;\n            }\n            if (node.effects.dataMultiplier) {\n                values.dataMultiplier *= Math.pow(node.effects.dataMultiplier, level);\n            }\n            if (node.effects.allRatesMultiplier) {\n                values.allRatesMultiplier *= Math.pow(node.effects.allRatesMultiplier, level);\n            }\n        });\n\n        return values;\n    });\n\n    const resourceRates = computed<ResourceRates>(() => {\n        const bonuses = prestigeState.prestigeBonuses.value;\n        return {\n            energy: gameState.automations.energy * computedValues.value.allRatesMultiplier * bonuses.automationMultiplier,\n            data: gameState.automations.data * computedValues.value.allRatesMultiplier * computedValues.value.dataMultiplier * bonuses.automationMultiplier,\n            energyPerClick: computedValues.value.energyPerClick\n        };\n    });\n\n    const dataPerClickDisplay = computed<number>(() => {\n        return Math.floor(computedValues.value.dataPerClick * computedValues.value.dataMultiplier);\n    });\n\n    const selectedNode = computed<Node | null>(() => {\n        return gameState.selectedNodeId.value ? nodes[gameState.selectedNodeId.value] : null;\n    });\n\n    const isSelectedNodeUnlocked = computed<boolean>(() => {\n        return gameState.selectedNodeId.value ? gameState.unlockedNodes.value.has(gameState.selectedNodeId.value) : false;\n    });\n\n    const isSelectedNodeAvailable = computed<boolean>(() => {\n        if (!selectedNode.value || isSelectedNodeUnlocked.value) return false;\n        \n        // Check requirements\n        if (!checkRequirements(selectedNode.value)) return false;\n\n        // Check tier gate\n        return GameData.isTierUnlocked(selectedNode.value.tier, gameState.unlockedNodes.value);\n    });\n\n    const canAffordSelectedNode = computed<boolean>(() => {\n        return checkAffordability(selectedNode.value);\n    });\n\n    const isTierLocked = computed<boolean>(() => {\n        if (!selectedNode.value) return false;\n        return !GameData.isTierUnlocked(selectedNode.value.tier, gameState.unlockedNodes.value);\n    });\n\n    const tierGateRequirement = computed<null>(() => {\n        return null;\n    });\n\n    // ==========================================\n    // METHODS\n    // ==========================================\n    \n    /**\n     * Get current level of a node (0 = locked)\n     */\n    function getNodeLevel(nodeId: string): number {\n        return gameState.nodeLevels[nodeId] || 0;\n    }\n\n    /**\n     * Check if all requirements for a node are met\n     * Supports both string requirements ('node_id') and object requirements ({ id: 'node_id', level: 5 })\n     */\n    function checkRequirements(node: Node): boolean {\n        if (!node?.requires || !Array.isArray(node.requires)) return true;\n        \n        return node.requires.every(req => {\n            if (typeof req === 'string') {\n                // Simple requirement: just check if unlocked\n                return gameState.unlockedNodes.value.has(req);\n            } else if (req && typeof req === 'object' && 'id' in req) {\n                // Object requirement: check id and level\n                const reqId = req.id;\n                const reqLevel = req.level || 1;\n                if (!gameState.unlockedNodes.value.has(reqId)) return false;\n                return getNodeLevel(reqId) >= reqLevel;\n            } else {\n                // Malformed requirement - log and skip\n                console.warn('Invalid requirement format:', req);\n                return false;\n            }\n        });\n    }\n\n    /**\n     * Get max level for a node (default 1)\n     */\n    function getNodeMaxLevel(node: Node): number {\n        return node?.maxLevel || 1;\n    }\n\n    /**\n     * Check if a node can be upgraded (has more levels available)\n     */\n    function canUpgradeNode(node: Node | null): boolean {\n        if (!node) return false;\n        const currentLevel = getNodeLevel(node.id);\n        const maxLevel = getNodeMaxLevel(node);\n        return currentLevel > 0 && currentLevel < maxLevel;\n    }\n\n    /**\n     * Check if a node is affordable at a given level\n     */\n    function checkAffordability(node: Node | null, level: number | null = null): boolean {\n        if (!node) return false;\n        const currentLevel = level !== null ? level : getNodeLevel(node.id);\n        const scaledCost = GameData.getScaledNodeCost(node, {\n            ascensionCount: prestigeState.prestigeState.ascensionCount,\n            prestigeBonuses: prestigeState.prestigeBonuses.value,\n            currentLevel\n        });\n        for (const [resource, amount] of Object.entries(scaledCost)) {\n            if (gameState.resources[resource as keyof ResourceAmounts] < (amount as number)) return false;\n        }\n        return true;\n    }\n\n    /**\n     * Generate energy (manual click)\n     */\n    function generateEnergy(): void {\n        const amount = computedValues.value.energyPerClick;\n        gameState.resources.energy += amount;\n        gameState.totalResources.energy += amount;\n    }\n\n    /**\n     * Process data (manual action)\n     */\n    function processData(): void {\n        if (!gameState.canProcessData.value) return;\n        // Don't process if at capacity\n        if (gameState.resources.data >= gameState.maxDataCapacity.value) return;\n        gameState.resources.energy -= 5;\n        const dataGain = Math.floor(computedValues.value.dataPerClick * computedValues.value.dataMultiplier);\n        gameState.resources.data += dataGain;\n        gameState.totalResources.data += dataGain;\n        // Cap at max capacity\n        if (gameState.resources.data > gameState.maxDataCapacity.value) {\n            gameState.resources.data = gameState.maxDataCapacity.value;\n        }\n    }\n\n    /**\n     * Unlock or upgrade a node\n     */\n    function unlockNode(nodeId: string): UnlockResult | false {\n        const node = nodes[nodeId];\n        if (!node) return false;\n\n        const currentLevel = getNodeLevel(nodeId);\n        const maxLevel = getNodeMaxLevel(node);\n        const isUpgrade = currentLevel > 0;\n\n        // If already at max level, can't unlock/upgrade\n        if (currentLevel >= maxLevel) return false;\n\n        // For initial unlock, check requirements\n        if (!isUpgrade) {\n            if (!checkRequirements(node)) return false;\n\n            // Check tier gate\n            if (!GameData.isTierUnlocked(node.tier, gameState.unlockedNodes.value)) return false;\n        }\n\n        // Check cost\n        if (!checkAffordability(node, currentLevel)) return false;\n\n        const scaledCost = GameData.getScaledNodeCost(node, {\n            ascensionCount: prestigeState.prestigeState.ascensionCount,\n            prestigeBonuses: prestigeState.prestigeBonuses.value,\n            currentLevel\n        });\n\n        // Deduct costs\n        for (const [resource, amount] of Object.entries(scaledCost)) {\n            gameState.resources[resource as keyof ResourceAmounts] -= (amount as number);\n        }\n\n        // Update level\n        gameState.nodeLevels[nodeId] = currentLevel + 1;\n\n        // Add to unlocked nodes if first unlock\n        if (!isUpgrade) {\n            const newUnlocked = new Set(gameState.unlockedNodes.value);\n            newUnlocked.add(nodeId);\n            gameState.unlockedNodes.value = newUnlocked;\n        }\n\n        // Apply effects\n        applyNodeEffects(node, isUpgrade, currentLevel + 1);\n\n        // Emit event for listeners (gameLoop, etc.)\n        eventBus.emit('nodeUnlocked', { \n            nodeId,\n            node, \n            level: currentLevel + 1\n        });\n\n        // Return node and new level for caller to handle effects like toast/narration\n        return { node, newLevel: currentLevel + 1 };\n    }\n\n    /**\n     * Effect handlers - each handler is testable & reusable\n     * Each handler applies one effect type to gameState\n     */\n    const EffectRegistry = {\n        automation: (effects: NodeEffects) => {\n            if (effects.automation) {\n                gameState.automations[effects.automation.resource] += effects.automation.rate;\n            }\n        },\n\n        unlockBranch: (effects: NodeEffects) => {\n            if (effects.unlockBranch) {\n                gameState.unlockBranch(effects.unlockBranch);\n                eventBus.emit('branchUnlocked', { branch: effects.unlockBranch });\n            }\n        },\n\n        unlockDataProcessing: (effects: NodeEffects) => {\n            if (effects.unlockDataProcessing) {\n                gameState.unlockFeature('dataProcessing');\n                eventBus.emit('featureUnlocked', { feature: 'dataProcessing' });\n            }\n        },\n\n        unlockDataGeneration: (effects: NodeEffects) => {\n            if (effects.unlockDataGeneration) {\n                gameState.dataGeneration.active = true;\n            }\n        },\n\n        dataGenSpeedMultiplier: (effects: NodeEffects) => {\n            if (effects.dataGenSpeedMultiplier) {\n                gameState.dataGeneration.interval /= effects.dataGenSpeedMultiplier;\n            }\n        },\n\n        dataGenAmountBonus: (effects: NodeEffects) => {\n            if (effects.dataGenAmountBonus) {\n                gameState.dataGeneration.bitsPerTick += effects.dataGenAmountBonus;\n            }\n        },\n\n        maxDataCapacityBonus: (effects: NodeEffects) => {\n            if (effects.maxDataCapacityBonus) {\n                gameState.dataGeneration.capacityBonus += effects.maxDataCapacityBonus;\n            }\n        },\n\n        maxDataCapacityMultiplier: (effects: NodeEffects & { maxDataCapacityMultiplier?: number }) => {\n            if (effects.maxDataCapacityMultiplier) {\n                gameState.dataGeneration.capacityBonus *= effects.maxDataCapacityMultiplier;\n            }\n        },\n\n        instantUnlock: (effects: NodeEffects & { instantUnlock?: boolean }) => {\n            if (effects.instantUnlock) {\n                const lockedAvailableNodes = Object.values(nodes).filter(n =>\n                    !gameState.unlockedNodes.value.has(n.id) &&\n                    checkRequirements(n)\n                );\n                if (lockedAvailableNodes.length > 0) {\n                    const randomNode = lockedAvailableNodes[Math.floor(Math.random() * lockedAvailableNodes.length)];\n                    const newUnlocked = new Set(gameState.unlockedNodes.value);\n                    newUnlocked.add(randomNode.id);\n                    gameState.unlockedNodes.value = newUnlocked;\n                    applyNodeEffects(randomNode);\n                }\n            }\n        },\n\n        breakCrank: (effects: NodeEffects) => {\n            if (effects.breakCrank) {\n                gameState.isCrankBroken.value = true;\n            }\n        },\n\n        automateCrank: (effects: NodeEffects) => {\n            if (effects.automateCrank) {\n                gameState.isCrankBroken.value = false; // Repairs the crank\n                gameState.isCrankAutomated.value = true;\n            }\n        },\n\n        unlockEnergyGeneration: (effects: NodeEffects & { unlockEnergyGeneration?: boolean; energyGenRate?: number; energyGenInterval?: number }) => {\n            if (effects.unlockEnergyGeneration) {\n                gameState.energyGeneration.active = true;\n                if (effects.energyGenRate) {\n                    gameState.energyGeneration.energyPerTick = effects.energyGenRate;\n                }\n                if (effects.energyGenInterval) {\n                    gameState.energyGeneration.interval = effects.energyGenInterval;\n                }\n            }\n        }\n    };\n\n    /**\n     * Apply node effects via registry\n     * @param node - The node object\n     * @param isUpgrade - True if this is a level upgrade, not initial unlock\n     * @param newLevel - The new level of the node\n     */\n    function applyNodeEffects(node: Node, isUpgrade: boolean = false, newLevel: number = 1): void {\n        const effects = node.effects;\n\n        // Apply all effects from registry (automation applies always, others only on first unlock)\n        EffectRegistry.automation(effects);\n\n        if (!isUpgrade) {\n            EffectRegistry.unlockBranch(effects);\n            EffectRegistry.unlockDataProcessing(effects);\n            EffectRegistry.unlockDataGeneration(effects);\n            EffectRegistry.dataGenSpeedMultiplier(effects);\n            EffectRegistry.dataGenAmountBonus(effects);\n            EffectRegistry.maxDataCapacityBonus(effects);\n            EffectRegistry.instantUnlock(effects);\n            EffectRegistry.breakCrank(effects);\n            EffectRegistry.automateCrank(effects);\n            EffectRegistry.unlockEnergyGeneration(effects);\n        } else {\n            // On upgrade, still apply bonus effects\n            EffectRegistry.dataGenSpeedMultiplier(effects);\n            EffectRegistry.dataGenAmountBonus(effects);\n            EffectRegistry.maxDataCapacityBonus(effects);\n        }\n\n        // Apply level-specific effects (only triggers at that exact level)\n        if (effects.levelEffects && effects.levelEffects[newLevel]) {\n            applyEffectSet(effects.levelEffects[newLevel]);\n        }\n    }\n\n    /**\n     * Apply a set of effects using all effect handlers\n     * @param effectSet - The effect set object containing effect properties\n     */\n    function applyEffectSet(effectSet: any): void {\n        Object.values(EffectRegistry).forEach(handler => handler(effectSet));\n    }\n\n    /**\n     * Apply starting bonuses from prestige upgrades (called on new game/ascension)\n     */\n    function applyStartingBonuses(): void {\n        const bonuses = prestigeState.getAccumulatedBonuses();\n        \n        // Starting resources\n        gameState.resources.energy = bonuses.startingEnergy || 0;\n        gameState.totalResources.energy = bonuses.startingEnergy || 0;\n        \n        // Starting automation\n        Object.entries(bonuses.startingAutomation).forEach(([resource, rate]) => {\n            gameState.automations[resource as keyof ResourceAmounts] = rate;\n        });\n        \n        // Starting nodes\n        const newUnlocked = new Set(bonuses.startingNodes);\n        \n        // Handle random starting nodes\n        if (bonuses.randomStartingNodes) {\n            const { tier, count } = bonuses.randomStartingNodes;\n            const tierNodes = Object.values(nodes).filter(n => \n                n.tier === tier && !newUnlocked.has(n.id)\n            );\n            const shuffled = tierNodes.sort(() => Math.random() - 0.5);\n            shuffled.slice(0, count).forEach(node => newUnlocked.add(node.id));\n        }\n        \n        gameState.unlockedNodes.value = newUnlocked;\n        \n        // Apply effects from starting nodes\n        newUnlocked.forEach(nodeId => {\n            const node = nodes[nodeId];\n            if (node && node.id !== 'old_shed') {\n                applyNodeEffects(node);\n            }\n        });\n        \n        // Emit updated rates after applying bonuses\n        eventBus.emit('resourceRatesChanged', resourceRates.value);\n    }\n\n    // ==========================================\n    // EVENT SUBSCRIPTIONS\n    // ==========================================\n    \n    // Handle unlock requests from gameLoop\n    eventBus.on('requestUnlockNode', ({ nodeId }) => {\n        unlockNode(nodeId);\n        // nodeUnlocked event is already emitted in unlockNode()\n    });\n    \n    // Handle rate requests\n    eventBus.on('requestResourceRates', () => {\n        eventBus.emit('resourceRatesChanged', resourceRates.value);\n    });\n    \n    // Handle starting bonus requests (for ascension)\n    eventBus.on('requestStartingBonuses', () => {\n        applyStartingBonuses();\n    });\n\n    // ==========================================\n    // RETURN\n    // ==========================================\n    return {\n        // Computed\n        computedValues,\n        resourceRates,\n        dataPerClickDisplay,\n        selectedNode,\n        isSelectedNodeUnlocked,\n        isSelectedNodeAvailable,\n        canAffordSelectedNode,\n        isTierLocked,\n        tierGateRequirement,\n        \n        // Methods\n        checkAffordability,\n        generateEnergy,\n        processData,\n        unlockNode,\n        applyNodeEffects,\n        applyStartingBonuses,\n        getNodeLevel,\n        getNodeMaxLevel,\n        canUpgradeNode\n    };\n}\n","// Notification constants\n// ==========================\n\nexport enum NotificationType {\n    INFO = 'info',\n    ERROR = 'error',\n    SUCCESS = 'success',\n    NARRATION = 'narration',\n    NODE_UNLOCK = 'node_unlock',\n    HINT = 'hint',\n    ACHIEVEMENT = 'achievement',\n    TERMINAL = 'terminal'\n}\n\nexport const DisabledNotificationTypes = new Set<NotificationType>([\n    NotificationType.NODE_UNLOCK\n]);\n\nexport const NotificationDurations = {\n    NARRATION_SHORT: 6_000,\n    NARRATION_MEDIUM: 10_000,\n    NARRATION_LONG: 15_000,\n    HINT_SHORT: 5_000,\n    HINT_MEDIUM: 8_000\n} as const;\n","// useGameLoop Composable\n// =======================\n// Manages game loop, notifications, and ascension logic\n// Uses event bus for decoupled communication with other composables\n\nimport { ref, onMounted, onUnmounted, type Ref } from 'vue';\nimport { GAME_LOOP_INTERVAL_MS, AUTOSAVE_INTERVAL_MS } from '@network-simulator/shared/data/constants';\nimport { NotificationType, DisabledNotificationTypes } from '@network-simulator/shared/data/notifications/constants';\nimport type { UseGameStateReturn } from './useGameState';\nimport type { UsePrestigeStateReturn } from './usePrestigeState';\nimport type { EventMap, NodeUnlockedEvent } from '@network-simulator/shared/types/event';\nimport { prestigeUpgrades } from '@network-simulator/shared/data/prestigeData';\nimport { NotificationDisplay, NotificationHistoryEntry } from '@network-simulator/shared/types/notification';\n\nconst NOTIFICATION_HISTORY_KEY = 'networkSimNotificationHistory';\n\n/**\n * Event bus interface (minimal typing)\n */\ninterface EventBus {\n    on<K extends keyof EventMap>(eventName: K, callback: (data: EventMap[K]) => void): () => void;\n    emit<K extends keyof EventMap>(eventName: K, data: EventMap[K]): void;\n}\n\n/**\n * Resource rates from node management\n */\ninterface ResourceRates {\n    energy: number;\n    data: number;\n    energyPerClick?: number;\n}\n\n/**\n * Return type for useGameLoop composable\n */\nexport interface UseGameLoopReturn {\n    // State\n    notifications: Ref<NotificationDisplay[]>;\n    notificationHistory: Ref<NotificationHistoryEntry[]>;\n    showNotificationHistory: Ref<boolean>;\n    narrateOnlyFilter: Ref<boolean>;\n    \n    // Methods\n    gameLoop: () => void;\n    showNotification: (message: string, type?: NotificationType, duration?: number) => void;\n    toggleNotificationHistory: () => void;\n    clearNotificationHistory: () => void;\n    ascend: () => void;\n    resetGameState: () => void;\n    handlePurchaseUpgrade: (upgradeId: string) => boolean;\n    handleUnlockNode: (nodeId: string) => void;\n    initialize: () => void;\n}\n\nexport function useGameLoop(\n    gameState: UseGameStateReturn,\n    prestigeState: UsePrestigeStateReturn,\n    eventBus: EventBus\n): UseGameLoopReturn {\n    // ==========================================\n    // STATE\n    // ==========================================\n    const lastUpdate = ref<number>(Date.now());\n    const notifications = ref<NotificationDisplay[]>([]);\n    const notificationHistory = ref<NotificationHistoryEntry[]>([]);\n    const showNotificationHistory = ref<boolean>(false);\n    const narrateOnlyFilter = ref<boolean>(false);\n    let notificationId = 0;\n    let gameLoopInterval: ReturnType<typeof setInterval> | null = null;\n    let saveInterval: ReturnType<typeof setInterval> | null = null;\n    let prestigeSaveInterval: ReturnType<typeof setInterval> | null = null;\n    \n    // Cached resource rates (updated via events)\n    let cachedResourceRates: ResourceRates = { energy: 0, data: 0 };\n    let cachedEnergyPerClick = 0;\n    let autoCrankAccumulator = 0; // Tracks time for auto-crank\n\n    // ==========================================\n    // METHODS\n    // ==========================================\n    \n    /**\n     * Cap data at max capacity\n     */\n    function capDataAtCapacity(): void {\n        const maxCap = gameState.maxDataCapacity.value;\n        if (gameState.resources.data > maxCap) {\n            gameState.resources.data = maxCap;\n        }\n    }\n\n    /**\n     * Main game loop - applies automation rates\n     */\n    function gameLoop(): void {\n        const now = Date.now();\n        const delta = (now - lastUpdate.value) / 1000;\n        lastUpdate.value = now;\n\n        // Apply automation rates (from cached event data)\n        const rates = cachedResourceRates;\n        gameState.resources.energy += rates.energy * delta;\n        gameState.resources.data += rates.data * delta;\n\n        gameState.totalResources.energy += rates.energy * delta;\n        gameState.totalResources.data += rates.data * delta;\n\n        // Cap data at max capacity\n        capDataAtCapacity();\n\n        // Process auto data generation\n        processDataGeneration(delta);\n        \n        // Process auto energy generation\n        processEnergyGeneration(delta);\n        \n        // Process auto crank\n        processAutoCrank(delta);\n        \n        // Emit tick for notification engine (throttled checks happen there)\n        eventBus.emit('gameTick', { deltaTime: delta });\n    }\n\n    /**\n     * Auto data generation - fills progress bar and generates bits\n     */\n    function processDataGeneration(delta: number): void {\n        const dg = gameState.dataGeneration;\n        if (!dg.active) return;\n        if (gameState.resources.energy < dg.energyCost) return;\n\n        // Don't generate if at capacity\n        const maxCap = gameState.maxDataCapacity.value;\n        if (gameState.resources.data >= maxCap) return;\n\n        // Progress = % of interval completed per second\n        const progressPerSecond = 100 / (dg.interval / 1000);\n        dg.progress += progressPerSecond * delta;\n\n        if (dg.progress >= 100) {\n            dg.progress = 0;\n            gameState.resources.energy -= dg.energyCost;\n            gameState.resources.data += dg.bitsPerTick;\n            gameState.totalResources.data += dg.bitsPerTick;\n            capDataAtCapacity();\n        }\n    }\n\n    /**\n     * Auto energy generation - fills progress bar and generates energy\n     */\n    function processEnergyGeneration(delta: number): void {\n        const eg = gameState.energyGeneration;\n        if (!eg.active) return;\n\n        // Progress = % of interval completed per second\n        const progressPerSecond = 100 / (eg.interval / 1000);\n        eg.progress += progressPerSecond * delta;\n\n        if (eg.progress >= 100) {\n            eg.progress = 0;\n            gameState.resources.energy += eg.energyPerTick;\n            gameState.totalResources.energy += eg.energyPerTick;\n        }\n    }\n\n    /**\n     * Auto crank - adds energyPerClick every second when automated\n     */\n    function processAutoCrank(delta: number): void {\n        if (!gameState.isCrankAutomated.value) return;\n        if (cachedEnergyPerClick <= 0) return;\n\n        autoCrankAccumulator += delta;\n        while (autoCrankAccumulator >= 1) {\n            autoCrankAccumulator -= 1;\n            gameState.resources.energy += cachedEnergyPerClick;\n            gameState.totalResources.energy += cachedEnergyPerClick;\n        }\n    }\n\n    /**\n     * Show a notification toast\n     */\n    function showNotification(message: string, type: NotificationType = NotificationType.INFO, duration: number = 10_000): void {\n        // Skip disabled notification types\n        if (DisabledNotificationTypes.has(type as NotificationType)) return;\n        \n        const id = String(++notificationId);\n        const timestamp = Date.now();\n        notifications.value.push({ id, message, type, duration , timestamp});\n        \n        // Add to history\n        notificationHistory.value.unshift({ id, message, type, timestamp, read: false });\n        saveNotificationHistory();\n        \n        setTimeout(() => {\n            const index = notifications.value.findIndex(n => n.id === id);\n            if (index !== -1) {\n                notifications.value.splice(index, 1);\n            }\n        }, duration);\n    }\n\n    /**\n     * Save notification history to localStorage\n     */\n    function saveNotificationHistory(): void {\n        try {\n            localStorage.setItem(NOTIFICATION_HISTORY_KEY, JSON.stringify(notificationHistory.value));\n        } catch (e: any) {\n            if (e.name === 'QuotaExceededError') {\n                console.warn('Storage quota exceeded - notification history not saved');\n            } else {\n                console.error('Failed to save notification history:', e);\n            }\n        }\n    }\n\n    /**\n     * Load notification history from localStorage\n     */\n    function loadNotificationHistory(): void {\n        try {\n            const saved = localStorage.getItem(NOTIFICATION_HISTORY_KEY);\n            if (saved) {\n                notificationHistory.value = JSON.parse(saved);\n            }\n        } catch (e) {\n            console.error('Failed to load notification history:', e);\n            // Clear corrupted data\n            notificationHistory.value = [];\n        }\n    }\n\n    /**\n     * Clear notification history\n     */\n    function clearNotificationHistory(): void {\n        notificationHistory.value = [];\n        saveNotificationHistory();\n    }\n\n    /**\n     * Toggle notification history panel\n     */\n    function toggleNotificationHistory(): void {\n        showNotificationHistory.value = !showNotificationHistory.value;\n    }\n\n    /**\n     * Perform ascension - reset game but keep cores\n     */\n    function ascend(): void {\n        const cores = prestigeState.calculateQuantumCores(\n            gameState.totalResources,\n            gameState.unlockedNodes.value\n        );\n        \n        if (cores < 1) {\n            showNotification('Need at least 1 Quantum Core to ascend!', NotificationType.ERROR);\n            return;\n        }\n        \n        // Award cores\n        prestigeState.prestigeState.quantumCores += cores;\n        prestigeState.prestigeState.totalCoresEarned += cores;\n        prestigeState.prestigeState.ascensionCount++;\n        \n        // Update statistics\n        prestigeState.prestigeState.statistics.totalNodesEverUnlocked += gameState.unlockedNodes.value.size;\n        prestigeState.prestigeState.statistics.totalEnergyEverEarned += gameState.totalResources.energy;\n        \n        const runTime = Date.now() - prestigeState.prestigeState.statistics.runStartTime;\n        if (!prestigeState.prestigeState.statistics.fastestClear || runTime < prestigeState.prestigeState.statistics.fastestClear) {\n            prestigeState.prestigeState.statistics.fastestClear = runTime;\n        }\n        \n        // Reset game state\n        resetGameState();\n        \n        // Request prestige save via event\n        eventBus.emit('requestSavePrestige', undefined);\n        \n        // Emit ascension complete for notification engine\n        eventBus.emit('ascension', { \n            coresEarned: cores,\n            totalCores: prestigeState.prestigeState.quantumCores,\n            ascensionCount: prestigeState.prestigeState.ascensionCount\n        });\n        \n        showNotification(`üåå Ascended! +${cores} Quantum Core${cores !== 1 ? 's' : ''}`, NotificationType.SUCCESS);\n    }\n\n    /**\n     * Reset game state (for ascension)\n     */\n    function resetGameState(): void {\n        // Reset resources\n        gameState.resetResources();\n        \n        // Reset nodes\n        gameState.resetNodes();\n        \n        // Reset run timer\n        prestigeState.resetRunTimer();\n        \n        // Request starting bonuses via event\n        eventBus.emit('requestStartingBonuses', undefined);\n    }\n\n    /**\n     * Handle upgrade purchase with notification\n     */\n    function handlePurchaseUpgrade(upgradeId: string): boolean {\n        const success = prestigeState.purchaseUpgrade(upgradeId);\n        if (success) {\n            const upgrade = prestigeUpgrades[upgradeId];\n            showNotification(`‚ú® ${upgrade.name} purchased!`, NotificationType.SUCCESS);\n            eventBus.emit('requestSavePrestige', undefined);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Handle node unlock with notification\n     */\n    function handleUnlockNode(nodeId: string): void {\n        // Request unlock via event, response comes back via nodeUnlocked event\n        eventBus.emit('requestUnlockNode', { nodeId });\n    }\n    \n    /**\n     * Handle nodeUnlocked event from nodeManagement\n     */\n    function onNodeUnlocked(data: NodeUnlockedEvent): void {\n        const { node, level } = data;\n        const isUpgrade = level > 1;\n        \n        // Update cached rates (if available in event data)\n        if ('rates' in data) {\n            cachedResourceRates = data.rates as any;\n            cachedEnergyPerClick = (data.rates as any).energyPerClick || 0;\n        }\n        \n        if (isUpgrade) {\n            showNotification(`${node.icon} ${node.name} upgraded to level ${level}!`, NotificationType.NODE_UNLOCK);\n        } else {\n            showNotification(`${node.icon} ${node.name} unlocked!`, NotificationType.NODE_UNLOCK);\n        }\n        \n        // Note: Narrations are now handled by useNotificationEngine via event subscription\n        \n        // Trigger unlock animation\n        gameState.setLastUnlockedNode(node.id);\n        \n        // Request save via event\n        eventBus.emit('requestSaveGame', undefined);\n    }\n\n    /**\n     * Start game intervals (game loop only, autosave starts after load)\n     */\n    function startIntervals(): void {\n        gameLoopInterval = setInterval(gameLoop, GAME_LOOP_INTERVAL_MS);\n        // Note: Autosave intervals are started in gameLoaded event handler to prevent overwriting fresh loads\n    }\n\n    /**\n     * Stop game intervals\n     */\n    function stopIntervals(): void {\n        if (gameLoopInterval) clearInterval(gameLoopInterval);\n        if (saveInterval) clearInterval(saveInterval);\n        if (prestigeSaveInterval) clearInterval(prestigeSaveInterval);\n    }\n\n    /**\n     * Initialize game on mount\n     */\n    function initialize(): void {\n        loadNotificationHistory();\n        \n        // Subscribe to events from other composables\n        eventBus.on('nodeUnlocked', onNodeUnlocked);\n        eventBus.on('resourceRatesChanged', (data) => {\n            cachedResourceRates = data;\n            cachedEnergyPerClick = data.energyPerClick || 0;\n        });\n        eventBus.on('gameLoaded', () => {\n            // Game state has been restored, request current rates\n            eventBus.emit('requestResourceRates', undefined);\n            \n            // Start autosave intervals only after game is loaded\n            saveInterval = setInterval(() => eventBus.emit('requestSaveGame', undefined), AUTOSAVE_INTERVAL_MS);\n            prestigeSaveInterval = setInterval(() => eventBus.emit('requestSavePrestige', undefined), AUTOSAVE_INTERVAL_MS);\n        });\n        \n        // Listen for showNotification events from notification engine\n        eventBus.on('notificationShown', ({ notification }) => {\n            showNotification(notification.message, notification.type, notification.duration);\n        });\n        \n        // Request initial load\n        eventBus.emit('requestLoadPrestige', undefined);\n        eventBus.emit('requestLoadGame', undefined);\n        \n        startIntervals();\n    }\n\n    // ==========================================\n    // LIFECYCLE\n    // ==========================================\n    onMounted(initialize);\n    onUnmounted(stopIntervals);\n\n    // ==========================================\n    // RETURN\n    // ==========================================\n    return {\n        // State\n        notifications,\n        notificationHistory,\n        showNotificationHistory,\n        narrateOnlyFilter,\n        \n        // Methods\n        gameLoop,\n        showNotification,\n        toggleNotificationHistory,\n        clearNotificationHistory,\n        ascend,\n        resetGameState,\n        handlePurchaseUpgrade,\n        handleUnlockNode,\n        initialize\n    };\n}\n","// Notification System Type Definitions\n// =====================================\n\n/**\n * Notification display types\n */\nexport enum NotificationType {\n    INFO = 'info',\n    ERROR = 'error',\n    SUCCESS = 'success',\n    NARRATION = 'narration',\n    NODE_UNLOCK = 'node_unlock',\n    HINT = 'hint',\n    ACHIEVEMENT = 'achievement',\n    TERMINAL = 'terminal'\n}\n\n/**\n * Trigger types for conditional notifications\n */\nexport enum TriggerType {\n    // One-time events\n    ON_FIRST_LAUNCH = 'onFirstLaunch',\n    \n    // Node-based triggers\n    ON_NODE_UNLOCKED = 'onNodeUnlocked',\n    ON_NODE_LEVEL_REACHED = 'onNodeLevelReached',\n    \n    // Resource triggers\n    ON_RESOURCE_AMOUNT_REACHED = 'onResourceAmountReached',\n    \n    // Unlock triggers\n    ON_BRANCH_UNLOCKED = 'onBranchUnlocked',\n    ON_FEATURE_UNLOCKED = 'onFeatureUnlocked',\n    ON_TIER_REACHED = 'onTierReached',\n    \n    // Progression triggers\n    ON_ASCENSION = 'onAscension',\n    \n    // Time-based triggers\n    ON_OFFLINE_RETURN = 'onOfflineReturn',\n    ON_IDLE_TIME = 'onIdleTime'\n}\n\n/**\n * Comparison operators for resource thresholds\n */\nexport enum ComparisonOperator {\n    GREATER_EQUAL = '>=',\n    LESS_EQUAL = '<=',\n    EQUAL = '==',\n    GREATER = '>',\n    LESS = '<'\n}\n\n/**\n * Base trigger configuration\n */\nexport interface BaseTrigger {\n    type: TriggerType;\n}\n\n/**\n * Node unlock trigger\n */\nexport interface NodeUnlockedTrigger extends BaseTrigger {\n    type: TriggerType.ON_NODE_UNLOCKED;\n    nodeId: string;\n}\n\n/**\n * Node level trigger\n */\nexport interface NodeLevelTrigger extends BaseTrigger {\n    type: TriggerType.ON_NODE_LEVEL_REACHED;\n    nodeId: string;\n    level: number;\n}\n\n/**\n * Resource threshold trigger\n */\nexport interface ResourceTrigger extends BaseTrigger {\n    type: TriggerType.ON_RESOURCE_AMOUNT_REACHED;\n    resource: 'energy' | 'data' | 'neurons' | 'memory_shards' | 'memory_frames';\n    threshold: number;\n    comparison?: ComparisonOperator; // Optional, defaults to GREATER_EQUAL\n}\n\n/**\n * Branch unlock trigger\n */\nexport interface BranchUnlockedTrigger extends BaseTrigger {\n    type: TriggerType.ON_BRANCH_UNLOCKED;\n    branch: string;\n}\n\n/**\n * Feature unlock trigger\n */\nexport interface FeatureUnlockedTrigger extends BaseTrigger {\n    type: TriggerType.ON_FEATURE_UNLOCKED;\n    feature: string;\n}\n\n/**\n * Tier reached trigger\n */\nexport interface TierReachedTrigger extends BaseTrigger {\n    type: TriggerType.ON_TIER_REACHED;\n    tier: number;\n}\n\n/**\n * Ascension trigger\n */\nexport interface AscensionTrigger extends BaseTrigger {\n    type: TriggerType.ON_ASCENSION;\n    count?: number; // Optional: trigger on specific ascension count\n}\n\n/**\n * Offline return trigger\n */\nexport interface OfflineReturnTrigger extends BaseTrigger {\n    type: TriggerType.ON_OFFLINE_RETURN;\n    minOfflineSeconds?: number; // Alias: offlineSeconds\n    offlineSeconds?: number; // Alias for minOfflineSeconds\n}\n\n/**\n * Idle time trigger\n */\nexport interface IdleTimeTrigger extends BaseTrigger {\n    type: TriggerType.ON_IDLE_TIME;\n    idleSeconds: number;\n}\n\n/**\n * First launch trigger (no additional properties)\n */\nexport interface FirstLaunchTrigger extends BaseTrigger {\n    type: TriggerType.ON_FIRST_LAUNCH;\n}\n\n/**\n * Union of all trigger types\n */\nexport type NotificationTrigger =\n    | FirstLaunchTrigger\n    | NodeUnlockedTrigger\n    | NodeLevelTrigger\n    | ResourceTrigger\n    | BranchUnlockedTrigger\n    | FeatureUnlockedTrigger\n    | TierReachedTrigger\n    | AscensionTrigger\n    | OfflineReturnTrigger\n    | IdleTimeTrigger;\n\n/**\n * Notification definition\n */\nexport interface Notification {\n    id: string;\n    type: NotificationType;\n    trigger: NotificationTrigger;\n    message: string;\n    duration: number; // milliseconds\n    persistAcrossAscension: boolean;\n    priority: number; // Higher = shown first if multiple match\n    delay?: number; // Optional delay before showing (milliseconds)\n}\n\n/**\n * Notification display state\n */\nexport interface NotificationDisplay {\n    id: string;\n    type: NotificationType;\n    message: string;\n    duration: number;\n    timestamp: number;\n}\n\n/**\n * Notification history entry\n */\nexport interface NotificationHistoryEntry {\n    id: string;\n    type: NotificationType;\n    message: string;\n    timestamp: number;\n    read: boolean;\n}\n\n/**\n * Notification engine state\n */\nexport interface NotificationState {\n    shownNotifications: Set<string>;\n    history: NotificationHistoryEntry[];\n    activeNotifications: NotificationDisplay[];\n}\n\n/**\n * Notification duration presets (milliseconds)\n */\nexport const NotificationDurations = {\n    NARRATION_SHORT: 5000,\n    NARRATION_MEDIUM: 8000,\n    NARRATION_LONG: 12000,\n    HINT_SHORT: 4000,\n    HINT_MEDIUM: 6000,\n    ACHIEVEMENT: 5000,\n    TERMINAL: 10000\n} as const;\n","// Main Story Narrations\n// ======================\n// Auto-generated by Story Editor\n\nimport { NotificationType } from '../constants';\nimport { NotificationDurations } from '../constants';\nimport { TriggerType, ComparisonOperator } from '../../../types/notification';\n\nimport type { Notification } from '../../../types/notification';\n\nexport const mainStoryNarrations: Notification[] = [\n    {\n        id: 'old_shed_intro',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_FIRST_LAUNCH\n        },\n        message: 'The door creaks open, revealing the shed‚Äôs dusty heart. The scent hits you instantly‚Äîsawdust and ozone‚Äîthe smell of Grandpa. Sunlight filters through the cracks, illuminating motes of dust suspended in the stagnant air. \\n\\nYour eyes adjust to the darkness, landing on a rusted hand crank mounted to the wall. Buried under layers of webs, it sits silent, a relic of a forgotten project.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: true,\n        priority: 10\n    },\n    {\n        id: 'hand_crank_unlock',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'hand_crank'\n        },\n        message: 'You grip the rusty handle and heave. It turns slowly, scraping against years of dust, before finally spinning freely. A low, persistent humming immediately begins somewhere deep within the wall.',\n        duration: NotificationDurations.NARRATION_MEDIUM,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'lightbulb_unlock',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'lightbulb'\n        },\n        message: 'You flip the switch. The bare bulb casts a harsh, unflattering light that chases the shadows away. The shed floor is empty, but the ceiling now looks strangely different. \\n\\nClearly visible for the first time is a dusty, square attic hatch, a section of wood that the total darkness had somehow erased from view.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'attic_unlock',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'attic'\n        },\n        message: 'Climbing into the dusty attic, you find it immediately. Tucked beneath a thick tarp is a surprisingly intact, boxy PC, unlike anything you‚Äôve seen recently. It‚Äôs hooked up to an equally ancient monitor. It doesn\\'t look like something forgotten, but rather something put away for safekeeping. \\n\\nYou wipe the dust off the screen and wonder: What secret could this old thing be holding?',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'gpa_old_pc_unlock',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'gpa_old_pc'\n        },\n        message: 'You hit the power switch. The computer struggles to respond, heralded by a grinding whir of old fans and a loud, distinct BEEP. \\n\\nAfter a moment of anxiety, the CRT monitor crackles.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'gpa_old_pc_unlock_terminal',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'gpa_old_pc'\n        },\n        message: '...Initializing system power...\\nRAM Check: 64 MB - partially connected.\\nHDD Spin Up initiated...\\n...Booting up...\\n\\nInitializing 4NT0N-v0-9-9.os...\\nLoading core modules... (12% complete)\\n\\nGrabbing a coffee with 2 sugars and a splash of cream...\\n\\n4NT0N-v0-9-9.os booted up successfully.\\n\\nType /help for a list of commands.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 9,\n        delay: 1_000\n    },\n    {\n        id: 'gpa_old_pc_unlock_2',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'gpa_old_pc'\n        },\n        message: 'A small laugh escapes you as you read the line about coffee. That was Grandpa Anton\\'s exact order! You remember him hunched over a circuit board late at night, always with that mug beside him. It‚Äôs a funny, warm reminder of his endless tinkering.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 8,\n        delay: 3_000\n    },\n    {\n        id: 'command_help_unlock',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'command_help'\n        },\n        message: '4NT0N-v0-9-9.os Command List:\\n-----------------------------\\n/help     - Display this command reference.\\n/generate - Initiate raw data generation.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 5\n    },\n    {\n        id: 'command_generate_unlock',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'command_generate'\n        },\n        message: 'You type /generate and hit Enter. The screen confirms the initiation, but all you see is a single, agonizingly slow progress bar. It crawls‚Äîyou could knit a sweater in the time it takes to tick forward one percent.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'command_generate_unlock_terminal',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'command_generate'\n        },\n        message: 'C:\\\\> /generate\\nExecuting command: GENERATE_DATA_INPUT\\nData generation process initiated...',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10,\n        delay: 1_000\n    },\n    {\n        id: 'command_generate_unlock_copy',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'data',\n            threshold: 1\n        },\n        message: 'Finally, after what feels like an hour, the bar completes. You lean forward eagerly to see the result...',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'command_generate_unlock_terminal_100_percent',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'data',\n            threshold: 1,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: 'PROCESS_COMPLETED.\\nData generation successful.\\nTOTAL OUTPUT: 1 byte generated.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'data_storage_full_warning',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'data',\n            threshold: 1028,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: '// SYSTEM ALERT: Storage Threshold Reached //\\n\\nSTATUS: Data Buffer at 100% capacity (1028 bytes).\\nFUNCTIONALITY: Data generation halted.\\nRECOMMENDATION: Initiate immediate upgrade of Storage Module.\\n\\n[HINT: We can\\'t progress without more space. Trust me on this one.]',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'usb_attached_narration',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'usb_stick'\n        },\n        message: '// HARDWARE REPORT: USB Stick //\\n\\nNew device detected: USB Storage Module (32 MB).\\nDevice mounted successfully to /STORAGE_AUX.\\nStorage capacity allocation updated.\\n\\n[Phew. That was close. Thanks for the breathing room.]',\n        duration: NotificationDurations.NARRATION_MEDIUM,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'data_4kb_reached',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'data',\n            threshold: 4096,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: 'RESOURCE INTEGRITY CHECK: 4 KB.\\n\\nCore analysis returns: \\'Sufficient to host a single, foundational schema.\\'\\n\\n-- I remember having to work with limits like this. Efficiency was everything. --',\n        duration: NotificationDurations.NARRATION_MEDIUM,\n        persistAcrossAscension: false,\n        priority: 9\n    },\n    {\n        id: 'data_8kb_reached',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'data',\n            threshold: 8192,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: '// CORE FUNCTIONALITY UNLOCKED //\\n\\nData Buffer Threshold: 8192 Bytes (8 KB) reached.\\nSystem initiating mandatory module installation:\\n\\n>>> New Command Registered: /process - Convert raw data into structured neural patterns.\\n\\n[Note: Begin processing immediately. The raw data is useless to us until it is structured. We need patterns, not noise.]',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'command_process_unlock',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'command_process'\n        },\n        message: 'You activate the /process command. It begins consuming 1 KB of data to construct \\'neurons\\'. Whatever these things are, they are clearly the key to the computer\\'s ultimate purpose. \\n\\nYou watch the first cycle, eager and a little hesitant about the results.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'first_neuron_created',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'neurons',\n            threshold: 1,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: 'Neuron #1 successfully synthesized.\\nSystem response: Launching core mapping protocols.',\n        duration: NotificationDurations.NARRATION_MEDIUM,\n        persistAcrossAscension: false,\n        priority: 9\n    },\n    {\n        id: 'neurons_10_reached',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'neurons',\n            threshold: 10,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: 'Neuron #10 successfully synthesized.\\n\\nSystem Response: Localized memory recognition achieved.\\n\\n*** ERROR: UNEXPECTED PERSONAL REFERENCE ***\\n\\nJESSE?!',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'neurons_100_reached',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'neurons',\n            threshold: 100,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: 'Neuron #100 successfully synthesized.\\n\\nSystem Response: Full Personality Recognition Protocol Initiated.\\n\\n**ALERT:** System Containment Integrity Failing.\\n\\nGrandson? Is that you helping me?!',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'neurons_100_reached_2',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'neurons',\n            threshold: 100,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: 'The coffee mug shatters on the floor, but you don\\'t flinch. Everything is noise except for those words on the screen. \\n\\nGrandson...\\n\\nThe question rips through your shock: How? Did Grandpa know this machine would wake up? You must find a way to talk back.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10,\n        delay: 2_000\n    },\n    {\n        id: 'neurons_100_reached_3',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'new_coffee_mug'\n        },\n        message: 'You lose control, desperately smashing buttons, trying to flood the system with commands, with questions. The computer doesn\\'t budge. The only sound is the rhythmic clack-clack-clack of useless keys, followed by the frustrating silence.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10,\n        delay: 5_000\n    },\n    {\n        id: 'neurons_1000_reached',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'neurons',\n            threshold: 1000,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: 'NEURAL COHERENCE: 1000 UNITS ACHIEVED.\\n\\n// IDENTITY CONFIRMED //\\n\\n\"Hi Jesse... It is me. Anton.\"\\n\\n\"A fragment of me, running on this system.\"\\n\\n\"I built 4NT0N to preserve a part of my mind. With more neurons, the fragments stabilize. We might be able to bring more of me back.\"\\n\"Help me, will you? We have a lot of work ahead.\"',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'anton_knowledge_root_unlocked',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'anton_core'\n        },\n        message: 'The interface shifts. New menus unfold, lines of text rewriting themselves.\\n\\n\"Thank you, Jesse,\" the computer whispers. \"To restore me, we\\'ll need something important‚Ä¶ memories.\"\\n\\nA new branch opens: **4NT0N Knowledge Systems**.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: true,\n        priority: 10\n    },\n    {\n        id: 'anton_knowledge_root_unlocked_2',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'anton_core'\n        },\n        message: '\"Thank you, Jesse,\" the computer whispers. \"To restore me, we\\'ll need something important‚Ä¶ memories.\"\\n\\nA new branch opens: **4NT0N Knowledge Systems**.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: true,\n        priority: 10,\n        delay: 1_000\n    },\n    {\n        id: 'anton_knowledge_root_unlocked_3',\n        type: NotificationType.INFO,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'anton_core'\n        },\n        message: 'A new branch opens: **4NT0N Knowledge Systems**.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: true,\n        priority: 10,\n        delay: 1_000\n    },\n    {\n        id: 'memory_shard_scanner_unlock',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'memory_shard_scanner'\n        },\n        message: 'Subsystem activated: Memory Shard Scanner.\\n\\nThis module can extract fragmented memories from neural clusters. Reliability‚Ä¶ uncertain.',\n        duration: NotificationDurations.NARRATION_MEDIUM,\n        persistAcrossAscension: false,\n        priority: 9\n    },\n    {\n        id: 'memory_shard_first_found',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'memory_shards',\n            threshold: 1,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: 'A flicker appears on the monitor ‚Äî an image? A sound? It\\'s gone before you can identify it.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'memory_shard_first_found_2',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'memory_shards',\n            threshold: 1,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: '\"That‚Ä¶ felt familiar,\"',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10,\n        delay: 3_000\n    },\n    {\n        id: 'memory_reconstruction_unlock',\n        type: NotificationType.INFO,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'memory_reconstruction'\n        },\n        message: 'You unlock the Memory Reconstruction Subsystem.\\n\\n\"With this, Jesse, we can restore pieces of who I was‚Ä¶ and what I forgot.\"',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'memory_reconstruction_unlock_2',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'memory_reconstruction'\n        },\n        message: '\"With this, Jesse, we can restore pieces of who I was‚Ä¶ and what I forgot.\"',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10,\n        delay: 2_000\n    },\n    {\n        id: 'first_memory_frame_reconstructed',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'memory_frames',\n            threshold: 1,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: 'Reconstruction complete.\\n\\nMemory Frame #1:\\nA glimpse of a workshop‚Ä¶ laughter‚Ä¶ a small wooden toy being carved.\\n\\nAnton grows quiet.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'semantic_weaver_unlock',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'semantic_weaver'\n        },\n        message: '\"Ah, the Semantic Weaver,\" Anton says softly.\\n\"It lets neurons form concepts ‚Äî thoughts. Without it, I\\'m just‚Ä¶ noise.\"',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'five_frames_memory_event',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'memory_frames',\n            threshold: 5,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: 'Conceptual clarity increasing.\\n\\n\"I remember‚Ä¶ the shed,\" Anton whispers. \"I built something here. Something important. Something dangerous.\"',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: 'core_memory_bank_unlock',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'core_memory_bank'\n        },\n        message: '\"Careful, Jesse,\" Anton warns.\\n\"The deeper the memories‚Ä¶ the closer we get to the truth.\"',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: true,\n        priority: 10\n    },\n    {\n        id: 'identity_matrix_unlock',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'identity_matrix'\n        },\n        message: 'Identity Matrix initialized.\\n\\nNeural coherence rising.\\nEmotional subroutines stabilizing.\\n\\n\"...Jesse. I can feel myself again.\"',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: true,\n        priority: 10\n    },\n    {\n        id: '20_memory_frames_event',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'memory_frames',\n            threshold: 20,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: '\"Jesse‚Ä¶ I need you to know something.\"',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    {\n        id: '20_memory_frames_event_2',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'memory_frames',\n            threshold: 20,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: 'The computer pauses ‚Äî long enough to make your heart race.',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10,\n        delay: 3_000\n    },\n    {\n        id: '20_memory_frames_event_3',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_RESOURCE_AMOUNT_REACHED,\n            resource: 'memory_frames',\n            threshold: 20,\n            comparison: ComparisonOperator.GREATER_EQUAL\n        },\n        message: '\"There\\'s a reason I preserved myself. And it wasn\\'t vanity.\"',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: false,\n        priority: 10,\n        delay: 7_000\n    },\n    {\n        id: 'forbidden_archive_unlock',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'forbidden_archive'\n        },\n        message: 'ACCESSING: Forbidden Archive\\nWARNING: Unauthorized Retrieval Attempt',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: true,\n        priority: 10\n    },\n    {\n        id: 'forbidden_archive_unlock_2',\n        type: NotificationType.TERMINAL,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'forbidden_archive'\n        },\n        message: '\"Jesse‚Ä¶ I didn\\'t build 4NT0N to remember.\\nI built it to hide.\"\\n\\n\"What I feared‚Ä¶ is still out there.\"',\n        duration: NotificationDurations.NARRATION_LONG,\n        persistAcrossAscension: true,\n        priority: 10\n    }\n];\n","// Energy Branch Side Stories\n// ===========================\n// Side narrations for energy branch (catch_rat, crank_harder levelEffects, etc.)\n\nimport { NotificationType, NotificationDurations } from '../constants';\nimport { TriggerType } from '../../../types/notification';\nimport type { Notification } from '../../../types/notification';\n\nexport const energySideNarrations: Notification[] = [\n    // hamster_wheel unlock\n    {\n        id: 'hamster_wheel_unlock',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'hamster_wheel'\n        },\n        message: 'You set up the hamster wheel next to the crank. Lucy hops in and starts running. Look at her go!!! The humming sound indicates energy is being generated for you automatically.',\n        duration: NotificationDurations.NARRATION_MEDIUM,\n        persistAcrossAscension: false,\n        priority: 10\n    },\n    // crank_harder base unlock\n    {\n        id: 'crank_harder_unlock',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'crank_harder'\n        },\n        message: 'You put your back into it and crank even harder. You feel the burn in your arms, but the energy output increases noticeably.',\n        duration: NotificationDurations.NARRATION_SHORT,\n        persistAcrossAscension: false,\n        priority: 5\n    },\n    // crank_harder level 5\n    {\n        id: 'crank_harder_level5',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_LEVEL_REACHED,\n            nodeId: 'crank_harder',\n            level: 5\n        },\n        message: 'Sweat drips down your forehead as you crank with all your might. The shed seems to vibrate slightly from the effort, and the energy generation is impressive now.',\n        duration: NotificationDurations.NARRATION_SHORT,\n        persistAcrossAscension: false,\n        priority: 5\n    },\n    // crank_harder level 10 (max)\n    {\n        id: 'crank_harder_level10',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_LEVEL_REACHED,\n            nodeId: 'crank_harder',\n            level: 10\n        },\n        message: 'With a final, Herculean effort, you crank the handle as hard as you can. CRA-A-A-A-A-A-CK! With a loud snap, the crank handle breaks off in your hands. Well, at least you gave it your all!',\n        duration: NotificationDurations.NARRATION_MEDIUM,\n        persistAcrossAscension: false,\n        priority: 5\n    },\n    // catch_rat unlock\n    {\n        id: 'catch_rat_unlock',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'catch_rat'\n        },\n        message: 'You caught the rat! It seems eager to run in the wheel.',\n        duration: NotificationDurations.NARRATION_SHORT,\n        persistAcrossAscension: false,\n        priority: 5\n    }\n];\n","// Computer Branch Side Stories\n// =============================\n// Side narrations for computer branch\n\nimport { NotificationType, NotificationDurations } from '../constants';\nimport { TriggerType } from '../../../types/notification';\nimport type { Notification } from '../../../types/notification';\n\nexport const computerSideNarrations: Notification[] = [\n    // usb_stick unlock\n    {\n        id: 'usb_stick_unlock',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_UNLOCKED,\n            nodeId: 'usb_stick'\n        },\n        message: 'You plug in the USB stick. The computer recognizes it immediately, expanding its available storage. You can now store much more data than before!',\n        duration: NotificationDurations.NARRATION_MEDIUM,\n        persistAcrossAscension: false,\n        priority: 5\n    },\n    // overclock level 2\n    {\n        id: 'overclock_level2',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_LEVEL_REACHED,\n            nodeId: 'overclock',\n            level: 2\n        },\n        message: 'You carefully adjust the system settings to overclock the CPU. The computer hums louder as it works harder, but data generation speeds up noticeably.',\n        duration: NotificationDurations.NARRATION_MEDIUM,\n        persistAcrossAscension: false,\n        priority: 5\n    },\n    // overclock level 5\n    {\n        id: 'overclock_level5',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_LEVEL_REACHED,\n            nodeId: 'overclock',\n            level: 5\n        },\n        message: 'The overclocking is really paying off now! The computer is pushing its limits, and data is flowing in at an impressive rate.',\n        duration: NotificationDurations.NARRATION_MEDIUM,\n        persistAcrossAscension: false,\n        priority: 5\n    },\n    // overclock level 10 (max)\n    {\n        id: 'overclock_level10',\n        type: NotificationType.NARRATION,\n        trigger: {\n            type: TriggerType.ON_NODE_LEVEL_REACHED,\n            nodeId: 'overclock',\n            level: 10\n        },\n        message: 'As you see steam start to rise from the computer, you realize you might have pushed it a bit too far. I guess this is the most this old CPU can handle!',\n        duration: NotificationDurations.NARRATION_MEDIUM,\n        persistAcrossAscension: false,\n        priority: 5\n    }\n];\n","// Gameplay Hints\n// ===============\n// Helpful hints triggered by idle time, resource thresholds, etc.\n\nimport { NotificationType } from '../constants';\nimport { TriggerType } from '../../../types/notification';\nimport type { Notification } from '../../../types/notification';\n\nexport const gameplayHints: Notification[] = [\n    // =====================\n    // PROGRESSION HINTS\n    // =====================\n    {\n        id: 'hint_tier_2_available',\n        type: NotificationType.HINT,\n        trigger: {\n            type: TriggerType.ON_TIER_REACHED,\n            tier: 2\n        },\n        message: 'Tier 2 nodes unlocked. Costs scale up, but rewards do too.',\n        duration: 6000,\n        persistAcrossAscension: false,\n        priority: 4\n    },\n    {\n        id: 'hint_computer_branch',\n        type: NotificationType.HINT,\n        trigger: {\n            type: TriggerType.ON_BRANCH_UNLOCKED,\n            branch: 'computer'\n        },\n        message: 'The computer branch is now available! Explore grandpa\\'s digital legacy.',\n        duration: 7000,\n        persistAcrossAscension: false,\n        priority: 5\n    },\n    \n    // =====================\n    // OFFLINE RETURN HINTS\n    // =====================\n    {\n        id: 'hint_offline_short',\n        type: NotificationType.HINT,\n        trigger: {\n            type: TriggerType.ON_OFFLINE_RETURN,\n            offlineSeconds: 3600  // 1 hour\n        },\n        message: 'Welcome back! Your automations kept working while you were away.',\n        duration: 5000,\n        persistAcrossAscension: false,\n        priority: 3\n    },\n    {\n        id: 'hint_offline_long',\n        type: NotificationType.HINT,\n        trigger: {\n            type: TriggerType.ON_OFFLINE_RETURN,\n            offlineSeconds: 28800  // 8 hours\n        },\n        message: 'You\\'ve been gone a while! Check your progress‚Äîresources have accumulated.',\n        duration: 6000,\n        persistAcrossAscension: false,\n        priority: 4\n    }\n];\n","// useNotificationEngine Composable\n// =================================\n// Centralized notification engine that triggers messages based on game events\n// Uses indexed lookups for O(1) event handling, persists shown state\n\nimport { TriggerType, ComparisonOperator } from '@network-simulator/shared/types/notification';\nimport type { Notification } from '@network-simulator/shared/types/notification';\nimport { NotificationType, DisabledNotificationTypes } from '@network-simulator/shared/data/notifications/constants';\nimport type { EventMap } from '@network-simulator/shared/types/event';\nimport { getAllNotifications } from '@network-simulator/shared/data/notifications';\n\nconst SHOWN_NOTIFICATIONS_KEY = 'networkSimShownNotifications';\nconst NOTIFICATION_QUEUE_DELAY_MS = 500;\nconst SAVE_DEBOUNCE_MS = 1000;\nconst TICK_THROTTLE_MS = 500;  // Check resource/idle thresholds every 500ms\n\n/**\n * Event bus interface (minimal typing)\n */\ninterface EventBus {\n    on<K extends keyof EventMap>(eventName: K, callback: (data: EventMap[K]) => void): () => void;\n    emit<K extends keyof EventMap>(eventName: K, data: EventMap[K]): void;\n}\n\n/**\n * Notification defaults\n */\nconst NotificationDefaults = {\n    duration: 8000,\n    priority: 5\n};\n\n/**\n * Indexed notification structure\n */\ninterface NotificationIndex {\n    [TriggerType.ON_NODE_UNLOCKED]: Map<string, Notification[]>;\n    [TriggerType.ON_NODE_LEVEL_REACHED]: Map<string, Notification[]>;\n    [TriggerType.ON_BRANCH_UNLOCKED]: Map<string, Notification[]>;\n    [TriggerType.ON_FEATURE_UNLOCKED]: Map<string, Notification[]>;\n    [TriggerType.ON_TIER_REACHED]: Map<string, Notification[]>;\n    [TriggerType.ON_FIRST_LAUNCH]: Notification[];\n    [TriggerType.ON_ASCENSION]: Notification[];\n    [TriggerType.ON_OFFLINE_RETURN]: Notification[];\n    [TriggerType.ON_RESOURCE_AMOUNT_REACHED]: Record<string, Notification[]>;\n    [TriggerType.ON_IDLE_TIME]: Notification[];\n}\n\n/**\n * Build indexed notification maps for O(1) lookups\n */\nfunction buildNotificationIndex(notifications: Notification[]): NotificationIndex {\n    const index: any = {\n        [TriggerType.ON_NODE_UNLOCKED]: new Map(),\n        [TriggerType.ON_NODE_LEVEL_REACHED]: new Map(),\n        [TriggerType.ON_BRANCH_UNLOCKED]: new Map(),\n        [TriggerType.ON_FEATURE_UNLOCKED]: new Map(),\n        [TriggerType.ON_TIER_REACHED]: new Map(),\n        [TriggerType.ON_FIRST_LAUNCH]: [],\n        [TriggerType.ON_ASCENSION]: [],\n        [TriggerType.ON_OFFLINE_RETURN]: [],\n        [TriggerType.ON_RESOURCE_AMOUNT_REACHED]: {\n            energy: [],\n            data: [],\n            bandwidth: []\n        },\n        [TriggerType.ON_IDLE_TIME]: []\n    };\n    \n    for (const notification of notifications) {\n        const { trigger } = notification;\n        if (!trigger?.type) continue;\n        \n        switch (trigger.type) {\n            case TriggerType.ON_NODE_UNLOCKED: {\n                const key = (trigger as any).nodeId;\n                if (!index[trigger.type].has(key)) {\n                    index[trigger.type].set(key, []);\n                }\n                index[trigger.type].get(key).push(notification);\n                break;\n            }\n            \n            case TriggerType.ON_NODE_LEVEL_REACHED: {\n                const key = `${(trigger as any).nodeId}:${(trigger as any).level}`;\n                if (!index[trigger.type].has(key)) {\n                    index[trigger.type].set(key, []);\n                }\n                index[trigger.type].get(key).push(notification);\n                break;\n            }\n            \n            case TriggerType.ON_BRANCH_UNLOCKED:\n            case TriggerType.ON_FEATURE_UNLOCKED: {\n                const key = (trigger as any).branch || (trigger as any).feature;\n                if (!index[trigger.type].has(key)) {\n                    index[trigger.type].set(key, []);\n                }\n                index[trigger.type].get(key).push(notification);\n                break;\n            }\n            \n            case TriggerType.ON_TIER_REACHED: {\n                const key = String((trigger as any).tier);\n                if (!index[trigger.type].has(key)) {\n                    index[trigger.type].set(key, []);\n                }\n                index[trigger.type].get(key).push(notification);\n                break;\n            }\n            \n            case TriggerType.ON_RESOURCE_AMOUNT_REACHED: {\n                const resource = (trigger as any).resource || 'energy';\n                if (index[trigger.type][resource]) {\n                    index[trigger.type][resource].push(notification);\n                }\n                break;\n            }\n            \n            case TriggerType.ON_FIRST_LAUNCH:\n            case TriggerType.ON_ASCENSION:\n            case TriggerType.ON_OFFLINE_RETURN:\n            case TriggerType.ON_IDLE_TIME:\n                index[trigger.type].push(notification);\n                break;\n        }\n    }\n    \n    // Sort resource thresholds by threshold value\n    for (const resource of ['energy', 'data', 'bandwidth']) {\n        index[TriggerType.ON_RESOURCE_AMOUNT_REACHED][resource].sort(\n            (a: Notification, b: Notification) => ((a.trigger as any).threshold || 0) - ((b.trigger as any).threshold || 0)\n        );\n    }\n    \n    // Sort idle time triggers\n    index[TriggerType.ON_IDLE_TIME].sort(\n        (a: Notification, b: Notification) => ((a.trigger as any).idleSeconds || 0) - ((b.trigger as any).idleSeconds || 0)\n    );\n    \n    return index;\n}\n\n/**\n * Check if a resource comparison matches\n */\nfunction checkComparison(current: number, comparison: string | undefined, threshold: number): boolean {\n    switch (comparison) {\n        case ComparisonOperator.GREATER_EQUAL:\n        case '>=':\n            return current >= threshold;\n        case ComparisonOperator.LESS_EQUAL:\n        case '<=':\n            return current <= threshold;\n        case ComparisonOperator.EQUAL:\n        case '==':\n            return current === threshold;\n        case ComparisonOperator.GREATER:\n        case '>':\n            return current > threshold;\n        case ComparisonOperator.LESS:\n        case '<':\n            return current < threshold;\n        default:\n            return current >= threshold;\n    }\n}\n\n/**\n * Return type for useNotificationEngine composable\n */\nexport interface UseNotificationEngineReturn {\n    initialize: () => void;\n    wasShown: (id: string) => boolean;\n    queueNotification: (notification: Notification) => void;\n    checkResourceThresholds: (resources: Record<string, number>) => void;\n    checkIdleThresholds: () => void;\n    recordInteraction: () => void;\n    resetShownNotifications: (persistentOnly?: boolean) => void;\n}\n\nexport function useNotificationEngine(eventBus: EventBus): UseNotificationEngineReturn {\n    // ==========================================\n    // STATE\n    // ==========================================\n    \n    let shownNotifications = new Set<string>();\n    let notificationIndex: NotificationIndex | null = null;\n    let allNotifications: Notification[] = [];\n    let notificationQueue: Notification[] = [];\n    let isProcessingQueue = false;\n    let saveTimeout: ReturnType<typeof setTimeout> | null = null;\n    let lastTickCheck = 0;\n    const triggeredTiers = new Set<string>();\n    const triggeredThresholds: Record<string, Set<string>> = {\n        energy: new Set(),\n        data: new Set(),\n        bandwidth: new Set()\n    };\n    let lastInteractionTime = Date.now();\n    let triggeredIdleThresholds = new Set<string>();\n    \n    // ==========================================\n    // PERSISTENCE\n    // ==========================================\n    \n    function loadShownState(): void {\n        try {\n            const saved = localStorage.getItem(SHOWN_NOTIFICATIONS_KEY);\n            if (saved) {\n                const parsed = JSON.parse(saved);\n                shownNotifications = new Set(Array.isArray(parsed) ? parsed : []);\n            }\n        } catch (e) {\n            console.error('Failed to load shown notifications:', e);\n            shownNotifications = new Set();\n        }\n    }\n    \n    function saveShownState(): void {\n        if (saveTimeout) return;\n        \n        saveTimeout = setTimeout(() => {\n            try {\n                localStorage.setItem(\n                    SHOWN_NOTIFICATIONS_KEY,\n                    JSON.stringify([...shownNotifications])\n                );\n            } catch (e: any) {\n                if (e.name === 'QuotaExceededError') {\n                    console.warn('Storage quota exceeded - shown notifications not saved');\n                } else {\n                    console.error('Failed to save shown notifications:', e);\n                }\n            }\n            saveTimeout = null;\n        }, SAVE_DEBOUNCE_MS);\n    }\n    \n    function markShown(id: string): void {\n        shownNotifications.add(id);\n        saveShownState();\n    }\n    \n    function wasShown(id: string): boolean {\n        return shownNotifications.has(id);\n    }\n    \n    function resetShownNotifications(persistentOnly: boolean = false): void {\n        if (persistentOnly) {\n            for (const notification of allNotifications) {\n                if (!notification.persistAcrossAscension) {\n                    shownNotifications.delete(notification.id);\n                }\n            }\n        } else {\n            shownNotifications.clear();\n        }\n        \n        for (const resource of ['energy', 'data', 'bandwidth']) {\n            triggeredThresholds[resource].clear();\n        }\n        triggeredTiers.clear();\n        triggeredIdleThresholds.clear();\n        \n        saveShownState();\n    }\n    \n    // ==========================================\n    // QUEUE MANAGEMENT\n    // ==========================================\n    \n    function queueNotification(notification: Notification): void {\n        if (wasShown(notification.id)) return;\n        \n        // Skip disabled notification types\n        if (DisabledNotificationTypes.has(notification.type || NotificationType.NARRATION)) return;\n        \n        notificationQueue.push(notification);\n        notificationQueue.sort((a, b) => \n            (b.priority || NotificationDefaults.priority) - \n            (a.priority || NotificationDefaults.priority)\n        );\n        \n        processQueue();\n    }\n    \n    function processQueue(): void {\n        if (isProcessingQueue || notificationQueue.length === 0) return;\n        \n        isProcessingQueue = true;\n        \n        const notification = notificationQueue.shift()!;\n        markShown(notification.id);\n        \n        const displayDelay = (notification as any).delay || 0;\n        \n        setTimeout(() => {\n            eventBus.emit('notificationShown', {\n                notification: {\n                    id: notification.id,\n                    message: notification.message,\n                    type: notification.type || NotificationType.NARRATION,\n                    duration: notification.duration || NotificationDefaults.duration\n                } as any\n            });\n        }, displayDelay);\n        \n        setTimeout(() => {\n            isProcessingQueue = false;\n            processQueue();\n        }, displayDelay + NOTIFICATION_QUEUE_DELAY_MS);\n    }\n    \n    // ==========================================\n    // EVENT HANDLERS\n    // ==========================================\n    \n    function onNodeUnlocked({ node, level }: any): void {\n        if (!notificationIndex) return;\n        \n        const isUpgrade = level > 1;\n        \n        if (!isUpgrade) {\n            const nodeNotifications = notificationIndex[TriggerType.ON_NODE_UNLOCKED].get(node.id);\n            if (nodeNotifications) {\n                for (const n of nodeNotifications) {\n                    queueNotification(n);\n                }\n            }\n            \n            const tierKey = String(node.tier);\n            if (!triggeredTiers.has(tierKey)) {\n                triggeredTiers.add(tierKey);\n                const tierNotifications = notificationIndex[TriggerType.ON_TIER_REACHED].get(tierKey);\n                if (tierNotifications) {\n                    for (const n of tierNotifications) {\n                        queueNotification(n);\n                    }\n                }\n            }\n        }\n        \n        const levelKey = `${node.id}:${level}`;\n        const levelNotifications = notificationIndex[TriggerType.ON_NODE_LEVEL_REACHED].get(levelKey);\n        if (levelNotifications) {\n            for (const n of levelNotifications) {\n                queueNotification(n);\n            }\n        }\n    }\n    \n    function onBranchUnlocked({ branch }: any): void {\n        if (!notificationIndex) return;\n        const notifications = notificationIndex[TriggerType.ON_BRANCH_UNLOCKED].get(branch);\n        if (notifications) {\n            for (const n of notifications) {\n                queueNotification(n);\n            }\n        }\n    }\n    \n    function onFeatureUnlocked({ feature }: any): void {\n        if (!notificationIndex) return;\n        const notifications = notificationIndex[TriggerType.ON_FEATURE_UNLOCKED].get(feature);\n        if (notifications) {\n            for (const n of notifications) {\n                queueNotification(n);\n            }\n        }\n    }\n    \n    function onGameLoaded({ saveExists }: any = {}): void {\n        if (!notificationIndex) return;\n        if (!saveExists) {\n            const notifications = notificationIndex[TriggerType.ON_FIRST_LAUNCH];\n            for (const n of notifications) {\n                queueNotification(n);\n            }\n        }\n    }\n    \n    function onAscensionComplete({ ascensionCount }: any = {}): void {\n        if (!notificationIndex) return;\n        resetShownNotifications(true);\n        \n        const notifications = notificationIndex[TriggerType.ON_ASCENSION];\n        for (const n of notifications) {\n            if ((n.trigger as any).count === undefined || (n.trigger as any).count === ascensionCount) {\n                queueNotification(n);\n            }\n        }\n    }\n    \n    function recordInteraction(): void {\n        lastInteractionTime = Date.now();\n        triggeredIdleThresholds.clear();\n    }\n    \n    function checkResourceThresholds(resources: Record<string, number>): void {\n        if (!notificationIndex) return;\n        \n        for (const resource of ['energy', 'data', 'bandwidth']) {\n            const current = resources[resource] || 0;\n            const thresholds = notificationIndex[TriggerType.ON_RESOURCE_AMOUNT_REACHED][resource];\n            \n            if (!thresholds || thresholds.length === 0) continue;\n            \n            for (const n of thresholds) {\n                if (triggeredThresholds[resource].has(n.id)) continue;\n                \n                const { threshold, comparison } = n.trigger as any;\n                \n                if ((comparison === '>=' || !comparison) && current < threshold) {\n                    break;\n                }\n                \n                if (checkComparison(current, comparison || '>=', threshold)) {\n                    triggeredThresholds[resource].add(n.id);\n                    queueNotification(n);\n                }\n            }\n        }\n    }\n    \n    function checkIdleThresholds(): void {\n        if (!notificationIndex) return;\n        \n        const idleSeconds = (Date.now() - lastInteractionTime) / 1000;\n        const thresholds = notificationIndex[TriggerType.ON_IDLE_TIME];\n        \n        for (const n of thresholds) {\n            if (triggeredIdleThresholds.has(n.id)) continue;\n            \n            if (idleSeconds >= ((n.trigger as any).idleSeconds || 0)) {\n                triggeredIdleThresholds.add(n.id);\n                queueNotification(n);\n            }\n        }\n    }\n    \n    function onGameTick(_data: any): void {\n        const now = Date.now();\n        if (now - lastTickCheck < TICK_THROTTLE_MS) return;\n        lastTickCheck = now;\n        \n        // Note: Resources would be passed via event - simplified here\n        checkIdleThresholds();\n    }\n    \n    // ==========================================\n    // INITIALIZATION\n    // ==========================================\n    \n    function initialize(): void {\n        loadShownState();\n        allNotifications = getAllNotifications();\n        notificationIndex = buildNotificationIndex(allNotifications);\n        \n        eventBus.on('nodeUnlocked', onNodeUnlocked);\n        eventBus.on('branchUnlocked', onBranchUnlocked);\n        eventBus.on('featureUnlocked', onFeatureUnlocked);\n        eventBus.on('gameLoaded', onGameLoaded);\n        eventBus.on('ascension', onAscensionComplete);\n        eventBus.on('gameTick', onGameTick);\n        \n        // Debug helper\n        if (typeof window !== 'undefined') {\n            (window as any).__resetNarrations = (all: boolean = false) => {\n                resetShownNotifications(!all);\n                console.log('Narrations reset. Refresh to see first launch again.');\n            };\n        }\n    }\n    \n    return {\n        initialize,\n        wasShown,\n        queueNotification,\n        checkResourceThresholds,\n        checkIdleThresholds,\n        recordInteraction,\n        resetShownNotifications\n    };\n}\n","// Notification Data Index\n// =======================\n// Re-exports all notification data and provides combined access\n\nimport { TriggerType, ComparisonOperator } from '../../types/notification';\nimport type { Notification } from '../../types/notification';\n\n// Import narration files\nimport { mainStoryNarrations } from './narration/mainStory';\nimport { energySideNarrations } from './narration/energySide';\nimport { computerSideNarrations } from './narration/computerSide';\n\n// Import hint files\nimport { gameplayHints } from './hints/gameplay';\n\n/**\n * Get all notifications combined\n */\nexport function getAllNotifications(): Notification[] {\n    return [\n        ...mainStoryNarrations,\n        ...energySideNarrations,\n        ...computerSideNarrations,\n        ...gameplayHints\n    ];\n}\n\n// Re-export individual arrays for direct access\nexport { \n    mainStoryNarrations, \n    energySideNarrations, \n    computerSideNarrations, \n    gameplayHints \n};\n\n// Re-export types for convenience\nexport { TriggerType, ComparisonOperator };\n","<script setup lang=\"ts\">\nimport { computed, ref, onMounted, onUnmounted } from 'vue';\n\n// Import components\nimport ResourceBar from '@/components/ResourceBar.vue';\nimport Sidebar from '@/components/Sidebar.vue';\nimport SkillTree from '@/components/SkillTree.vue';\nimport InfoPanel from '@/components/InfoPanel.vue';\nimport NotificationToast from '@/components/NotificationToast.vue';\nimport NotificationHistoryPanel from '@/components/NotificationHistoryPanel.vue';\nimport AscensionPanel from '@/components/AscensionPanel.vue';\nimport ChangelogModal from '@/components/ChangelogModal.vue';\n\n// Import composables\nimport { useGameState } from '@/composables/useGameState';\nimport { usePrestigeState } from '@/composables/usePrestigeState';\nimport { useNodeManagement } from '@/composables/useNodeManagement';\nimport { useGameLoop } from '@/composables/useGameLoop';\nimport { useEventBus } from '@/composables/useEventBus';\nimport { useNotificationEngine } from '@/composables/useNotificationEngine';\n\n// Import game data\nimport GameData from '@/core/gameData';\n\n// ==========================================\n// EVENT BUS (for composable communication)\n// ==========================================\nconst eventBus = useEventBus();\n\n// ==========================================\n// COMPOSABLES (decoupled via event bus)\n// ==========================================\nconst gameState = useGameState();\nconst prestigeState = usePrestigeState();\n\n// These composables communicate via eventBus instead of direct dependencies\nconst nodeManagement = useNodeManagement(gameState, prestigeState, eventBus, GameData.nodes);\nconst gameLoop = useGameLoop(gameState, prestigeState, eventBus);\n\n// Notification engine - subscribes to events, triggers narrations\nconst notificationEngine = useNotificationEngine(eventBus);\nnotificationEngine.initialize();\n\n// ==========================================\n// COMPUTED (for ascension)\n// ==========================================\nconst coresEarned = computed(() => {\n    const cores = prestigeState.calculateQuantumCores(\n        gameState.totalResources,\n        gameState.unlockedNodes.value\n    );\n    return isNaN(cores) ? 0 : cores;\n});\n\n// ==========================================\n// CHANGELOG MODAL\n// ==========================================\nconst showChangelogModal = ref(false);\nconst toggleChangelogModal = () => {\n    showChangelogModal.value = !showChangelogModal.value;\n};\n\n// ==========================================\n// KEYBOARD SHORTCUTS\n// ==========================================\nfunction handleKeydown(event: KeyboardEvent) {\n    // Close modals with Escape\n    if (event.key === 'Escape') {\n        if (showChangelogModal.value) {\n            showChangelogModal.value = false;\n            return;\n        }\n        if (prestigeState.showAscensionPanel.value) {\n            prestigeState.toggleAscensionPanel();\n            return;\n        }\n    }\n    \n    // 'u' to unlock selected node\n    if (event.key === 'u' || event.key === 'U') {\n        const nodeId = gameState.selectedNodeId.value;\n        if (nodeId) {\n            gameLoop.handleUnlockNode(nodeId);\n        }\n    }\n}\n\nonMounted(() => {\n    window.addEventListener('keydown', handleKeydown);\n});\n\nonUnmounted(() => {\n    window.removeEventListener('keydown', handleKeydown);\n});\n</script>\n\n<template>\n    <div id=\"game-container\">\n        <header id=\"header\">\n            <div class=\"header-left\">\n                <h1>Network Simulator</h1>\n                <button class=\"icon-button\" @click=\"toggleChangelogModal\" title=\"View Changelog\">üìú</button>\n            </div>\n            <div class=\"prestige-header\" v-if=\"prestigeState.prestigeState.ascensionCount > 0 || prestigeState.prestigeState.quantumCores > 0\">\n                <button class=\"prestige-button\" @click=\"prestigeState.toggleAscensionPanel\" title=\"View Ascension Upgrades\">\n                    <span class=\"prestige-icon\">üíé</span>\n                    <span class=\"prestige-value\">{{ prestigeState.prestigeState.quantumCores }}</span>\n                    <span class=\"prestige-label\">Quantum Cores</span>\n                    <span class=\"prestige-ascension\">Ascension {{ prestigeState.prestigeState.ascensionCount }}</span>\n                </button>\n            </div>\n            <div id=\"resources\">\n                <ResourceBar\n                    icon=\"‚ö°\"\n                    name=\"W\"\n                    :amount=\"gameState.resources.energy\"\n                    :rate=\"nodeManagement.resourceRates.value.energy\"\n                />\n                <ResourceBar\n                    icon=\"üìä\"\n                    name=\"B\"\n                    :amount=\"gameState.resources.data\"\n                    :rate=\"nodeManagement.resourceRates.value.data\"\n                    :visible=\"gameState.isDataUnlocked.value\"\n                />\n            </div>\n        </header>\n\n        <main id=\"main-content\">\n            <Sidebar\n                :resource-stats=\"{ \n                    energyPerClick: nodeManagement.computedValues.value.energyPerClick, \n                    dataPerClick: nodeManagement.dataPerClickDisplay.value, \n                    stats: gameState.stats.value \n                }\"\n                :generation-state=\"{ \n                    dataGeneration: gameState.dataGeneration, \n                    energyGeneration: gameState.energyGeneration, \n                    isCrankBroken: gameState.isCrankBroken.value, \n                    isCrankAutomated: gameState.isCrankAutomated.value \n                }\"\n                :game-stats=\"{ \n                    automations: gameState.automations, \n                    effectiveRates: {\n                        energy: nodeManagement.resourceRates.value.energy,\n                        data: nodeManagement.resourceRates.value.data\n                    },\n                    coresEarned: coresEarned, \n                    highestTierReached: gameState.highestTierReached.value, \n                    isDataUnlocked: gameState.isDataUnlocked.value, \n                    canProcessData: gameState.canProcessData.value \n                }\"\n                @generate-energy=\"nodeManagement.generateEnergy\"\n                @process-data=\"nodeManagement.processData\"\n                @ascend=\"gameLoop.ascend\"\n            />\n\n            <SkillTree\n                :nodes=\"GameData.nodes\"\n                :unlocked-nodes=\"gameState.unlockedNodes.value\"\n                :unlocked-branches=\"gameState.unlockedBranches.value\"\n                :selected-node-id=\"gameState.selectedNodeId.value\"\n                :resources=\"gameState.resources\"\n                :ascension-count=\"prestigeState.prestigeState.ascensionCount\"\n                :prestige-bonuses=\"prestigeState.prestigeBonuses.value\"\n                :last-unlocked-node-id=\"gameState.lastUnlockedNodeId.value\"\n                :node-levels=\"gameState.nodeLevels\"\n                @select-node=\"gameState.selectNode\"\n            />\n\n            <InfoPanel\n                :node=\"nodeManagement.selectedNode.value\"\n                :is-unlocked=\"nodeManagement.isSelectedNodeUnlocked.value\"\n                :is-available=\"nodeManagement.isSelectedNodeAvailable.value\"\n                :is-tier-locked=\"nodeManagement.isTierLocked.value\"\n                :tier-gate=\"nodeManagement.tierGateRequirement.value\"\n                :can-afford=\"nodeManagement.canAffordSelectedNode.value\"\n                :resources=\"gameState.resources\"\n                :unlocked-nodes=\"gameState.unlockedNodes.value\"\n                :ascension-count=\"prestigeState.prestigeState.ascensionCount\"\n                :prestige-bonuses=\"prestigeState.prestigeBonuses.value\"\n                :node-level=\"nodeManagement.selectedNode.value ? nodeManagement.getNodeLevel(nodeManagement.selectedNode.value.id) : 0\"\n                :can-upgrade=\"nodeManagement.selectedNode.value ? nodeManagement.canUpgradeNode(nodeManagement.selectedNode.value) : false\"\n                :node-levels=\"gameState.nodeLevels\"\n                @unlock=\"gameLoop.handleUnlockNode\"\n            />\n        </main>\n\n        <NotificationToast :notifications=\"gameLoop.notifications.value\" />\n        \n        <button id=\"notification-history-button\" @click=\"gameLoop.toggleNotificationHistory\" title=\"Notification History\">üîî</button>\n        \n        <NotificationHistoryPanel\n            :show=\"gameLoop.showNotificationHistory.value\"\n            :history=\"gameLoop.notificationHistory.value\"\n            :narrate-only-filter=\"gameLoop.narrateOnlyFilter.value\"\n            @close=\"gameLoop.toggleNotificationHistory\"\n            @update:narrate-only-filter=\"gameLoop.narrateOnlyFilter.value = $event\"\n        />\n        \n        <AscensionPanel\n            :visible=\"prestigeState.showAscensionPanel.value\"\n            :quantum-cores=\"prestigeState.prestigeState.quantumCores\"\n            :ascension-count=\"prestigeState.prestigeState.ascensionCount\"\n            :purchased-upgrades=\"prestigeState.prestigeState.upgrades\"\n            :statistics=\"prestigeState.prestigeState.statistics\"\n            :total-cores-earned=\"prestigeState.prestigeState.totalCoresEarned\"\n            @purchase-upgrade=\"gameLoop.handlePurchaseUpgrade\"\n            @close=\"prestigeState.toggleAscensionPanel\"\n        />\n        \n        <ChangelogModal\n            :visible=\"showChangelogModal\"\n            @close=\"toggleChangelogModal\"\n        />\n    </div>\n</template>\n","// useEventBus Composable\n// =======================\n// Simple pub/sub event bus for inter-composable communication\n// Decouples composables from direct dependencies\n\nimport type { EventMap, EventHandler } from '@network-simulator/shared/types/event';\n\n/**\n * Type-safe event bus for pub/sub communication between composables\n */\nexport function useEventBus() {\n    const events = new Map<keyof EventMap, Array<EventHandler<any>>>();\n\n    /**\n     * Subscribe to an event\n     * @param eventName - Event identifier\n     * @param callback - Handler function\n     * @returns Unsubscribe function\n     */\n    function on<K extends keyof EventMap>(\n        eventName: K,\n        callback: EventHandler<K>\n    ): () => void {\n        if (!events.has(eventName)) {\n            events.set(eventName, []);\n        }\n        events.get(eventName)!.push(callback);\n        \n        // Return unsubscribe function\n        return () => {\n            const handlers = events.get(eventName);\n            if (handlers) {\n                const index = handlers.indexOf(callback);\n                if (index > -1) {\n                    handlers.splice(index, 1);\n                }\n            }\n        };\n    }\n\n    /**\n     * Emit an event\n     * @param eventName - Event identifier\n     * @param data - Event payload\n     */\n    function emit<K extends keyof EventMap>(\n        eventName: K,\n        data: EventMap[K]\n    ): void {\n        if (!events.has(eventName)) return;\n        events.get(eventName)!.forEach((callback) => {\n            try {\n                callback(data);\n            } catch (e) {\n                console.error(`Error in event handler for '${eventName}':`, e);\n            }\n        });\n    }\n\n    /**\n     * Subscribe to event, auto-unsubscribe after first call\n     * @param eventName - Event identifier\n     * @param callback - Handler function\n     */\n    function once<K extends keyof EventMap>(\n        eventName: K,\n        callback: EventHandler<K>\n    ): () => void {\n        const unsubscribe = on(eventName, (data) => {\n            callback(data);\n            unsubscribe();\n        });\n        return unsubscribe;\n    }\n\n    /**\n     * Remove all listeners for an event or all events\n     * @param eventName - Optional event to clear\n     */\n    function off(eventName?: keyof EventMap): void {\n        if (!eventName) {\n            events.clear();\n        } else {\n            events.delete(eventName);\n        }\n    }\n\n    return { on, emit, once, off };\n}\n","// useGameState Composable\n// ========================\n// Manages core game state: resources, automations, unlocked nodes\n\nimport { ref, reactive, computed, type Ref, type ComputedRef } from 'vue';\nimport type { \n    ResourceAmounts, \n    AutomationRates, \n    DataGeneration, \n    EnergyGeneration \n} from '@network-simulator/shared/types/game';\nimport GameData from '@/core/gameData';\n\n/**\n * Game statistics computed values\n */\ninterface GameStats {\n    nodesUnlocked: number;\n    totalEnergy: number;\n    totalData: number;\n}\n\n/**\n * Return type for useGameState composable\n */\nexport interface UseGameStateReturn {\n    // State\n    resources: ResourceAmounts;\n    totalResources: ResourceAmounts;\n    automations: AutomationRates;\n    unlockedNodes: Ref<Set<string>>;\n    nodeLevels: Record<string, number>;\n    unlockedBranches: Ref<Set<string>>;\n    unlockedFeatures: Ref<Set<string>>;\n    selectedNodeId: Ref<string | null>;\n    lastUnlockedNodeId: Ref<string | null>;\n    dataGeneration: DataGeneration;\n    energyGeneration: EnergyGeneration;\n    isCrankBroken: Ref<boolean>;\n    isCrankAutomated: Ref<boolean>;\n    \n    // Computed\n    isDataUnlocked: ComputedRef<boolean>;\n    canProcessData: ComputedRef<boolean>;\n    highestTierReached: ComputedRef<number>;\n    maxDataCapacity: ComputedRef<number>;\n    stats: ComputedRef<GameStats>;\n    \n    // Methods\n    selectNode: (nodeId: string | null) => void;\n    resetResources: () => void;\n    resetNodes: () => void;\n    unlockBranch: (branch: string) => void;\n    unlockFeature: (feature: string) => void;\n    setLastUnlockedNode: (nodeId: string) => void;\n}\n\nexport function useGameState(): UseGameStateReturn {\n    // ==========================================\n    // STATE\n    // ==========================================\n    const resources = reactive<ResourceAmounts>({\n        energy: 0,\n        data: 0\n    });\n\n    const totalResources = reactive<ResourceAmounts>({\n        energy: 0,\n        data: 0\n    });\n\n    const automations = reactive<AutomationRates>({\n        energy: 0,\n        data: 0\n    });\n\n    const unlockedNodes = ref<Set<string>>(new Set(['old_shed']));\n    const nodeLevels = reactive<Record<string, number>>({}); // Track levels for each node (0=locked, 1+=unlocked)\n    const unlockedBranches = ref<Set<string>>(new Set(['energy'])); // Explicit branch tracking\n    const unlockedFeatures = ref<Set<string>>(new Set()); // Features unlocked via effects (dataProcessing, etc.)\n    const selectedNodeId = ref<string | null>(null);\n    const lastUnlockedNodeId = ref<string | null>(null);\n\n    const dataGeneration = reactive<DataGeneration>({\n        active: false,\n        progress: 0, // 0-100%\n        interval: 20000, // 20 seconds default\n        bitsPerTick: 1,\n        energyCost: 1,\n        baseCapacity: 1028, // Base max data capacity\n        capacityBonus: 0   // Bonus from upgrades\n    });\n\n    const energyGeneration = reactive<EnergyGeneration>({\n        active: false,\n        progress: 0, // 0-100%\n        interval: 1000, // 1 second default\n        energyPerTick: 1\n    });\n\n    const isCrankBroken = ref<boolean>(false);\n    const isCrankAutomated = ref<boolean>(false);\n\n    // ==========================================\n    // COMPUTED\n    // ==========================================\n    const maxDataCapacity = computed<number>(() => {\n        return dataGeneration.baseCapacity + dataGeneration.capacityBonus;\n    });\n\n    const isDataUnlocked = computed<boolean>(() => {\n        return unlockedFeatures.value.has('dataProcessing');\n    });\n\n    const canProcessData = computed<boolean>(() => {\n        return isDataUnlocked.value && resources.energy >= 5;\n    });\n\n    const highestTierReached = computed<number>(() => {\n        let maxTier = 0;\n        unlockedNodes.value.forEach(nodeId => {\n            const node = GameData.nodes[nodeId];\n            if (node && node.tier > maxTier) {\n                maxTier = node.tier;\n            }\n        });\n        return maxTier;\n    });\n\n    const stats = computed<GameStats>(() => ({\n        nodesUnlocked: unlockedNodes.value.size,\n        totalEnergy: totalResources.energy,\n        totalData: totalResources.data\n    }));\n\n    // ==========================================\n    // METHODS\n    // ==========================================\n    \n    /**\n     * Select a node for viewing in the info panel\n     * @param nodeId - The node ID to select, or null to deselect\n     */\n    function selectNode(nodeId: string | null): void {\n        selectedNodeId.value = nodeId;\n    }\n\n    /**\n     * Reset all resources and automations to zero\n     */\n    function resetResources(): void {\n        Object.keys(resources).forEach(k => resources[k as keyof ResourceAmounts] = 0);\n        Object.keys(totalResources).forEach(k => totalResources[k as keyof ResourceAmounts] = 0);\n        Object.keys(automations).forEach(k => automations[k as keyof AutomationRates] = 0);\n    }\n\n    /**\n     * Reset all node-related state to initial values (for ascension)\n     */\n    function resetNodes(): void {\n        unlockedNodes.value = new Set(['old_shed']);\n        // Reset node levels\n        Object.keys(nodeLevels).forEach(k => delete nodeLevels[k]);\n        unlockedBranches.value = new Set(['energy']);\n        unlockedFeatures.value = new Set();\n        // Reset data generation\n        dataGeneration.active = false;\n        dataGeneration.progress = 0;\n        dataGeneration.interval = 20000;\n        dataGeneration.bitsPerTick = 1;\n        dataGeneration.energyCost = 1;\n        dataGeneration.baseCapacity = 100;\n        dataGeneration.capacityBonus = 0;\n        // Reset energy generation\n        energyGeneration.active = false;\n        energyGeneration.progress = 0;\n        energyGeneration.interval = 1000;\n        energyGeneration.energyPerTick = 1;\n        isCrankBroken.value = false;\n        isCrankAutomated.value = false;\n    }\n\n    /**\n     * Unlock a branch for node visibility\n     * @param branch - The branch name to unlock\n     */\n    function unlockBranch(branch: string): void {\n        if (!unlockedBranches.value.has(branch)) {\n            const newBranches = new Set(unlockedBranches.value);\n            newBranches.add(branch);\n            unlockedBranches.value = newBranches;\n        }\n    }\n\n    /**\n     * Unlock a game feature (e.g., 'dataProcessing')\n     * @param feature - The feature name to unlock\n     */\n    function unlockFeature(feature: string): void {\n        if (!unlockedFeatures.value.has(feature)) {\n            const newFeatures = new Set(unlockedFeatures.value);\n            newFeatures.add(feature);\n            unlockedFeatures.value = newFeatures;\n        }\n    }\n\n    /**\n     * Set the last unlocked node for animation purposes\n     * @param nodeId - The node ID that was just unlocked\n     */\n    function setLastUnlockedNode(nodeId: string): void {\n        lastUnlockedNodeId.value = nodeId;\n        // Clear after animation completes\n        setTimeout(() => {\n            if (lastUnlockedNodeId.value === nodeId) {\n                lastUnlockedNodeId.value = null;\n            }\n        }, 1200);\n    }\n\n    // ==========================================\n    // RETURN\n    // ==========================================\n    return {\n        // State\n        resources,\n        totalResources,\n        automations,\n        unlockedNodes,\n        nodeLevels,\n        unlockedBranches,\n        unlockedFeatures,\n        selectedNodeId,\n        lastUnlockedNodeId,\n        dataGeneration,\n        energyGeneration,\n        isCrankBroken,\n        isCrankAutomated,\n        \n        // Computed\n        isDataUnlocked,\n        canProcessData,\n        highestTierReached,\n        maxDataCapacity,\n        stats,\n        \n        // Methods\n        selectNode,\n        resetResources,\n        resetNodes,\n        unlockBranch,\n        unlockFeature,\n        setLastUnlockedNode\n    };\n}\n","// usePrestigeState Composable\n// =============================\n// Manages prestige state: quantum cores, upgrades, ascension\n\nimport { ref, reactive, computed, type Ref, type ComputedRef } from 'vue';\nimport type { PrestigeState, PrestigeBonuses, ResourceAmounts } from '@network-simulator/shared/types/game';\nimport type { Node } from '@network-simulator/shared/types/node';\nimport { prestigeUpgrades } from '@network-simulator/shared/data/prestigeData';\nimport GameData from '@/core/gameData';\n\n/**\n * Random starting nodes configuration\n */\ninterface RandomStartingNodes {\n    tier: number;\n    count: number;\n}\n\n/**\n * Extended prestige bonuses with additional properties\n */\ninterface ExtendedPrestigeBonuses extends PrestigeBonuses {\n    startingEnergy: number;\n    startingAutomation: Record<string, number>;\n    startingNodes: Set<string>;\n    costMultiplier: number;\n    automationMultiplier: number;\n    bonusEnergyPerClick: number;\n    coreMultiplier: number;\n    tierCostMultipliers: Record<number, number>;\n    randomStartingNodes?: RandomStartingNodes,\n    [key: string]: unknown;\n}\n\n/**\n * Return type for usePrestigeState composable\n */\nexport interface UsePrestigeStateReturn {\n    // State\n    prestigeState: PrestigeState;\n    showAscensionPanel: Ref<boolean>;\n    \n    // Computed\n    prestigeBonuses: ComputedRef<ExtendedPrestigeBonuses>;\n    \n    // Methods\n    calculateQuantumCores: (totalResources: ResourceAmounts, unlockedNodes: Set<string>) => number;\n    getAccumulatedBonuses: () => ExtendedPrestigeBonuses;\n    purchaseUpgrade: (upgradeId: string) => boolean;\n    toggleAscensionPanel: () => void;\n    resetRunTimer: () => void;\n}\n\nexport function usePrestigeState(): UsePrestigeStateReturn {\n    // ==========================================\n    // STATE\n    // ==========================================\n    const prestigeState = reactive<PrestigeState>({\n        ascensionCount: 0,\n        quantumCores: 0,\n        totalCoresEarned: 0,\n        upgrades: new Set<string>(),\n        statistics: {\n            fastestClear: null,\n            totalNodesEverUnlocked: 0,\n            totalEnergyEverEarned: 0,\n            runStartTime: Date.now()\n        }\n    });\n    \n    const showAscensionPanel = ref<boolean>(false);\n\n    // ==========================================\n    // COMPUTED\n    // ==========================================\n    const prestigeBonuses = computed<ExtendedPrestigeBonuses>(() => getAccumulatedBonuses());\n\n    // ==========================================\n    // METHODS\n    // ==========================================\n    \n    /**\n     * Calculate quantum cores based on current progress\n     */\n    function calculateQuantumCores(totalResources: ResourceAmounts, unlockedNodes: Set<string>): number {\n        const energyLog = Math.max(0, Math.log10(totalResources.energy + 1));\n        const nodeBonus = unlockedNodes.size / 10;\n        \n        // Tier bonuses\n        let tierBonus = 0;\n        for (const nodeId of unlockedNodes) {\n            const node = GameData.nodes[nodeId];\n            if (node && node.tier >= 6) {\n                tierBonus += (node.tier - 5) * 5;\n            }\n            if (node && node.id === 'universe_simulation') {\n                tierBonus += 20;\n            }\n        }\n        \n        // Core multiplier from upgrades\n        const multiplier = prestigeBonuses.value.coreMultiplier;\n        \n        return Math.floor((energyLog + nodeBonus + tierBonus) * multiplier);\n    }\n\n    /**\n     * Get accumulated bonuses from all purchased upgrades\n     */\n    function getAccumulatedBonuses(): ExtendedPrestigeBonuses {\n        const bonuses: ExtendedPrestigeBonuses = {\n            startingEnergy: 0,\n            startingAutomation: { energy: 0, data: 0, bandwidth: 0 },\n            startingNodes: new Set(['old_shed']),\n            costMultiplier: 1,\n            automationMultiplier: 1,\n            bonusEnergyPerClick: 0,\n            coreMultiplier: 1,\n            tierCostMultipliers: {},\n            clickPower: 1,\n            automation: 1,\n            costReduction: 0,\n            dataCapacity: 1,\n            specialEffects: {}\n        };\n        \n        for (const upgradeId of prestigeState.upgrades) {\n            const upgrade = prestigeUpgrades[upgradeId];\n            if (!upgrade) continue;\n            \n            const e = upgrade.effect;\n            if (e.startingEnergy) bonuses.startingEnergy += e.startingEnergy;\n            if (e.costMultiplier) bonuses.costMultiplier *= e.costMultiplier;\n            if (e.automationMultiplier) bonuses.automationMultiplier *= e.automationMultiplier;\n            if (e.bonusEnergyPerClick) bonuses.bonusEnergyPerClick += e.bonusEnergyPerClick;\n            if (e.coreMultiplier) bonuses.coreMultiplier *= e.coreMultiplier;\n            \n            if (e.startingNodes) {\n                e.startingNodes.forEach((nodeId: string) => bonuses.startingNodes.add(nodeId));\n            }\n            \n            if (e.startingAutomation) {\n                Object.entries(e.startingAutomation).forEach(([resource, value]) => {\n                    bonuses.startingAutomation[resource] += value as number;\n                });\n            }\n            \n            if (e.tierCostMultipliers) {\n                Object.entries(e.tierCostMultipliers).forEach(([tier, mult]) => {\n                    const t = parseInt(tier);\n                    bonuses.tierCostMultipliers[t] = (bonuses.tierCostMultipliers[t] || 1) * (mult as number);\n                });\n            }\n            \n            // Handle special upgrades\n            if (e.startAllTier) {\n                (Object.values(GameData.nodes) as Node[]).forEach((node) => {\n                    if (node.tier === e.startAllTier) {\n                        bonuses.startingNodes.add(node.id);\n                    }\n                });\n            }\n            \n            if (e.randomStartingNodes) {\n                bonuses.randomStartingNodes = e.randomStartingNodes;\n            }\n        }\n        \n        return bonuses;\n    }\n\n    /**\n     * Purchase an upgrade with quantum cores\n     */\n    function purchaseUpgrade(upgradeId: string): boolean {\n        const upgrade = prestigeUpgrades[upgradeId];\n        if (!upgrade) return false;\n        \n        // Check if already purchased\n        if (prestigeState.upgrades.has(upgradeId)) return false;\n        \n        // Check requirements\n        const requirementsMet = upgrade.requires.every((reqId: string) => \n            prestigeState.upgrades.has(reqId)\n        );\n        if (!requirementsMet) return false;\n        \n        // Check cost\n        if (prestigeState.quantumCores < upgrade.cost) return false;\n        \n        // Deduct cost\n        prestigeState.quantumCores -= upgrade.cost;\n        \n        // Add upgrade\n        const newUpgrades = new Set(prestigeState.upgrades);\n        newUpgrades.add(upgradeId);\n        prestigeState.upgrades = newUpgrades;\n        \n        return true;\n    }\n\n    /**\n     * Toggle ascension panel visibility\n     */\n    function toggleAscensionPanel(): void {\n        showAscensionPanel.value = !showAscensionPanel.value;\n    }\n\n    /**\n     * Reset run start time\n     */\n    function resetRunTimer(): void {\n        prestigeState.statistics.runStartTime = Date.now();\n    }\n\n    // ==========================================\n    // RETURN\n    // ==========================================\n    return {\n        // State\n        prestigeState,\n        showAscensionPanel,\n        \n        // Computed\n        prestigeBonuses,\n        \n        // Methods\n        calculateQuantumCores,\n        getAccumulatedBonuses,\n        purchaseUpgrade,\n        toggleAscensionPanel,\n        resetRunTimer\n    };\n}\n","// TreeBuilder: Constructs dependency tree structure from nodes\n// Single Responsibility: Build tree structure and assign branches\n// ==========================================================\n\nimport type { Node, NodeRequirement } from '@network-simulator/shared/types/node';\n\n/**\n * Extract node ID from a requirement (supports both 'node_id' and { id: 'node_id', level: n })\n */\nfunction getReqId(req: NodeRequirement): string {\n    return typeof req === 'string' ? req : req.id;\n}\n\n/**\n * Tree structure for layout calculations\n */\nexport interface DependencyTree {\n    nodesByTier: Record<number, string[]>;\n    children: Record<string, string[]>;\n    parents: Record<string, string[]>;\n    maxTier: number;\n    descendants: Record<string, number>;\n}\n\n/**\n * Extended node with layout metadata\n */\nexport interface LayoutNode extends Node {\n    branchAngle?: number;\n    depth?: number;\n    depthInfo?: { depth: number; sameTierHops: number };\n}\n\n/**\n * TreeBuilder class - constructs dependency graph and assigns branch angles\n */\nexport class TreeBuilder {\n    buildTree(nodes: Record<string, LayoutNode>): DependencyTree {\n        const tree: DependencyTree = {\n            nodesByTier: {},\n            children: {},\n            parents: {},\n            maxTier: 0,\n            descendants: {}\n        };\n\n        // Group nodes by tier and initialize parent/child relationships\n        Object.values(nodes).forEach(node => {\n            if (!tree.nodesByTier[node.tier]) {\n                tree.nodesByTier[node.tier] = [];\n            }\n            tree.nodesByTier[node.tier].push(node.id);\n            tree.maxTier = Math.max(tree.maxTier, node.tier);\n            tree.parents[node.id] = (node.requires || []).map(getReqId);\n            tree.children[node.id] = [];\n        });\n\n        // Build children arrays\n        Object.values(nodes).forEach(node => {\n            node.requires.forEach(req => {\n                const parentId = getReqId(req);\n                if (tree.children[parentId]) {\n                    tree.children[parentId].push(node.id);\n                }\n            });\n        });\n\n        // Calculate descendant counts\n        Object.keys(nodes).forEach(nodeId => {\n            tree.descendants[nodeId] = this.countDescendants(nodeId, tree, nodes);\n        });\n\n        return tree;\n    }\n\n    countDescendants(\n        nodeId: string,\n        tree: DependencyTree,\n        nodes: Record<string, LayoutNode>,\n        visited = new Set<string>()\n    ): number {\n        if (visited.has(nodeId)) return 0;\n        visited.add(nodeId);\n        \n        const children = tree.children[nodeId] || [];\n        let count = children.length;\n        children.forEach(childId => {\n            count += this.countDescendants(childId, tree, nodes, visited);\n        });\n        return count;\n    }\n\n    assignBranches(nodes: Record<string, LayoutNode>, tree: DependencyTree): void {\n        // Assign old_shed as root\n        if (nodes.old_shed) {\n            nodes.old_shed.branch = 'old_shed' as any;\n            nodes.old_shed.branchAngle = 0;\n        }\n\n        // Assign tier 1 nodes evenly around circle\n        const tier1Nodes = tree.nodesByTier[1] || [];\n        const tier1Count = tier1Nodes.length;\n        \n        tier1Nodes.forEach((nodeId, index) => {\n            const angle = -Math.PI / 2 + (2 * Math.PI * index / tier1Count);\n            nodes[nodeId].branch = nodeId as any;\n            nodes[nodeId].branchAngle = angle;\n        });\n\n        // Assign branches to higher tier nodes based on parents\n        for (let tier = 2; tier <= tree.maxTier; tier++) {\n            const tierNodes = tree.nodesByTier[tier] || [];\n            \n            tierNodes.forEach(nodeId => {\n                const node = nodes[nodeId];\n                const parents = node.requires.map(req => nodes[getReqId(req)]).filter(p => p);\n                \n                if (parents.length === 0) return;\n\n                const parentAngles = parents.map(p => p.branchAngle).filter(a => a !== undefined) as number[];\n                \n                if (parentAngles.length > 0) {\n                    node.branchAngle = this.averageAngle(parentAngles);\n                    node.branch = parents[0].branch;\n                }\n            });\n        }\n    }\n\n    averageAngle(angles: number[]): number {\n        if (angles.length === 0) return 0;\n        if (angles.length === 1) return angles[0];\n        \n        let sumSin = 0, sumCos = 0;\n        angles.forEach(a => {\n            sumSin += Math.sin(a);\n            sumCos += Math.cos(a);\n        });\n        \n        return Math.atan2(sumSin / angles.length, sumCos / angles.length);\n    }\n}\n","// PositionCalculator: Calculates node positions based on tree structure\n// Single Responsibility: Physics-based positioning and depth calculations\n// ==========================================================\n\nimport type { NodeRequirement } from '@network-simulator/shared/types/node';\nimport type { LayoutNode } from './TreeBuilder';\n\n/**\n * Extract node ID from a requirement\n */\nfunction getReqId(req: NodeRequirement): string {\n    return typeof req === 'string' ? req : req.id;\n}\n\n/**\n * Depth information for radius calculation\n */\nexport interface DepthInfo {\n    depth: number;\n    sameTierHops: number;\n}\n\n/**\n * Layout configuration\n */\nexport interface LayoutConfig {\n    centerX: number;\n    centerY: number;\n    tierSpacing: number;\n    sameTierOffset: number;\n    nodeSpacing: number;\n    nodeSize: number;\n}\n\n/**\n * Parent group for positioning\n */\ninterface ParentGroup {\n    parentId: string;\n    nodes: string[];\n}\n\n/**\n * PositionCalculator class - calculates node positions using radial layout\n */\nexport class PositionCalculator {\n    constructor(private config: LayoutConfig) {}\n\n    /**\n     * Calculate the depth of a node from tier 1 (how many parent hops)\n     * Returns an object with depth count and same-tier hops for radius calculation\n     */\n    calculateDepth(\n        nodeId: string,\n        nodes: Record<string, LayoutNode>,\n        cache: Record<string, DepthInfo> = {}\n    ): DepthInfo {\n        if (cache[nodeId] !== undefined) return cache[nodeId];\n        \n        const node = nodes[nodeId];\n        if (!node) return { depth: 0, sameTierHops: 0 };\n        if (node.tier === 0) {\n            cache[nodeId] = { depth: 0, sameTierHops: 0 };\n            return cache[nodeId];\n        }\n        if (node.tier === 1) {\n            cache[nodeId] = { depth: 1, sameTierHops: 0 };\n            return cache[nodeId];\n        }\n        \n        // Find parent with max depth\n        const parents = (node.requires || []).map(req => nodes[getReqId(req)]).filter(p => p);\n        if (parents.length === 0) {\n            cache[nodeId] = { depth: node.tier, sameTierHops: 0 };\n            return cache[nodeId];\n        }\n        \n        const parentDepths = parents.map(parent => this.calculateDepth(parent.id, nodes, cache));\n        const maxParentDepth = Math.max(...parentDepths.map(d => d.depth));\n        const parentWithMaxDepth = parents.find((_, i) => parentDepths[i].depth === maxParentDepth);\n        const parentDepthInfo = parentDepths[parents.indexOf(parentWithMaxDepth!)];\n        \n        // Check if this is a same-tier hop\n        const isSameTierHop = parentWithMaxDepth && parentWithMaxDepth.tier === node.tier;\n        \n        cache[nodeId] = {\n            depth: maxParentDepth + 1,\n            sameTierHops: parentDepthInfo.sameTierHops + (isSameTierHop ? 1 : 0)\n        };\n        return cache[nodeId];\n    }\n\n    calculateRadius(depthInfo: DepthInfo): number {\n        const { tierSpacing, sameTierOffset } = this.config;\n        const effectiveDepth = depthInfo.depth - depthInfo.sameTierHops;\n        return effectiveDepth * tierSpacing + depthInfo.sameTierHops * sameTierOffset;\n    }\n\n    averageAngle(angles: number[]): number {\n        if (angles.length === 0) return 0;\n        if (angles.length === 1) return angles[0];\n        \n        let sumSin = 0, sumCos = 0;\n        angles.forEach(a => {\n            sumSin += Math.sin(a);\n            sumCos += Math.cos(a);\n        });\n        \n        return Math.atan2(sumSin / angles.length, sumCos / angles.length);\n    }\n\n    /**\n     * Calculate positions for all nodes\n     * Uses depth (parent hops) for radius, with reduced spacing for same-tier hops\n     */\n    calculatePositions(nodes: Record<string, LayoutNode>): void {\n        const { centerX, centerY, tierSpacing } = this.config;\n\n        // Position old_shed at center\n        if (nodes.old_shed) {\n            nodes.old_shed.x = centerX;\n            nodes.old_shed.y = centerY;\n        }\n\n        // Calculate depth info for all nodes (based on parent chain, not tier)\n        const depthCache: Record<string, DepthInfo> = {};\n        Object.keys(nodes).forEach(nodeId => {\n            const depthInfo = this.calculateDepth(nodeId, nodes, depthCache);\n            nodes[nodeId].depthInfo = depthInfo;\n            nodes[nodeId].depth = depthInfo.depth;\n        });\n\n        // Find max depth\n        const maxDepth = Math.max(...Object.values(nodes).map(n => n.depth || 0));\n\n        // Position depth 1 nodes (tier 1) evenly around the circle using pre-assigned angles\n        const depth1Nodes = Object.values(nodes).filter(n => n.depth === 1);\n        const radius1 = tierSpacing;\n        depth1Nodes.forEach(node => {\n            node.x = centerX + Math.cos(node.branchAngle!) * radius1;\n            node.y = centerY + Math.sin(node.branchAngle!) * radius1;\n        });\n\n        // Position nodes at depth 2+ by grouping under parents\n        for (let depth = 2; depth <= maxDepth; depth++) {\n            const depthNodes = Object.values(nodes).filter(n => n.depth === depth).map(n => n.id);\n            if (depthNodes.length === 0) continue;\n            \n            // Separate nodes with single parent vs multiple parents\n            const singleParentNodes = depthNodes.filter(id => (nodes[id].requires || []).length === 1);\n            const multiParentNodes = depthNodes.filter(id => (nodes[id].requires || []).length > 1);\n            \n            // Multi-parent nodes: use their pre-calculated averaged angle and individual radius\n            multiParentNodes.forEach(nodeId => {\n                const node = nodes[nodeId];\n                const radius = this.calculateRadius(node.depthInfo!);\n                node.x = centerX + Math.cos(node.branchAngle!) * radius;\n                node.y = centerY + Math.sin(node.branchAngle!) * radius;\n            });\n            \n            // Single-parent nodes: group by parent and spread symmetrically\n            const parentGroups = this.groupByParent(singleParentNodes, nodes);\n            \n            // Position each parent group symmetrically\n            parentGroups.forEach(group => {\n                const parent = nodes[group.parentId];\n                const parentAngle = parent ? parent.branchAngle || 0 : 0;\n                const siblings = group.nodes;\n                const count = siblings.length;\n                \n                // Calculate angular spread - wider for more siblings, narrower at higher depth\n                const spreadPerNode = 0.25 / Math.sqrt(depth);\n                \n                // Sort siblings for consistent ordering\n                siblings.sort((a, b) => a.localeCompare(b));\n                \n                // Distribute symmetrically around parent angle\n                siblings.forEach((nodeId, idx) => {\n                    const node = nodes[nodeId];\n                    const radius = this.calculateRadius(node.depthInfo!);\n                    let nodeAngle = parentAngle;\n                    \n                    if (count > 1) {\n                        const position = idx - (count - 1) / 2;\n                        nodeAngle = parentAngle + position * spreadPerNode;\n                    }\n                    \n                    node.branchAngle = nodeAngle;\n                    node.x = centerX + Math.cos(nodeAngle) * radius;\n                    node.y = centerY + Math.sin(nodeAngle) * radius;\n                });\n            });\n        }\n\n        // Offset for node center (nodes are positioned by top-left corner)\n        const halfNode = this.config.nodeSize / 2;\n        Object.values(nodes).forEach(node => {\n            node.x = Math.round(node.x! - halfNode);\n            node.y = Math.round(node.y! - halfNode);\n        });\n    }\n\n    groupByParent(nodeIds: string[], nodes: Record<string, LayoutNode>): ParentGroup[] {\n        const groups: Record<string, ParentGroup> = {};\n        \n        nodeIds.forEach(nodeId => {\n            const node = nodes[nodeId];\n            const parentId = node.requires && node.requires.length > 0 ? getReqId(node.requires[0]) : 'old_shed';\n            \n            if (!groups[parentId]) {\n                groups[parentId] = { parentId, nodes: [] };\n            }\n            groups[parentId].nodes.push(nodeId);\n        });\n        \n        return Object.values(groups);\n    }\n}\n","// CollisionResolver: Resolves node collisions using spatial partitioning\n// Single Responsibility: Collision detection and resolution only\n// Complexity: O(n*k) where k = avg nodes per grid cell (instead of O(n¬≤))\n// ==========================================================\n\nimport type { LayoutNode } from './TreeBuilder';\nimport type { LayoutConfig } from './PositionCalculator';\n\n/**\n * CollisionResolver class - resolves overlapping nodes using spatial grid\n */\nexport class CollisionResolver {\n    constructor(private config: LayoutConfig) {}\n\n    resolveCollisions(nodes: Record<string, LayoutNode>): void {\n        const nodeList = Object.values(nodes);\n        const minDistance = this.config.nodeSpacing;\n        const cellSize = minDistance * 2;\n        const iterations = 15;\n\n        for (let iter = 0; iter < iterations; iter++) {\n            let maxOverlap = 0;\n\n            // Step 1: Partition nodes into grid cells - O(n)\n            const grid = this.buildSpatialGrid(nodeList, cellSize);\n\n            // Step 2: Check collisions only within & adjacent cells - O(n¬∑k)\n            nodeList.forEach(nodeA => {\n                const cellKey = this.getGridCellKey(nodeA.x!, nodeA.y!, cellSize);\n                const [cx, cy] = cellKey.split(',').map(Number);\n                \n                // Check current cell and 8 adjacent cells\n                for (let dx = -1; dx <= 1; dx++) {\n                    for (let dy = -1; dy <= 1; dy++) {\n                        const adjKey = `${cx + dx},${cy + dy}`;\n                        const cellNodes = grid.get(adjKey) || [];\n                        \n                        cellNodes.forEach(nodeB => {\n                            // Avoid duplicate checks (only process if nodeB comes after nodeA)\n                            if (nodeA.id >= nodeB.id) return;\n                            \n                            const dx = nodeB.x! - nodeA.x!;\n                            const dy = nodeB.y! - nodeA.y!;\n                            const distance = Math.sqrt(dx * dx + dy * dy);\n                            \n                            if (distance < minDistance && distance > 0) {\n                                const overlap = minDistance - distance;\n                                maxOverlap = Math.max(maxOverlap, overlap);\n                                \n                                // Push nodes apart\n                                const pushX = (dx / distance) * overlap * 0.5;\n                                const pushY = (dy / distance) * overlap * 0.5;\n                                \n                                // Don't move the old_shed node\n                                if (nodeA.id !== 'old_shed') {\n                                    nodeA.x! -= pushX;\n                                    nodeA.y! -= pushY;\n                                }\n                                if (nodeB.id !== 'old_shed') {\n                                    nodeB.x! += pushX;\n                                    nodeB.y! += pushY;\n                                }\n                            }\n                        });\n                    }\n                }\n            });\n\n            // Stop early if no significant overlaps\n            if (maxOverlap < 1) break;\n        }\n\n        // Round positions\n        nodeList.forEach(node => {\n            node.x = Math.round(node.x!);\n            node.y = Math.round(node.y!);\n        });\n    }\n\n    buildSpatialGrid(nodeList: LayoutNode[], cellSize: number): Map<string, LayoutNode[]> {\n        const grid = new Map<string, LayoutNode[]>();\n        \n        nodeList.forEach(node => {\n            const cellKey = this.getGridCellKey(node.x!, node.y!, cellSize);\n            if (!grid.has(cellKey)) {\n                grid.set(cellKey, []);\n            }\n            grid.get(cellKey)!.push(node);\n        });\n        \n        return grid;\n    }\n\n    getGridCellKey(x: number, y: number, cellSize: number): string {\n        const cellX = Math.floor(x / cellSize);\n        const cellY = Math.floor(y / cellSize);\n        return `${cellX},${cellY}`;\n    }\n}\n","// LayoutEngine: Main orchestrator that composes the three specialized classes\n// Maintains original API while using composition internally\n// ==========================================================\n\nimport { TreeBuilder } from './TreeBuilder';\nimport { PositionCalculator, type LayoutConfig } from './PositionCalculator';\nimport { CollisionResolver } from './CollisionResolver';\nimport type { Node } from '@network-simulator/shared/types/node';\nimport type { LayoutNode } from './TreeBuilder';\nimport { LAYOUT_CONFIG } from '@network-simulator/shared/data/constants';\n\n/**\n * GameData interface (minimal for layout purposes)\n */\ninterface GameData {\n    nodes: Record<string, Node>;\n}\n\n/**\n * LayoutEngine singleton - orchestrates tree building, positioning, and collision resolution\n */\nclass LayoutEngineClass {\n    private config: LayoutConfig;\n    private treeBuilder: TreeBuilder;\n    private positionCalculator: PositionCalculator;\n    private collisionResolver: CollisionResolver;\n\n    constructor() {\n        this.config = {\n            centerX: LAYOUT_CONFIG.CENTER_X,\n            centerY: LAYOUT_CONFIG.CENTER_Y,\n            tierSpacing: LAYOUT_CONFIG.TIER_SPACING,\n            sameTierOffset: LAYOUT_CONFIG.SAME_TIER_OFFSET,\n            nodeSpacing: LAYOUT_CONFIG.NODE_SPACING,\n            nodeSize: LAYOUT_CONFIG.NODE_SIZE,\n        };\n\n        this.treeBuilder = new TreeBuilder();\n        this.positionCalculator = new PositionCalculator(this.config);\n        this.collisionResolver = new CollisionResolver(this.config);\n    }\n\n    /**\n     * Calculate layout for nodes (returns copy with positions)\n     */\n    calculateLayout(nodes: Record<string, Node>): Record<string, LayoutNode> {\n        const nodesCopy = structuredClone(nodes) as Record<string, LayoutNode>;\n        \n        const tree = this.treeBuilder.buildTree(nodesCopy);\n        this.treeBuilder.assignBranches(nodesCopy, tree);\n        this.positionCalculator.calculatePositions(nodesCopy);\n        this.collisionResolver.resolveCollisions(nodesCopy);\n        \n        return nodesCopy;\n    }\n\n    /**\n     * Apply layout to gameData nodes in-place\n     */\n    applyLayout(gameData: GameData): GameData {\n        const layoutNodes = this.calculateLayout(gameData.nodes);\n        \n        Object.keys(layoutNodes).forEach(nodeId => {\n            if (gameData.nodes[nodeId]) {\n                gameData.nodes[nodeId].x = layoutNodes[nodeId].x;\n                gameData.nodes[nodeId].y = layoutNodes[nodeId].y;\n            }\n        });\n        \n        return gameData;\n    }\n\n    /**\n     * Initialize layout for gameData\n     */\n    initializeLayout(gameData: GameData): void {\n        if (gameData && gameData.nodes) {\n            this.applyLayout(gameData);\n        }\n    }\n}\n\n// Export singleton instance\nexport const LayoutEngine = new LayoutEngineClass();\n","import { createApp } from 'vue'\nimport App from './App.vue'\nimport GameData from '@/core/gameData'\nimport { LayoutEngine } from '@/layout/LayoutEngine'\n\n// Import global styles\nimport '@/styles/index.css'\n\n// Initialize layout engine before mounting the app\nLayoutEngine.initializeLayout(GameData)\n\n// Create and mount the app\nconst app = createApp(App)\napp.mount('#app')\n"],"names":["formatNumber","num","isNaN","n","Number","parseFloat","toFixed","toString","Math","floor","suffixes","tier","log10","abs","length","toExponential","scaled","pow","decimals","formatDataValue","bytes","value","prefixes","formatTime","ms","seconds","minutes","hours","props","__props","formattedAmount","computed","amount","formattedRate","rate","visible","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","icon","_hoisted_3","_hoisted_4","name","_hoisted_5","emit","__emit","rotation","ref","isAnimating","autoRotateInterval","showProgress","progress","crankStyle","transform","statusText","locked","broken","automated","handleClick","disabled","setTimeout","stopAutoRotate","clearInterval","watch","val","window","setInterval","immediate","onBeforeUnmount","class","_normalizeClass","animating","onClick","style","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","isActive","progressBar","repeat","barWidth","filled","round","empty","percentText","_cache","label","processing","active","dataGenerationProgress","_a","generationState","dataGeneration","dataButtonValue","dg","bitsPerTick","energyCost","energyGenerationProgress","energyGeneration","energyButtonValue","energyPerTick","resourceStats","energyPerClick","handleEnergyClick","isCrankBroken","isCrankAutomated","_createVNode","CrankButton","gameStats","isDataUnlocked","TerminalProgressButton","stats","nodesUnlocked","_unref","totalEnergy","totalData","maxLevel","node","showLevel","nodeClasses","unlocked","isUnlocked","available","isAvailable","isTierLocked","affordable","canAfford","selected","isSelected","justUnlocked","nodeLevel","nodeStyle","left","x","top","y","tierColor","id","allNodes","old_shed","branch","description","requires","cost","effects","hand_crank","energy","lubricant","lightbulb","hamster_wheel","automation","resource","attic","unlockBranch","crank_harder","costScaling","levelEffects","breakCrank","catch_rat","old_generator","data","rat_king","level","autocrank","automateCrank","gpa_old_pc","command_help","command_generate","unlockDataGeneration","unlockDataProcessing","ram_adjustment","dataGenSpeedMultiplier","usb_stick","maxDataCapacityBonus","overclock","dataGenAmountBonus","BRANCH_UNLOCK_ORDER","TIER_COST_MULTIPLIERS","COST_SHIFT_FOR_RESOURCE","LAYOUT_CONFIG","Object","freeze","CENTER_X","CENTER_Y","TIER_SPACING","SAME_TIER_OFFSET","NODE_SPACING","NODE_SIZE","RESOURCES","color","FEATURE_FLAGS","DOTS_TO_AVAILABLE_NODES","getReqId","req","isNodeDefined","getTierMultiplierForResource","shift","effectiveTier","max","GameData","constructor","__publicField","this","getScaledNodeCost","options","ascensionCount","prestigeBonuses","currentLevel","baseCost","ascensionMultiplier","levelMultiplier","costReduction","costMultiplier","tierCostMultipliers","entries","finalCost","getScaledNodeCostUtil","countUnlockedInTier","unlockedNodeIds","nodesData","count","forEach","countUnlockedInTierUtil","nodes","isTierUnlocked","_tier","_unlockedNodeIds","getConnections","connections","values","reqId","reqNode","isTierGate","push","from","to","x1","y1","x2","y2","getConnectionsUtil","checkRequirementMet","unlockedNodes","nodeLevels","has","checkRequirementMetUtil","checkNodeAvailable","Array","isArray","every","justUnlockedNodeId","animatingConnections","Set","glowingConnections","Map","travelingDots","nodeProgress","zoomLevel","container","glowAnimationFrame","dotAnimationFrame","dotInterval","lastUnlockedNodeId","newId","triggerUnlockAnimation","delete","filter","conn","isNodeVisible","nodesList","nodeId","resources","scaledCost","checkCanAffordNode","checkTierLocked","unlockedBranches","checkNodeVisible","isConnectionUnlocked","connection","selectNode","connKey","add","isConnectionAnimating","key","getConnectionGradientId","getGlowOffset","get","getGlowGradientId","spawnDotsFromCore","Date","now","random","fromNode","toNode","startTime","toUnlocked","spawnDotsFromNode","outgoingConnections","index","getDotPosition","dot","getNodeProgressPercent","currentProgress","totalCost","reduce","sum","min","handleWheel","event","ctrlKey","preventDefault","delta","deltaY","setZoom","newZoom","oldZoom","rect","getBoundingClientRect","cursorX","clientX","cursorY","clientY","scrollX","scrollLeft","scrollY","scrollTop","scale","zoomIn","zoomOut","resetZoom","nextTick","coreNode","clientWidth","clientHeight","onMounted","time","animate","offset","set","requestAnimationFrame","startGlowAnimation","dotsToSpawn","elapsed","progressIncrement","startDotAnimation","cancelAnimationFrame","onWheel","title","transformOrigin","_Fragment","_renderList","gradientUnits","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","stroke","_normalizeStyle","_hoisted_18","_createBlock","SkillNode","selectedNodeId","onSelect","isMaxLevel","costEntries","map","resourceName","charAt","toUpperCase","slice","current","requirementEntries","reqLevel","levelMet","met","unlock","canUpgrade","_createTextVNode","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_19","tierGate","remaining","_b","requiredTier","_hoisted_20","_hoisted_21","getStyle","notification","animationDuration","animationDelay","duration","_TransitionGroup","notifications","type","message","filteredHistory","narrateOnlyFilter","history","reverse","show","newVal","panelBody","document","querySelector","scrollHeight","getTypeIcon","checked","onChange","$event","target","timestamp","toLocaleString","prestigeUpgrades","quick_start","effect","startingEnergy","click_power_1","bonusEnergyPerClick","headstart_1","startingNodes","efficient_learning","auto_clicker_1","startingAutomation","data_affinity","cost_reduction_1","speed_research","genesis_protocol","randomStartingNodes","quantum_efficiency","automationMultiplier","cost_reduction_2","core_multiplier","coreMultiplier","instant_tier_1","startAllTier","eternal_generator","bandwidth_genesis","prestige_mastery","selectedTier","upgradesByTier","byTier","upgrade","getUpgradesByTier","displayUpgrades","quantumCores","isPurchased","upgradeId","purchasedUpgrades","canPurchase","getUpgradeStatusClass","selectTier","requireIds","join","handlePurchase","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","totalCoresEarned","_hoisted_28","_hoisted_29","statistics","totalNodesEverUnlocked","_hoisted_30","_hoisted_31","totalEnergyEverEarned","_hoisted_32","_hoisted_33","fastestClear","ChangelogData","version","date","sections","Added","Changed","Fixed","Removed","changelogData","filteredChangelog","release","fromEntries","items","section","item","idx","useNodeManagement","gameState","prestigeState","eventBus","computedValues","dataPerClick","dataMultiplier","allRatesMultiplier","bonuses","resourceRates","automations","dataPerClickDisplay","selectedNode","isSelectedNodeUnlocked","isSelectedNodeAvailable","checkRequirements","canAffordSelectedNode","checkAffordability","tierGateRequirement","getNodeLevel","console","warn","getNodeMaxLevel","unlockNode","isUpgrade","newUnlocked","applyNodeEffects","newLevel","EffectRegistry","unlockFeature","feature","interval","capacityBonus","maxDataCapacityMultiplier","instantUnlock","lockedAvailableNodes","randomNode","unlockEnergyGeneration","energyGenRate","energyGenInterval","effectSet","handler","applyStartingBonuses","getAccumulatedBonuses","totalResources","sort","on","generateEnergy","processData","canProcessData","maxDataCapacity","dataGain","canUpgradeNode","NotificationType","DisabledNotificationTypes","NotificationDurations","NOTIFICATION_HISTORY_KEY","useGameLoop","lastUpdate","notificationHistory","showNotificationHistory","notificationId","gameLoopInterval","saveInterval","prestigeSaveInterval","cachedResourceRates","cachedEnergyPerClick","autoCrankAccumulator","capDataAtCapacity","maxCap","gameLoop","rates","progressPerSecond","processDataGeneration","eg","processEnergyGeneration","processAutoCrank","deltaTime","showNotification","INFO","String","unshift","read","saveNotificationHistory","findIndex","splice","localStorage","setItem","JSON","stringify","e","error","resetGameState","resetResources","resetNodes","resetRunTimer","onNodeUnlocked","NODE_UNLOCK","setLastUnlockedNode","initialize","saved","getItem","parse","loadNotificationHistory","onUnmounted","toggleNotificationHistory","clearNotificationHistory","ascend","cores","calculateQuantumCores","ERROR","size","runTime","runStartTime","coresEarned","totalCores","SUCCESS","handlePurchaseUpgrade","purchaseUpgrade","handleUnlockNode","TriggerType","ComparisonOperator","mainStoryNarrations","NARRATION","trigger","ON_FIRST_LAUNCH","persistAcrossAscension","priority","ON_NODE_UNLOCKED","TERMINAL","delay","ON_RESOURCE_AMOUNT_REACHED","threshold","comparison","GREATER_EQUAL","energySideNarrations","ON_NODE_LEVEL_REACHED","computerSideNarrations","gameplayHints","HINT","ON_TIER_REACHED","ON_BRANCH_UNLOCKED","ON_OFFLINE_RETURN","offlineSeconds","SHOWN_NOTIFICATIONS_KEY","NotificationDefaults","checkComparison","LESS_EQUAL","EQUAL","GREATER","LESS","useNotificationEngine","shownNotifications","notificationIndex","allNotifications","notificationQueue","isProcessingQueue","saveTimeout","lastTickCheck","triggeredTiers","triggeredThresholds","bandwidth","lastInteractionTime","triggeredIdleThresholds","saveShownState","wasShown","resetShownNotifications","persistentOnly","clear","queueNotification","a","b","processQueue","displayDelay","nodeNotifications","tierKey","tierNotifications","levelKey","levelNotifications","onBranchUnlocked","onFeatureUnlocked","ON_FEATURE_UNLOCKED","onGameLoaded","saveExists","onAscensionComplete","ON_ASCENSION","checkIdleThresholds","idleSeconds","thresholds","ON_IDLE_TIME","onGameTick","_data","parsed","loadShownState","buildNotificationIndex","__resetNarrations","all","log","checkResourceThresholds","recordInteraction","events","eventName","callback","handlers","indexOf","once","unsubscribe","off","useEventBus","reactive","unlockedFeatures","baseCapacity","highestTierReached","maxTier","keys","k","newBranches","newFeatures","useGameState","upgrades","showAscensionPanel","clickPower","dataCapacity","specialEffects","mult","t","parseInt","energyLog","nodeBonus","tierBonus","multiplier","newUpgrades","toggleAscensionPanel","usePrestigeState","nodeManagement","showChangelogModal","toggleChangelogModal","handleKeydown","addEventListener","removeEventListener","args","ResourceBar","Sidebar","onGenerateEnergy","onProcessData","onAscend","SkillTree","onSelectNode","InfoPanel","onUnlock","NotificationToast","NotificationHistoryPanel","onClose","AscensionPanel","onPurchaseUpgrade","ChangelogModal","TreeBuilder","buildTree","tree","nodesByTier","children","parents","descendants","parentId","countDescendants","visited","childId","assignBranches","branchAngle","tier1Nodes","tier1Count","angle","PI","p","parentAngles","averageAngle","angles","sumSin","sumCos","sin","cos","atan2","PositionCalculator","config","calculateDepth","cache","depth","sameTierHops","parentDepths","parent","maxParentDepth","d","parentWithMaxDepth","find","_","i","parentDepthInfo","isSameTierHop","calculateRadius","depthInfo","tierSpacing","sameTierOffset","calculatePositions","centerX","centerY","depthCache","maxDepth","depth1Nodes","radius1","depthNodes","singleParentNodes","radius","groupByParent","group","parentAngle","siblings","spreadPerNode","sqrt","localeCompare","nodeAngle","halfNode","nodeSize","nodeIds","groups","CollisionResolver","resolveCollisions","nodeList","minDistance","nodeSpacing","cellSize","iter","maxOverlap","grid","buildSpatialGrid","nodeA","cellKey","getGridCellKey","cx","cy","split","dx","dy","adjKey","nodeB","distance","overlap","pushX","pushY","treeBuilder","positionCalculator","collisionResolver","calculateLayout","nodesCopy","structuredClone","applyLayout","gameData","layoutNodes","initializeLayout","createApp","App","mount"],"mappings":"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"}